/**
 * agent-js - v3.0.0 - 2020-02-27
 * 
 *
 * Copyright (c) 2020 RingCentral
 * Licensed N/A <>
 */

!function(a,b){function c(a,b,c,d,e,f,g,h){c.setPrefix("engage-agent"),f.useSanitizeValueStrategy("sanitize"),f.preferredLanguage("us"),f.fallbackLanguage("us"),f.useLoader("localeLoader"),g.globalTimeToLive({success:6e3,error:-1,warning:6e3,info:6e3}),g.globalDisableCountDown(!0),g.globalDisableIcons(!0),g.globalTranslateMessages(!1),b.interceptors.push("BaseUrlInterceptor"),b.interceptors.push("AuthInterceptor"),d.decorator("$state",["$delegate","$rootScope",function(a,b){return b.$on("$stateChangeStart",function(b,c,d,e){a.fromState=e}),a}]);var i=e.extendPalette("blue-grey",{500:"#0091FF",600:"#0684BD","hue-1":"500","hue-2":"600",contrastDefaultColor:"light"}),j=e.extendPalette("blue",{500:"#4481EB","hue-1":"500",contrastDefaultColor:"light"});e.definePalette("blue-grey",i),e.definePalette("blue-gray-alt",j),e.theme("default").primaryPalette("blue-grey").accentPalette("blue-gray-alt").warnPalette("deep-orange").backgroundPalette("grey"),h.set([{alias:"10",size:"10px"},{alias:"12",size:"12px"},{alias:"14",size:"14px"},{alias:"16",size:"16px"},{alias:"18",size:"18px"},{alias:"20",size:"20px"},{alias:"22",size:"22px"},{alias:"24",size:"24px"}],[{label:"Arial",alias:"Arial"},{label:"Sans Serif",alias:"sans-serif"},{label:"Serif",alias:"serif"},{label:"Monospace",alias:"monospace"},{label:"Trebuchet",alias:'"Trebuchet MS"'},{label:"Verdana",alias:"Verdana"}])}function d(a,b,c,d,e,f){var g=!0;b.$on("ForceLogout",function(b,e){"#/test"!==a.location.hash?(c.clearSession(),d.go("base.login")):d.go("base.test")}),b.$on("customBeforeUnload",function(a,b){g=!1}),a.onbeforeunload=function(a){if(a.preventDefault(),g)return"Do you want to leave this page? You will be logged out."},a.__settings={},a.__settings.static_version=Object.freeze({bamboo_repository_revision_number:f.bamboo_repository_revision_number,bamboo_buildResultKey:f.bamboo_buildResultKey}),b.$emit("ForceLogout"),a.__settings.show_stats=!0,Highcharts.theme={colors:["#505050","#27bde7","#1e56fe","#5b1df4","#bc0fdd","#fa1154","#e33304","#fd8205","#e6aa07"],chart:{backgroundColor:"rgba(255, 255, 255, 0)",style:'"Open Sans", Helvetica, Arial, sans-serif'},exporting:{buttons:{contextButton:{symbolStroke:"#333333",verticalAlign:"bottom",y:0,theme:{stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)",states:{hover:{fill:"rgba(255, 255, 255, .2)"}}}}}},tooltip:{shared:!0},title:{text:null},credits:{enabled:!1},legend:{itemStyle:{color:"#333333"},itemHoverStyle:{color:"#555555"}},lang:{noData:e.instant("REALTIME_REPORTING.NO_DATA")}},Highcharts.setOptions(Highcharts.theme),Highcharts.setOptions({global:{useUTC:!1}})}function e(a,b,c,d,e,f,g,h,i,j){var k=["base","base.login","base.test"];a.selectedLanguage=c.get("USERLOC"),a.pageTitle="Agent",a.selectedTz=c.get("USERTZ"),a.selectedTz||c.set("USERTZ",moment.tz.guess()),d.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()"><div class="growl-item alert" ng-repeat="message in growlMessages.directives[referenceId].messages" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="growlMessages.deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="row"><span class="col-sm-1"><i ng-if="message.severity === \'error\'" class="material-icons alert-icon {{message.severity}}" aria-hidden="true">warning</i><i ng-if="message.severity === \'info\'" class="material-icons alert-icon {{message.severity}}" aria-hidden="true">info</i><i ng-if="message.severity === \'chat\'" class="material-icons alert-icon {{message.severity}}" aria-hidden="true">message</i></span><div class="col-sm-9 growl-message" translate="{{message.text}}" translate-compile></div></div></div></div>'),a.$on("$stateChangeStart",function(a,c,d){return("base.default.phone"===c.name||"base.default.phone.dialpad"===c.name)&&g.onCallOrPendingDisp()&&g.currentCall&&g.currentCall.uii&&g.currentCall.showCallView&&(a.preventDefault(),b.go("base.default.phone.dialpad.detail",{uii:g.currentCall.uii})),("base.default.phone.preview"===c.name||"base.default.phone.progressive"===c.name)&&h.selectedPreviewLead&&"PENDING"===h.selectedPreviewLead.leadState&&h.selectedPreviewLead.leadId&&(a.preventDefault(),b.go(c.name+".detail",{leadId:h.selectedPreviewLead.leadId})),c.redirectTo&&(a.preventDefault(),b.go(c.redirectTo,d)),i.isAuthenticated()||k.indexOf(c.name)>-1?void 0:!i.getFirstLogin()||"base.config"!==c.name&&"base.config.queues"!==c.name?(console.log("not authenticated, sending to login"),a.preventDefault(),window.location.href=EngageAuth.Navigation.getAgentLoginUrl()):void 0}),a.$on("$stateChangeSuccess",function(a,b,c,d,e){ga("send","pageview",b),"base.default.phone.dialpad.detail"===b.name&&g.checkCallAndPopDispositionModal()}),a.$on("$stateChangeError",console.log.bind(console)),a.favImg=j.getFavUrl()}function f(){EngageAuth.Session.init().catch(function(a){console.error("Auth Code not valid")}).finally(function(){angular.bootstrap(document,["agent_ui"])})}c.$inject=["$urlRouterProvider","$httpProvider","localStorageServiceProvider","$provide","$mdThemingProvider","$translateProvider","growlProvider","ngQuillConfigProvider"],d.$inject=["$window","$rootScope","SessionSvc","$state","$translate","ENV_VARS"],e.$inject=["$scope","$state","localStorageService","$templateCache","CfChatSvc","ChatSvc","CallSvc","LeadSvc","SessionSvc","BrandingSvc"],angular.module("agent_ui",["templates-app","templates-common","ui.select","ui.router","ui.router.stateHelper","ui.bootstrap","ui.grid","ui.grid.resizeColumns","ui.grid.pinning","LocalStorageModule","angular-uuid","pascalprecht.translate","ngCookies","ngResource","angular-growl","timer","ngQuill","ngMask","ngMessages","PackageConfig","smart-table","cfp.hotkeys","cf.tabs","cf.branding","formly","formlyBootstrap","gridstack-angular","scriptingStudio.render","ngAria","ngAnimate","ngMaterial","ngSanitize","agent_ui.base","agent_ui.default","agent_ui.login","agent_ui.configure","agent_ui.configure.queues","agent_ui.configure.multipleLogin","agent_ui.updatelogin","agent_ui.nav","agent_ui.statusbar","agent_ui.scoreboard","agent_ui.scoreboard.agentDailyStats","agent_ui.scoreboard.inboundStats","agent_ui.scoreboard.outboundStats","agent_ui.scoreboard.chatStats","agent_ui.scoreboard.agentStats","agent_ui.scoreboard.productDetailControl","agent_ui.scoreboard.productMetrics","agent_ui.scoreboard.statsCampaign","agent_ui.scoreboard.statsQueue","agent_ui.scoreboard.statsChatQueue","agent_ui.scoreboard.statsAgent","agent_ui.phone","agent_ui.phone.dialPad","agent_ui.phone.previewLeads","agent_ui.phone.detail","agent_ui.phone.leads","agent_ui.phone.callbacks","agent_ui.phone.callHistory","agent_ui.phone.modal.hangupOffhook","agent_ui.phone.modal.needToBeAvailable","agent_ui.chat","agent_ui.chat.list","agent_ui.chat.detail","agent_ui.chat.messaging","agent_ui.chat.pending","agent_ui.chat.modal.rejectChat","agent_ui.chat.modal.requeueChat","agent_ui.chat.modal.pending","agent_ui.chat.modal.rnaState","agent_ui.chat.modal.outboundSms","agent_ui.scripts","agent_ui.scripts.list","agent_ui.scripts.detail","agent_ui.logs","agent_ui.logs.search","agent_ui.logs.email","agent_ui.stats","agent_ui.stats.metrics","agent_ui.monitoring","agent_ui.monitoring.agents","agent_ui.monitoring.agents.detail","agent_ui.monitoring.agents.callTotals","agent_ui.toolbar","agent_ui.toolbar.widget","agent_ui.toolbar.widget.callControl","agent_ui.toolbar.widget.chatControl","agent_ui.toolbar.widget.agentControl","agent_ui.toolbar.widget.monitorControl","agent_ui.toolbar.widget.transferSessionsControl","agent_ui.toolbar.widget.supervisorBargeinControl","agent_ui.modal.emailTemplate","agent_ui.modal.hangup","agent_ui.modal.requeue","agent_ui.modal.transfer","agent_ui.modal.hold","agent_ui.modal.directTransferFailed","agent_ui.modal.directTransferPresented","agent_ui.modal.knowledgeBaseEdit","agent_ui.factories.localeLoader","agent_ui.factories.utils","agent_ui.factories.chatUtils","agent_ui.factories.dialogs","agent_ui.factories.dialogs.confirm","agent_ui.factories.dialogs.leads","agent_ui.factories.dialogs.leads.detail","agent_ui.factories.dialogs.leads.update","agent_ui.factories.dialogs.leads.manualPass","agent_ui.factories.browserNotification","agent_ui.dialogs.shared.tableColumns","agent_ui.dialogs.disposition","agent_ui.dialogs.disposition.chat","agent_ui.directives.agentInputs","agent_ui.directives.cfAgentScript","agent_ui.directives.cfAgentScript.frame","agent_ui.directives.cfChatMessaging","agent_ui.directives.cfChatMessagingSend","agent_ui.directives.cfChatMessagingSendMonitoring","agent_ui.directives.cfDateTimePicker","agent_ui.directives.cfHostnameLink","agent_ui.directives.cfAgentLoader","agent_ui.directives.charts.controller","agent_ui.directives.charts.lineChart","agent_ui.directives.disableLink","agent_ui.directives.disposition.form","agent_ui.directives.helptext","agent_ui.directives.leads.list","agent_ui.directives.leads.table","agent_ui.directives.leads.callbacksTable","agent_ui.directives.leads.table.settings","agent_ui.directives.leads.table.dial","agent_ui.directives.leads.searchFields","agent_ui.directives.lead.forms.search","agent_ui.directives.dashboard.bigNumber","agent_ui.directives.dashboard.monitor.detailCard","agent_ui.directives.dashboard.monitor.chatDetailCard","agent_ui.directives.call_history.card","agent_ui.directives.audioPlayer","agent_ui.directives.growingHeightInput","agent_ui.directives.scriptFrameManager","agent_ui.service.authInterceptor","agent_ui.service.baseUrlInterceptor","agent_ui.service.acd","agent_ui.service.agent","agent_ui.service.application","agent_ui.service.auth","agent_ui.service.call","agent_ui.service.callHistory","agent_ui.service.cfChat","agent_ui.services.cfAgentScript","agent_ui.service.chat","agent_ui.service.dashboard","agent_ui.service.disposition","agent_ui.service.emailTemplate","agent_ui.service.indexDbService","agent_ui.service.knowledgeBase","agent_ui.service.lead","agent_ui.service.login","agent_ui.service.monitor","agent_ui.service.outbound","agent_ui.service.progressiveDial","agent_ui.service.script","agent_ui.service.scriptFormat","agent_ui.service.scriptRender","agent_ui.service.shortcutKeys","agent_ui.service.system","agent_ui.service.session","agent_ui.service.softphone","agent_ui.service.stats","agent_ui.service.toolbar","agent_ui.service.transfer","agent_ui.testHarness","agent_ui.filter.time.hhMmSs","agent_ui.filter.time.fullDateTime","agent_ui.filter.formatStateLabel","agent_ui.filter.formatEmptyValue","agent_ui.filter.formatChatChannelType","agent_ui.filter.filterLength","agent_ui.filter.formatBoolYesNo","agent_ui.filter.phoneNumber","agent_ui.filter.phoneFormat","agent_ui.filter.snakeToCamel","agent_ui.filter.camelToSnake","agent_ui.filter.realTimeReporting","agent_ui.filter.dateTime","agent_ui.filter.time.cutesyTime","agent_ui.filter.chat.lastMessage","agent_ui.filter.chat.queueAbbr","agent_ui.filter.html.toLinkPop","agent_ui.filter.serverTimeToLocal"]).config(c).run(d).controller("AppCtrl",e),angular.element(document).ready(f),function(){"use strict";function a(a){a.setNestedState({name:"base",url:"/",abstract:!0,redirectTo:"base.default",views:{"base@":{template:"<ui-view></ui-view>"}},resolve:{translationFile:["localeLoader",function(a){return a()}]}})}a.$inject=["stateHelperProvider"],angular.module("agent_ui.base",["ui.router","ui.router.stateHelper"]).config(a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var a=e.showScript(d.selectedChat),b=e.showParentFrame(d.selectedChat);return d.selectedChat.uii&&(a||b)}function h(){return d.getChatDuration(d.selectedChat.queueDts)}function i(){b(function(){j.selectedIndex=f.SCRIPT,j.scriptLoaded=!0})}var j=this;j.chatService=d,j.selectedIndex=f.DETAIL,j.scriptLoaded=!1,j.chatHasScript=g,j.getChatDuration=h,function(){g()?i():d.selectedChat.scriptPending?a.$watch(function(){return d.selectedChat.script},function(a,b){!angular.isDefined(b)&&angular.isDefined(a)&&i()}):j.scriptLoaded=!0}()}a.$inject=["$scope","$timeout","$filter","ChatSvc","CfAgentScriptSvc","CALL_TAB_INDEX"],angular.module("agent_ui.chat.detail",[]).controller("ChatDetailCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"chat",parent:"base.default",url:"/chat",views:{"body@base.default":{templateUrl:"layout/views/twoPanel.tpl.html",controller:"ChatCtrl as vm"},"nav@base.default.chat":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"},"sub_nav@base.default.chat":{templateUrl:"chat/chat.list.tpl.html",controller:"ChatListCtrl as vm"},"left@base.default.chat":{templateUrl:"chat/chat.messaging.default.tpl.html",controller:["ChatSvc",function(a){this.chatService=a}],controllerAs:"vm"},"middle@base.default.chat":{templateUrl:"layout/components/middle.default.tpl.html",controller:"ChatCtrl as vm"}},children:[{name:"pending",url:"/pending/:uii",views:{"left@base.default.chat":{templateUrl:"chat/chat.pending.tpl.html",controller:"ChatPendingCtrl as vm"}}},{name:"detail",url:"/detail/:uii",views:{"left@base.default.chat":{templateUrl:"chat/chat.messaging.tpl.html",controller:"ChatMessagingCtrl as vm"},"middle@base.default.chat":{templateUrl:"chat/chat.detail.tpl.html",controller:"ChatDetailCtrl as vm"}}}]})}function b(a,b,c){function d(){return""}function e(){return"chat_bubble_outline"}a.isChat=!0,a.showMidPanel=!0;var f=this;f.getLabel=d,f.getIcon=e,function(){c.selectedChat&&c.selectedChat.uii&&(c.selectedChat.pending?b.go("base.default.chat.pending",{uii:c.selectedChat.uii}):b.go("base.default.chat.detail",{uii:c.selectedChat.uii}))}()}a.$inject=["stateHelperProvider"],b.$inject=["$scope","$state","ChatSvc"],angular.module("agent_ui.chat",["ui.router","ui.router.stateHelper"]).config(a).controller("ChatCtrl",b)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(a){return!m(a)&&!a.inactive&&!l(a)||a.inactive&&!a.pendingDisp}function k(a){return!m(a)&&a.inactive&&a.pendingDisp}function l(a){return!m(a)&&!k(a)&&!a.inactive&&a.agentMessage&&a.uii!==g.selectedChat.uii}function m(a){return a.pending}function n(a){g.openOutboundSmsModal(a).then(function(a){a&&p(null,!1)})}function o(a,b){g.selectedChat&&g.selectedChat.uii!==a.uii&&(g.lastSelectedChatUii=angular.copy(g.selectedChat.uii)),p(null,!1),g.selectedChat=a,g.selectedChat.unreadCount=0,b.stopPropagation(),a.pending?c.go("base.default.chat.pending",{uii:a.uii}):c.go("base.default.chat.detail",{uii:a.uii})}function p(a,b){x.listExpanded=angular.isDefined(b)?b:!x.listExpanded;var c=e.parents().find(".side-nav"),d=c.siblings(".section.left");x.listExpanded?(c.addClass("expanded"),d.addClass("nav-expanded"),i.openChatMenuState=!0):(c.removeClass("expanded"),d.removeClass("nav-expanded"),i.openChatMenuState=!1)}function q(){f.custom(null,"chat/modals/rnaModal.tpl.html","RnaStateCtrl")}function r(a){return d("ChatLastMessage")(a)}function s(a){return a&&a[a.length-1]||{}}function t(a){return"AGENT"!==s(a).type}function u(a){var b="";return x.getLastMessage(a).message&&(b=d("limitTo")(v(x.getLastMessage(a).message),x.messageLimit)),b}function v(a){var b=document.createElement("span");return b.innerHTML=a,b.textContent||b.innerText}function w(){h.isChatView=!h.isChatView,!1===h.isChatView&&c.go(h.currentUrl)}var x=this;x.listExpanded=!1,x.messageLimit=20,x.chatQueues={},x.chatService=g,x.agentService=i,x.callService=h,x.getMessage=u,x.getLastMessage=s,x.getLastChatTime=r,x.lastMessageFromClient=t,x.openChat=o,x.toggleExpanded=p,x.openChatRnaModal=q,x.showTimer=j,x.showPendingDisp=k,x.showMessageNotSent=l,x.showPendingChat=m,x.openOutboundSmsModal=n,x.switchChat=w,function(){x.toggleExpanded(null,x.listExpanded),b.$watch(function(){return g.chats&&g.chats.length},function(){x.chatQueues=_.groupBy(g.chats,function(a){return a.chatQueueName})}),a.$on("chatLeftMenuExpanded",x.toggleExpanded),h.isChatView=!0}(),b.$on("$destroy",function(){h.isChatView=!1})}function b(){return function(a,b){var c=a;if(!b){var d=a.split(/[\s-_]/),e="";d.length>1?_.each(d,function(a,b){b<3&&(e+=a[0])}):e=d[0].slice(0,3),c=e}return c.toUpperCase()}}a.$inject=["$rootScope","$scope","$state","$filter","$element","Dialog","ChatSvc","CallSvc","AgentSvc"],angular.module("agent_ui.chat.list",[]).controller("ChatListCtrl",a).filter("ChatQueueAbbr",b)}(),function(){"use strict";function a(a){this.chatService=a}a.$inject=["ChatSvc"],angular.module("agent_ui.chat.messaging",[]).controller("ChatMessagingCtrl",a)}(),function(){"use strict";function a(a,b){function c(){a.sendPresentedResponse(a.selectedChat.uii,a.selectedChat.messageId,"REJECT")}function d(){a.sendPresentedResponse(a.selectedChat.uii,a.selectedChat.messageId,"ACCEPT")}var e=this;e.rejectChat=c,e.acceptChat=d,e.chatService=a,e.timeFormat=b.TIME_1}a.$inject=["ChatSvc","DATE_FORMATS"],angular.module("agent_ui.chat.pending",[]).controller("ChatPendingCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){f.isChatView=!0,e.sendPresentedResponse(a.chat.uii,a.chat.messageId,"REJECT"),d.cancel()}function j(){b&&b.uii&&b.uii===a.chat.uii&&(e.forwardToChat=!0),f.isChatView=!0,e.sendPresentedResponse(a.chat.uii,a.chat.messageId,"ACCEPT"),d.hide()}function k(){j(),e.forwardToChat=!0}a.chat=h.chat,a.decline=i,a.accept=j,a.acceptGo=k,function(){a.$on("$destroy",function(){b()});var b=c.$on(g.CHAT_CANCELLED,function(b,c){c===a.chat.uii&&d.cancel()})}()}a.$inject=["$scope","$stateParams","$rootScope","$mdDialog","ChatSvc","CallSvc","CHAT_EVENTS","resolvedData"],angular.module("agent_ui.chat.modal.pending",[]).controller("ChatPendingModalCtrl",a)}(),function(){"use strict";function a(a,b,growl,c,d,e){function f(){b.cancel()}function g(){a.sendPending=!0,d.sendManualOutboundSms(a.params.queueId,a.params.dialDest,a.params.callerId,a.params.message).then(function(){a.sendPending=!1,b.hide(a.params)},function(b){a.sendPending=!1;var c=b.message&&b.message.replace(/(com.connectfirst.intelliqueue.exceptions.IntelliQueueException :)|\(error:-1\)/g,"");growl.error(c)})}function h(b){a.dnisList=b.dnis||[],a.params.callerId=a.dnisList&&a.dnisList[0]}a.availQueues=[],a.dnisList=[],a.params={},a.sendPending=!1,a.cancel=f,a.send=g,a.updateDnisList=h,function(){var b=c.getAvailableChatQueues(),d=e.getAssignments().chatQueues;d&&d.length>0&&(a.availQueues=_.filter(b,function(a){return a.dnis&&a.dnis.length>0&&d.indexOf(a.chatQueueId)>-1}));var f=a.availQueues[0];f&&(a.dnisList=f.dnis||[],a.params={queueId:f.chatQueueId,callerId:f.dnis&&f.dnis[0],message:""})}()}a.$inject=["$scope","$mdDialog","growl","AgentSvc","ChatSvc","SessionSvc"],angular.module("agent_ui.chat.modal.outboundSms",[]).controller("ChatOutboundSmsModalCtrl",a)}(),function(){"use strict";function a(a,b){a.reason="",a.cancel=function(){b.cancel()},a.response=function(){b.hide(a.reason)}}a.$inject=["$scope","$mdDialog"],angular.module("agent_ui.chat.modal.rejectChat",[]).controller("RejectChatCtrl",a)}(),function(){"use strict";function a(a,b,growl,c,d,e){function f(){var a=d.chatSettings.availableChatRequeueQueues,b="chatQueueId";"SHORTCUT"===c.selectedChat.chatRequeueType&&(a=c.selectedChat.requeueShortcuts.shortcuts,b="requeueChatQueueId");var f=_.map(a,b);f.length>0&&e.getLoggedInAgentCountByChatQueue(f).then(function(c){_.each(c,function(c){var d=_.findIndex(a,function(a){return parseInt(a[b])===parseInt(c.queueId)});-1!==d&&(a[d].loggedInAgentCount=c.loggedInAgentCount)})})}function g(){b.cancel()}function h(){var d=c.selectedChat.uii,e=c.selectedChat.agentId,f=a.requeue.queue.chatQueueId,g=a.requeue.skill;"SHORTCUT"===c.selectedChat.chatRequeueType&&(f=a.requeue.queue.requeueChatQueueId,g=a.requeue.queue.skillId),c.requeue(d,e,f,g),growl.info("CHAT.REQUEUE.CHAT_REQUEUED"),b.hide(!0)}function i(){a.requeue.skill=null}a.chatService=c,a.chatSettings=d.chatSettings,a.requeue={queue:null,skill:null},a.cancel=g,a.ok=h,a.clearSkill=i,function(){a.$on("$destroy",function(){_.each(d.chatSettings.availableChatRequeueQueues,function(a){delete a.loggedInAgentCount}),_.each(c.selectedChat.requeueShortcuts.shortcuts,function(a){delete a.loggedInAgentCount})}),f()}()}a.$inject=["$scope","$mdDialog","growl","ChatSvc","AgentSvc","StatsSvc"],angular.module("agent_ui.chat.modal.requeueChat",[]).controller("RequeueChatCtrl",a)}(),function(){"use strict";function a(a,b,c,d){function e(){b.cancel()}function f(){d.setChatState(c.CHAT_AVAILABLE),b.hide(!0)}a.close=e,a.goAvailable=f}a.$inject=["$scope","$mdDialog","CHAT_STATES","ChatSvc"],angular.module("agent_ui.chat.modal.rnaState",[]).controller("RnaStateCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"base.config",url:"config?agentDest",views:{"base@":{controller:"ConfigCtrl as vm",templateUrl:"configure/configure.tpl.html"}},resolve:{availQueues:["AcdSvc",function(a){return angular.copy(a.getAvailableQueues())}],availSkillProfiles:["AcdSvc",function(a){return a.getAvailableSkillProfiles()}],availCampaigns:["OutboundSvc",function(a){return a.getAvailableCampaigns()}],availDialGroups:["OutboundSvc",function(a){return a.getAvailableDialGroups(!0)}],availChatQueues:["AgentSvc",function(a){return angular.copy(a.getAvailableChatQueues())}],agentSettings:["AgentSvc",function(a){return a.agentSettings}],fromState:["$state",function(a){return a.fromState}]}})}function b(a,b,c,d,e,f,g,h,growl,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){var a=angular.copy(o.getPreviousState());""!==a&&o.setPreviousState(""),a&&""!==a&&"base.login"!==a?b.go(a):b.go("base.login")}function E(a){("INBOUND"===a&&0!==O.availQueues.length||"CHAT"===a&&0!==O.availChatQueues.length)&&b.go("base.config.queues",{type:a})}function F(){var a=jQuery("#inbound-queues .queue-select").height();(jQuery("#inbound-queues .queue-chips").height()>a||O.allQueuesSelected)&&(O.showQueueEllipsis=!0)}function G(){var a=jQuery("#chat-queues .queue-select").height();(jQuery("#chat-queues .queue-chips").height()>a||O.allChatQueuesSelected)&&(O.showChatQueueEllipsis=!0)}function H(){var a=jQuery("#inbound-queues .queue-select").width(),b=jQuery("#inbound-queues .queue-chips").width(),c=jQuery("#inbound-queues .queue-chips .queue-chip"),d=0,e=0;_.some(c,function(a){var c=d+$(a).outerWidth(!0);if(!(c<b))return!0;d=c,e+=1}),d>0&&(f(function(){var b=jQuery("#inbound-queues .queue-select .count").width(),c=a-d-b-12-24;jQuery("#inbound-queues .queue-select .ellipsis-group").css("left",-c+"px")}),O.allQueuesSelected?O.numQueuesHidden=O.assignments.queues.length:O.numQueuesHidden=O.assignments.queues.length-e)}function I(){var a=jQuery("#chat-queues .queue-select").width(),b=jQuery("#chat-queues .queue-chips").width(),c=jQuery("#chat-queues .queue-chips .queue-chip"),d=0,e=0;_.some(c,function(a){var c=d+$(a).outerWidth(!0);if(!(c<b))return!0;d=c,e+=1}),d>0&&(f(function(){var b=jQuery("#chat-queues .queue-select .count").width(),c=a-d-b-12-24;jQuery("#chat-queues .queue-select .ellipsis-group").css("left",-c+"px")}),O.allChatQueuesSelected?O.numChatQueuesHidden=O.assignments.chatQueues.length:O.numChatQueuesHidden=O.assignments.chatQueues.length-e)}function J(){if(O.formSignin.$valid&&(!O.isAuthenticated||O.isAuthenticated&&l.agentPermissions.allowLoginUpdates&&!r.onCallOrPendingDisp())){O.loading=!0;var a=!0;if(o.setTakeCalls(O.takeCalls),""===O.assignments.dialGroup&&(O.assignments.dialGroup=null),""===O.assignments.skillProfile&&(O.assignments.skillProfile=null),O.loginType===j.INTEGRATED)o.setLoginType(j.INTEGRATED),O.assignments.dialDest=j.INTEGRATED;else if(O.loginType===j.EXTENSION)o.setLoginType(j.EXTENSION),O.assignments.dialDest=w.defaultLoginDest.replace(/@/,O.assignments.agentExt+"@");else if(O.loginType===j.RC_PHONE)o.setLoginType(j.RC_PHONE),O.assignments.dialDest=j.RC_PHONE;else{var b=O.assignments.dialDest.replace(/-/g,""),c=!1;!isNaN(b)&&angular.isNumber(+b)&&(c=!0),c?O.assignments.dialDest=b:O.assignments.dialDest.length>5&&"sips:"==O.assignments.dialDest.substring(0,5)||O.assignments.dialDest.length>4&&"sip:"==O.assignments.dialDest.substring(0,4)||(O.assignments.dialDest="sip:"+O.assignments.dialDest),o.setLoginType(j.EXTERNAL)}if(o.setAllowAgentStats(l.agentPermissions.allowAgentStats),o.setAllowCampaignStats(l.agentPermissions.allowCampaignStats),o.setAllowQueueStats(l.agentPermissions.allowGateStats),o.setAllowChatStats(l.agentPermissions.allowChatStats),O.assignments.queues&&O.assignments.queues.length>0&&O.assignments.dialGroup&&(l.agentPermissions.allowBlended||(a=!1,growl.error("LOGIN.BLENDED_ERR_MSG"))),w.isOutboundPrepay&&l.isOffhook){var e,f=q.outboundSettings.outdialGroup.billingKey,g=K(O.assignments.dialGroup);g&&(e=g.billingKey),f!==e&&(a=!1,h.confirm(null,"LOGIN.CONFIRM_DG_TITLE","LOGIN.CONFIRM_DG_CHANGE_MSG","GENERICS.ACTIONS.OK","GENERICS.ACTIONS.CANCEL").then(function(){d.pendingOffhookTerm=!0,l.offhookTerm()},function(){}))}s.initialize().then(function(){s.getCallHistoryRecordsByAgent(l.agentSettings.agentId,!1).then(function(a){if(a){var b;t.callHistory=a.map(function(a){try{b=JSON.parse(a.record)}catch(a){b=null,console.error("error parsing callHistory Record")}return b})}})}),a?M():O.loading=!1}}function K(a){return _.find(z,function(b){return b.dialGroupId===a})}function L(a){return _.filter(a,function(a){return a.selected})}function M(){m.configure(O.assignments.queues,O.assignments.chatQueues,O.assignments.skillProfile,O.assignments.dialGroup,O.assignments.dialDest,Q).then(function(a){if(o.setPreviousState(""),O.loading=!1,Q=!1,"EXISTING_LOGIN_FOUND"===a.status||"EXISTING_LOGIN_ENGAGED"===a.status)h.custom(null,"configure/multipleLoginModal.tpl.html","multipleLoginModalCtrl",{type:function(){return a.status}}).then(function(a){a&&(O.loading=!0,Q=!0,M())});else if(angular.isDefined(a.agentSettings)&&"NO-SELECTION"===a.agentSettings.loginType)S=growl.error("LOGIN.NO_SELECTION_MSG");else{S&&S.destroy(),P&&growl.info("LOGIN.UPDATE_MSG",1e4),"CHAT"===a.agentSettings.loginType&&O.assignments.chatQueues.length>0?b.go("base.default.chat"):(("INBOUND"===a.agentSettings.loginType||"OUTBOUND"===a.agentSettings.loginType||"BLENDED"===a.agentSettings.loginType)&&O.assignments.queues.length>0||O.assignments.dialGroup)&&b.go("base.default.phone"),N(),o.getLibraryInstance().getRefreshedToken();R=g(function(){o.getLibraryInstance().getRefreshedToken()},3e5)}},function(a){O.loading=!1;var b=a.detail||a.message;S=p.showConfigInvalid(b)})}function N(){null!==R&&(g.cancel(R),R=null)}var O=this;O.assignments=o.getAssignments(),O.isSsoLogin=n.applicationSettings.isSso,O.loginType=O.isSsoLogin?j.EXTERNAL:o.getLoginType(),O.takeCalls=o.getTakeCalls(),O.largeImg=v.getLargeImgUrl(),O.agentService=l,O.agentPermissions=l.agentPermissions,O.isAuthenticated=o.isAuthenticated(),O.availQueues=B,O.availSkillProfiles=x,O.availCampaigns=y,O.availDialGroups=z,O.availChatQueues=A,O.showQueueEllipsis=!1,O.showChatQueueEllipsis=!1,O.allQueuesSelected=!1,O.allChatQueuesSelected=!1,O.numQueuesHidden=0,O.numChatQueuesHidden=0,O.loginTypes=[{value:j.INTEGRATED,label:"CONFIG_LOGIN.INTEGRATED_SOFTPHONE"},{value:j.EXTERNAL,label:"CONFIG_LOGIN.EXTERNAL_SOFTPHONE"},{value:j.EXTENSION,label:"CONFIG_LOGIN.AGENT_EXTENSION"}];var P=!1,Q=!1,R=null;O.configure=J,O.cancel=D,O.openQueueSelect=E,a.$on(i.DIAL_GROUP_CHANGE_PENDING,function(a,c){C.name&&""!==C.name&&"base.login"!==C.name&&b.go(C.name)}),a.$on(k.OFFHOOK_CHANGED,function(a,b){!1===b&&d.pendingOffhookTerm&&(d.pendingOffhookTerm=!1,M())}),function(){P=angular.copy(O.isAuthenticated),O.isSsoLogin?(O.loginTypes.push({value:j.RC_PHONE,label:"CONFIG_LOGIN.RC_PHONE"}),O.loginTypes=_.filter(O.loginTypes,function(a){return a.value!==j.EXTENSION})):O.loginType===j.RC_PHONE&&(O.loginType=j.EXTERNAL),"base.login"!==C.name&&"base.config.queues"!==C.name&&o.setPreviousState(C.name),f(function(){F(),G(),H(),I()},100),O.allowNoSkills=!0,_.some(O.availSkillProfiles,function(a){if(1===parseInt(a.isDefault,10))return angular.isDefined(O.assignments.skillProfile)||(O.assignments.skillProfile=a.profileId),O.allowNoSkills=!1,!0});var a=e.instant("GENERICS.ACTIONS.NONE");if(O.allowNoSkills&&x.length>0&&x[0].profileName!==a&&x.unshift({profileName:a,profileId:""}),P||O.assignments.queues||O.assignments.dialGroup||O.assignments.chatQueues||O.assignments.dialDest){if(l.agentPermissions.allowInbound){_.each(O.availQueues,function(a){a.selected=O.assignments.queues&&O.assignments.queues.indexOf(a.gateId)>-1});var b=L(O.availQueues);O.availQueues.length>0&&(O.allQueuesSelected=b.length===O.availQueues.length)}if(l.agentPermissions.allowChat){_.each(O.availChatQueues,function(a){a.selected=O.assignments.chatQueues&&O.assignments.chatQueues.indexOf(a.chatQueueId)>-1});var d=L(O.availChatQueues);O.availChatQueues.length>0&&(O.allChatQueuesSelected=d.length===O.availChatQueues.length)}}else{if(O.loginDest=[],w.defaultLoginDest&&""!==w.defaultLoginDest&&O.loginDest.push({destination:w.defaultLoginDest}),w.altDefaultLoginDest&&""!==w.altDefaultLoginDest&&O.loginDest.push({destination:w.altDefaultLoginDest}),O.loginDest&&O.loginDest.length>0&&(O.assignments.dialDest=O.loginDest[0].destination),c.agentDest&&""!==c.agentDest&&(O.assignments.dialDest=c.agentDest,O.loginType=j.EXTERNAL),l.agentPermissions.allowOutbound&&q.outboundSettings.defaultDialGroup&&0!==q.outboundSettings.defaultDialGroup){var g=_.find(z,function(a){return a.dialGroupId===q.outboundSettings.defaultDialGroup});g&&(O.assignments.dialGroup=g.dialGroupId)}l.agentPermissions.allowInbound&&(O.assignments.queues=[],_.each(O.availQueues,function(a){O.assignments.queues.push(a.gateId),a.selected=!0}),O.availQueues.length>0&&(O.allQueuesSelected=!0)),l.agentPermissions.allowChat&&(O.assignments.chatQueues=[],_.each(O.availChatQueues,function(a){O.assignments.chatQueues.push(a.chatQueueId),a.selected=!0}),O.availChatQueues.length>0&&(O.allChatQueuesSelected=!0))}-1==navigator.userAgent.indexOf("MSIE")&&-1==navigator.userAgent.indexOf("Trident")||O.loginTypes.splice(0,1)}();var S}a.$inject=["stateHelperProvider"],b.$inject=["$rootScope","$state","$stateParams","$scope","$translate","$timeout","$interval","Dialog","growl","OUTBOUND_EVENTS","LOGIN_TYPE","AGENT_EVENTS","AgentSvc","AuthService","ApplicationSvc","SessionSvc","LoginSvc","OutboundSvc","CallSvc","IndexDbSvc","CallHistorySvc","SoftphoneSvc","BrandingSvc","agentSettings","availSkillProfiles","availCampaigns","availDialGroups","availChatQueues","availQueues","fromState"],angular.module("agent_ui.configure",["ui.router","ui.router.stateHelper"]).config(a).controller("ConfigCtrl",b)}(),function(){"use strict";function a(a){a.setNestedState({name:"queues",parent:"base.config",url:"queues/:type",views:{"base@":{templateUrl:"layout/views/fullWindow.tpl.html",controller:"ConfigQueuesCtrl as vm"},"header@base.config.queues":{templateUrl:"layout/components/fullWindow.header.default.tpl.html"},"body@base.config.queues":{templateUrl:"configure/configureQueues.tpl.html"},"footer@base.config.queues":{templateUrl:"layout/components/fullWindow.footer.default.tpl.html"}},resolve:{assignedQueues:["$stateParams","SessionSvc",function(a,b){return"INBOUND"===a.type?b.getAssignments().queues:b.getAssignments().chatQueues}],availQueues:["$stateParams","AcdSvc","AgentSvc",function(a,b,c){if("INBOUND"===a.type){var d=angular.copy(b.getAvailableQueues());return _.chain(d).groupBy("gateGroupId").map(function(a){var b=_.map(a,function(a){return{name:a.gateName,id:a.gateId,desc:a.gateDesc}});return{group:{groupName:a[0].groupName,groupId:a[0].gateGroupId},queues:b}}).value()}var e=angular.copy(c.getAvailableChatQueues());return _.chain(e).groupBy("chatGroupId").map(function(a){var b=_.map(a,function(a){return{name:a.chatQueueName,id:a.chatQueueId,desc:a.chatQueueDesc}});return{group:{groupName:a[0].groupName,groupId:a[0].chatGroupId},queues:b}}).value()}]}})}function b(a,b,c,d,e,f,g,h,i,j){
function k(a){a.checked=!a.checked,a.indeterminate=!1;var b=d("filter")(a.queues,p.searchFilter);_.each(b,function(b){a.checked&&!b.selected?a.numberSelected=a.numberSelected+1:!a.checked&&b.selected&&(a.numberSelected=a.numberSelected-1),b.selected=a.checked})}function l(a,b){b.selected=!b.selected,b.selected?a.numberSelected=a.numberSelected+1:a.numberSelected=a.numberSelected-1,o()}function m(){p.isAuthenticated?a.go("base.default.updatelogin"):a.go("base.config")}function n(){var b=[];_.each(p.availQueues,function(a){var c=_.filter(a.queues,function(a){return a.selected});_.each(c,function(a){b.push(a)})});var c=f.getAssignments(),d=_.map(b,function(a){return a.id});"INBOUND"===e.type?c.queues=angular.copy(d):c.chatQueues=angular.copy(d),f.setAssignments(c),p.isAuthenticated?a.go("base.default.updatelogin"):a.go("base.config")}function o(){_.each(p.availQueues,function(a){var b=d("filter")(a.queues,p.searchFilter),c=_.filter(b,function(a){return a.selected});a.show=!0,0===b.length&&(a.show=!1),c.length===b.length?(a.indeterminate=!1,a.checked=!0):c.length>0?(a.indeterminate=!0,a.checked=!1):(a.indeterminate=!1,a.checked=!1)})}var p=this;p.showFooter=!0,p.showBackBtn=!0,p.submitButtonText=c.instant("CONFIG_LOGIN.SUBMIT_TEXT"),p.cancelButtonText=c.instant("GENERICS.ACTIONS.CANCEL"),p.contextText="INBOUND"===e.type?c.instant("CONFIG_LOGIN.INBOUND"):c.instant("CONFIG_LOGIN.CHAT_CONTEXT"),p.selectedView=j.CHIPS,p.filteredQueues=[],p.isAuthenticated=f.isAuthenticated(),p.availQueues=h,p.assignedQueues=i,p.cancel=m,p.submit=n,p.toggleGroup=k,p.toggleQueue=l,b.$watch("vm.searchFilter",function(){o()}),function(){_.each(p.availQueues,function(a){a.numberSelected=0,_.each(a.queues,function(b){i.indexOf(b.id)>-1&&(b.selected=!0,a.indeterminate=!0,a.numberSelected=a.numberSelected+1)}),a.numberSelected===a.queues.length&&(a.checked=!0,a.indeterminate=!1)})}()}a.$inject=["stateHelperProvider"],b.$inject=["$state","$scope","$translate","$filter","$stateParams","SessionSvc","AcdSvc","availQueues","assignedQueues","VIEW_TYPES"],angular.module("agent_ui.configure.queues",["ui.router","ui.router.stateHelper"]).config(a).controller("ConfigQueuesCtrl",b).constant("VIEW_TYPES",{CHIPS:"chips",LIST:"list"})}(),function(){"use strict";function a(a,b,c,d){function e(){b.cancel()}function f(){c.go("base.login"),b.cancel()}function g(){a.allowLogin&&b.hide(!0)}a.allowLogin="EXISTING_LOGIN_FOUND"===d.type,a.close=e,a.loginAgain=g,a.backToLogin=f}a.$inject=["$scope","$mdDialog","$state","resolvedData"],angular.module("agent_ui.configure.multipleLogin",[]).controller("multipleLoginModalCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"updatelogin",url:"/updatelogin",parent:"base.default",views:{"body@base.default":{controller:"ConfigCtrl as vm",templateUrl:"configure/configure.tpl.html"}},resolve:{availQueues:["AcdSvc",function(a){return a.getAvailableQueues()}],availSkillProfiles:["AcdSvc",function(a){return a.getAvailableSkillProfiles()}],availCampaigns:["OutboundSvc",function(a){return a.getAvailableCampaigns()}],availDialGroups:["OutboundSvc",function(a){return a.getAvailableDialGroups(!0)}],availChatQueues:["AgentSvc",function(a){return a.getAvailableChatQueues()}],agentSettings:["AgentSvc",function(a){return a.agentSettings}],fromState:["$state",function(a){return a.fromState}]},data:{pageTitle:"Update Login"}})}a.$inject=["stateHelperProvider"],angular.module("agent_ui.updatelogin",["ui.router","ui.router.stateHelper"]).config(a)}(),function(){"use strict";function a(a){a.setNestedState({name:"base.default",url:"home",abstract:!0,views:{"":{templateUrl:"default/default.tpl.html",controller:"DefaultCtrl as vm"},"statusbar@base.default":{templateUrl:"statusbar/statusbar.tpl.html",controller:"StatusBarCtrl as vm"},"nav@base.default":{templateUrl:"nav/nav.tpl.html",controller:"NavCtrl as vm"},"scoreboard@base.default":{templateUrl:"scoreboard/scoreboard.tpl.html",controller:"ScoreboardCtrl as vm"},"toolbar@base.default":{template:"<toolbar></toolbar>"}},resolve:{initChats:["$q","CfChatSvc",function(a,b){return b.createRooms()}],offhookAccess:["$rootScope","SOFTPHONE_EVENTS","AgentSvc","SessionSvc","LOGIN_TYPE",function(a,b,c,d,e){var f={audio:!1};if(d.getLoginType()===e.INTEGRATED)return f.audio=!0,navigator.mediaDevices.getUserMedia(f).then(function(a){return!0},function(d){return c.microphoneAccess=!1,a.$emit(b.CALL_AUDIO_STREAM_REJECTED),!1})}]}})}function b(a,b,c){a.sessionService=b,a.agentService=c}a.$inject=["stateHelperProvider"],b.$inject=["$scope","SessionSvc","AgentSvc"],angular.module("agent_ui.default",["ui.router","ui.router.stateHelper"]).config(a).controller("DefaultCtrl",b)}(),function(){"use strict";function a(a){a.setNestedState({name:"base.login",url:"login?agentDest",public:!0,views:{"base@":{controller:"LoginCtrl as vm",templateUrl:"login/login.tpl.html"}},data:{pageTitle:"Login"}})}function b(a,b,growl,c,d,e){var f;d.login().then(function(b){a.go("base.config",{agentDest:c.agentDest}),f&&f.destroy()},function(a){if(a.message){var c=a.message+" "+a.detail;b.location.href=EngageAuth.Navigation.getLoginUrl({errorMessage:c})}else{var d=$translate.instant("LOGIN.ERROR_INVALID");b.location.href=EngageAuth.Navigation.getLoginUrl({errorMessage:d})}})}a.$inject=["stateHelperProvider"],b.$inject=["$state","$window","growl","$stateParams","AuthService","LoginSvc"],angular.module("agent_ui.login",["ui.router","ui.router.stateHelper"]).config(a).controller("LoginCtrl",b)}(),function(){"use strict";function a(a,b,growl,c,d){function e(){a.loading=!0;var c=a.emailObj;d.buildDebugEmail(null,c.dialDest,c.agentName,c.emailFrom,c.emailSubject,c.emailDetail).then(function(c){growl.info("TOOLS.LOG.LOG_SUBMIT_MSG"),a.loading=!1,b.hide()},function(){a.loading=!1})}function f(){b.cancel()}a.send=e,a.cancel=f,function(){var b=angular.copy(c.agentSettings);a.emailObj={dialDest:b.dialDest,agentName:b.firstName+" "+b.lastName,emailFrom:b.email,emailSubject:"",emailDetail:""}}()}a.$inject=["$scope","$mdDialog","growl","AgentSvc","SystemSvc"],angular.module("agent_ui.logs.email",[]).controller("LogEmailCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"logs",parent:"base.default.phone",url:"/logs",redirectTo:"base.default.logs.search",views:{"body@base.default":{templateUrl:"layout/views/fullWidth.tpl.html"},"nav@base.default.phone.logs":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},children:[{name:"search",url:"/search",templateUrl:"logs/logs.search.tpl.html",controller:"LogsSearchCtrl as vm"}]})}a.$inject=["stateHelperProvider"],angular.module("agent_ui.logs",["ui.router","ui.router.stateHelper"]).config(a)}(),function(){"use strict";function a(a,b,c){function d(){g.loading=!0,a.getSystemLog(g.logLevel,g.startDate,g.endDate,g.rows).then(function(a){g.loading=!1,g.logResults=a})}function e(a){b.custom(a.target,"logs/logs.email.tpl.html","LogEmailCtrl",{defaultSearch:function(){return h}})}function f(){jQuery(".lead-search-wrapper").parents(".scroll-wrapper").animate({scrollTop:0},250)}var g=this;g.submit=d,g.email=e,g.scrollToTop=f,g.logLevels=a.getLogSearchLevels(),g.dateFormat=c.DATE_TIME,g.logResults=[];var h=a.getDefaultLogSearch();!function(){g.startDate=h.start,g.endDate=h.end,g.rows=h.rows,g.logLevel=h.level}()}a.$inject=["SystemSvc","Dialog","DATE_FORMATS"],angular.module("agent_ui.logs.search",[]).controller("LogsSearchCtrl",a)}(),function(){"use strict";function a(a,b,c){function d(){b.hide()}a.inboundCount=c.counts.inboundCallTotal,a.outboundCount=c.counts.outboundCallTotal,a.close=d}a.$inject=["$scope","$mdDialog","resolvedData"],angular.module("agent_ui.monitoring.agents.callTotals",[]).controller("AgentCallTotalsCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(b){n.monitorEnabled&&(f.selectedAgent=b,h.currentUrl="base.default.monitoring.agent",a.go(h.currentUrl,{agentId:b.agentId}))}function l(){c.custom(null,"factories/dialogs/shared/tableColumns.dialog.tpl.html","TableColumnsConfigCtrl as vm",{columns:function(){return n.tableDefs}}).then(function(a){n.tableDefs=a,d.saveAgentDetails(a)})}function m(a,b){a.stopPropagation(),n.callTotalsLoading=!0,i.getAgentCallTotals(b).then(function(b){n.callTotalsLoading=!1,c.custom(a.target,"monitoring/agents/agentCallTotals.tpl.html","AgentCallTotalsCtrl",{counts:function(){return b}})})}var n=this;n.statsService=i,n.agentService=g,n.agentEvent=j.AGENT,n.selectedAgentView=0,n.monitorService=f,n.callTotalsLoaded=!1,n.allowAgentStats=e.getAllowAgentStats(),n.monitorEnabled=!g.agentPermissions.disableSupervisorMonitoring,n.latestData=[],n.selectAgent=k,n.showTableConfig=l,n.openCallTotals=m,function(){n.tableDefs=[{field:"lastName",displayName:b.instant("DASHBOARD.AGENTS.GRID.AGENT")},{field:"skillProfileName",displayName:b.instant("DASHBOARD.AGENTS.GRID.SKILL")},{field:"agentState",displayName:b.instant("DASHBOARD.AGENTS.GRID.STATE")},{field:"stateDuration",displayName:b.instant("DASHBOARD.AGENTS.GRID.STATE.DURATION")},{field:"pendingDispTime",displayName:b.instant("DASHBOARD.AGENTS.GRID.PENDING_DISP_TIME")},{field:"loginDuration",displayName:b.instant("DASHBOARD.AGENTS.GRID.LOGIN")},{field:"calls",displayName:b.instant("DASHBOARD.AGENTS.GRID.CALLS")},{field:"totalTalkTime",displayName:b.instant("DASHBOARD.AGENTS.GRID.TALK_TIME")},{field:"avgTalkTime",displayName:b.instant("DASHBOARD.AGENTS.GRID.TALK_TIME.AVERAGE")},{field:"utilization",displayName:b.instant("DASHBOARD.AGENTS.GRID.UTILIZATION")}];var a=d.getSavedAgentDashboardByType("agentTable");(a=a&&a.hiddenColumns)&&_.each(a,function(a){var b=_.find(n.tableDefs,function(b){return b.field===a});b&&(b.visible=!1)})}()}a.$inject=["$state","$translate","Dialog","DashboardSvc","SessionSvc","MonitorSvc","AgentSvc","CallSvc","StatsSvc","STATS_EVENTS"],angular.module("agent_ui.monitoring.agents",[]).controller("MonitoringAgentCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){f.openAgentDirectChat(g.selectedAgent)}function k(){var a=h.getAssignments().chatQueues.length>0,b=g.isAgentBeingChatMonitored(g.selectedAgent.agentId);a&&!b&&g.chatMonitor(g.selectedAgent.agentId)}function l(){g.stopMonitoringChatsByAgent(g.selectedAgent.agentId)}function m(){d.confirm(null,null,"AGENT_MONITOR.ACTIONS.LOGOUT.CONFIRM","GENERICS.ACTIONS.YES","GENERICS.ACTIONS.NO").then(function(){e.logoutAgent(g.selectedAgent.agentId)})}function n(){var a=g.selectedAgent.online,b=g.call&&g.call.agent&&g.call.agent.agentId===g.selectedAgent.agentId;return a||b}var o=this;o.monitorService=g,o.chatList=[],o.monitorEnabled=!e.agentPermissions.disableSupervisorMonitor,o.agentService=e,o.chatAgent=j,o.chatMonitor=k,o.stopChatMonitor=l,o.logoutAgent=m,o.showPhoneSection=n,function(){var d=a.$on(i.AGENT,function(a,b){var d=_.find(b,function(a){return a.agentId===c.agentId});d?(g.selectedAgent=d,g.selectedAgent.online=!0):g.selectedAgent.online=!1});k(),g.stopChatTimer(g.selectedAgent.agentId),b.$on("$destroy",function(){d(),g.startChatTimer(g.selectedAgent.agentId)})}(),b.$watch(function(){return g.selectedAgent.online},function(a,b){angular.isDefined(a)&&a&&!b&&k()})}a.$inject=["$rootScope","$scope","$stateParams","Dialog","AgentSvc","ToolbarSvc","MonitorSvc","SessionSvc","STATS_EVENTS"],angular.module("agent_ui.monitoring.agents.detail",[]).controller("MonitoringAgentDetailCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"monitoring",parent:"base.default",url:"/supervisor",redirectTo:"base.default.monitoring.agents",views:{"body@base.default":{templateUrl:"layout/views/fullWidth.tpl.html",controller:"MonitoringCtrl"},"nav@base.default.monitoring":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},children:[{name:"agents",url:"/agents",templateUrl:"monitoring/agents/agents.tpl.html",controller:"MonitoringAgentCtrl as vm"},{name:"agent",url:"/agent/:agentId",templateUrl:"monitoring/detail/detail.tpl.html",controller:"MonitoringAgentDetailCtrl as vm"}]})}function b(a){a.layoutClasses="monitor-layout"}a.$inject=["stateHelperProvider"],b.$inject=["$scope"],angular.module("agent_ui.monitoring",["ui.router","ui.router.stateHelper"]).config(a).controller("MonitoringCtrl",b)}(),function(){"use strict";function a(a,b,c,growl,d,e,f,g,h,i,j,k,l){function m(a){return c.includes("base.default."+a)?"active":""}function n(){s.showBreakTimer=!0,s.breakTimeExpired=!1,b.$broadcast("timer-set-countdown",s.breakWaitTime),b.$broadcast("timer-start")}function o(){growl.error("AGENT_STATE.BREAK_OVER_MSG"),s.breakTimeExpired=!0,f.agentColor="#F44336"}function p(a,c){if(f.currentAgentState){s.showBreakTimer=!1,s.breakTimeExpired=!1,"OK"===c.status&&c.baseState!==c.prevBaseState&&b.$broadcast("timer-start");var d="ON-BREAK"===f.currentAgentState.baseState||"AWAY"===f.currentAgentState.baseState,e="LUNCH"===f.currentAgentState.baseState,g=f.agentSettings;d&&g.maxBreakTime>0?(s.breakWaitTime=60*g.maxBreakTime,n()):e&&g.maxLunchTime>0&&(s.breakWaitTime=60*g.maxLunchTime,n())}}function q(a){return"chatControl"!==a||f.isSupervisor()}function r(){!1===s.callService.isChatView?(s.agentService.openMenuState=!s.agentService.openMenuState,a.$broadcast("leftMenuExpanded")):a.$broadcast("chatLeftMenuExpanded")}var s=this;s.callService=e,s.outboundService=i,s.acdService=h,s.toolbarService=j,s.chatService=g,s.agentService=f,s.availableStates=f.getAvailableAgentStates(),s.smallImg=k.getSmallImgUrl(),s.isSupervisor=f.isSupervisor(),s.breakOver=o,s.isActive=m,s.initials="",s.checkSupervisor=q,s.hamburgerMenuToggle=r,function(){b.$on("$destroy",function(){c()}),b.$on("timer-tick",function(a,b){f.timeInState=b.millis});var c=a.$on(l.STATE_CHANGED,p),e=b.$watch(function(){return d.getAllowAgentStats()},function(){s.allowAgentStats=!0,e()}),g=f.agentSettings.firstName,h=f.agentSettings.lastName;""!==g&&""!==h?s.initials=g.slice(0,1)+h.slice(0,1):""!==g&&""===h&&(s.initials=g.slice(0,1))}()}a.$inject=["$rootScope","$scope","$state","growl","SessionSvc","CallSvc","AgentSvc","ChatSvc","AcdSvc","OutboundSvc","ToolbarSvc","BrandingSvc","AGENT_EVENTS"],angular.module("agent_ui.nav",[]).controller("NavCtrl",a)}(),angular.module("PackageConfig",[]).constant("ENV_VARS",{version:"2020-02-27T03:09:26.624-05:00",apiHost:"/",apiPath:"voice/api/v1/agent/",assetsUrl:"/voice/agent/",isSecureSocket:!0,bamboo_repository_revision_number:"33f63eea10d3ca5a78cb1747ac0457fa401f045f",bamboo_buildResultKey:"AGJS-BT472-JOB1-3"}),function(){"use strict";function a(a){a.setNestedState({name:"callHistory",parent:"base.default.phone",url:"/callHistory",views:{"left@base.default.phone":{templateUrl:"phone/callHistory/callHistory.tpl.html",controller:"CallHistoryCtrl as vm"}},resolve:{calls:["CallHistorySvc",function(a){return a.callHistory}]},children:[{name:"detail",url:"/detail/:callId",views:{"middle@base.default.phone":{templateUrl:"phone/phone.detail.tpl.html",controller:"PhoneDetailCtrl as vm"}},resolve:{lead:["$stateParams","CallHistorySvc",function(a,b){var c=_.find(b.callHistory,{time:a.callId});if(null===c.lead&&c.callPacket)try{c.lead={},c.callPacket&&c.callPacket.baggage&&(c.lead={firstName:c.callPacket.baggage.firstName||"",midName:c.callPacket.baggage.midName||"",lastName:c.callPacket.baggage.lastName||""}),c.callPacket&&c.callPacket.queue&&(c.lead.sourceName=c.callPacket.queue.name)}catch(a){}return c.lead}],callInfo:["$stateParams","CallHistorySvc",function(a,b){return _.find(b.callHistory,{time:a.callId}).callPacket}]}}]})}function b(a,b,c,d,e){function f(a){g(a);var c=a.time;b.go("base.default.phone.callHistory.detail",{callId:c})}function g(a){_.each(k.callHistory,function(b){b.time!==a.time?b.selected=!1:b.selected=!0})}function h(){k.loading=!0,c.getMoreCallHistory(e.agentSettings.agentId).then(function(a){k.callHistory=a,k.limit=d.callLimit,k.loading=!1,k.isListExist=j()})}function i(){return d.callLimit>=d.indexDbConstant.MAX_LIMIT}function j(){var a=l%d.indexDbConstant.INITIAL_LIMIT,b=l-a;return 0===b||d.callLimit===b}var k=this,l=0;k.callHistory=a,k.limit=d.callLimit,k.goToCall=f,d.getIndexDbLength(e.agentSettings.agentId).then(function(a){l=a,k.isListExist=0===l}),k.loading=!1,k.loadMoreCallHistory=h,k.maxCallHistory=i,k.isCallHistoryListExist=j,function(){var a;_.some(k.callHistory,function(b){if(b.selected)return a=b,!0}),a&&b.go("base.default.phone.callHistory.detail",{callId:a.time})}()}a.$inject=["stateHelperProvider"],b.$inject=["calls","$state","CallHistorySvc","IndexDbSvc","AgentSvc"],angular.module("agent_ui.phone.callHistory",[]).config(a).controller("CallHistoryCtrl",b)}(),function(){"use strict";function a(a){a.setNestedState({name:"leads",parent:"base.default.phone",url:"/leads",views:{"body@base.default":{templateUrl:"layout/views/fullWidth.tpl.html"},"nav@base.default.phone.leads":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},redirectTo:"base.default.phone.leads.leadManagement",children:[{name:"leadManagement",url:"/leadManagement/:type",templateUrl:"phone/leads/leadManagement.tpl.html",controller:"LeadManagementCtrl as vm"}]})}function b(a,b,c){function d(){var a="OUTBOUND"===e.currentAgent.loginType||"BLENDED"===e.currentAgent.loginType,b="PREVIEW"===e.currentDialGroup.dialMode||"TCPA-SAFE-MODE"===e.currentDialGroup.dialMode;return!(a&&b)}var e=this;e.currentDialGroup=c.getDialGroup(),e.currentAgent=b.agentSettings,e.agentPermissions=b.agentPermissions,e.callDiabled=d,function(){(angular.isUndefined(a.type)||""===a.type)&&(b.agentPermissions.allowLeadSearch?a.type="SEARCH":b.agentPermissions.allowLeadInserts&&(a.type="INSERT")),b.agentPermissions.allowLeadSearch&&"SEARCH"===a.type?e.selectedIndex=0:b.agentPermissions.allowLeadInserts&&"INSERT"===a.type&&(e.selectedIndex=1),e.action=a.type}()}a.$inject=["stateHelperProvider"],b.$inject=["$stateParams","AgentSvc","OutboundSvc"],angular.module("agent_ui.phone.leads",["ui.router","ui.router.stateHelper"]).config(a).controller("LeadManagementCtrl",b)}(),function(){"use strict";function a(a,b,c,d,e){function f(){d.voicemailDirectAgentTransfer(c.xferDest),h()}function g(){e.custom(null,"phone/modals/transferModal.tpl.html","TransferCtrl",{tabSelected:function(){return 3}})}function h(){b.cancel()}a.sendToVoicemail=f,a.tryAnotherAgent=g,a.cancel=h,a.msg=c.message}a.$inject=["$scope","$mdDialog","resolvedData","CallSvc","Dialog"],angular.module("agent_ui.modal.directTransferFailed",[]).controller("DirectTransferFailedCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){e.rejectDirectAgentXfer(d.pendingUii),c.cancel()}function i(){f.setAgentState("WORKING");var a=b.$on(g.STATE_CHANGED,function(){a(),c.hide()})}a.ignore=h,a.accept=i}a.$inject=["$scope","$rootScope","$mdDialog","resolvedData","CallSvc","AgentSvc","AGENT_EVENTS"],angular.module("agent_ui.modal.directTransferPresented",[]).controller("DirectTransferPresentedCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){b.hide(a.emailTemplate)}function g(){b.cancel()}function h(a){var b=new RegExp("{{\\s*(model.model.\\w*)\\s*}}","g");return a.replace(b,"{{$1.value}}")}function i(){var b=d.agentSettings;a.model={model:{}},a.model.call={ani:e.leadData.destination,dnis:e.leadData.dnis,uii:"",agentFirstName:b.firstName,agentLastName:b.lastName,agentExternalId:b.externalAgentId,agentType:b.agentType,agentEmail:b.email,baggage:{}},a.model.lead={leadId:e.leadData.leadId,externId:e.leadData.externId,firstName:e.leadData.firstName,midName:e.leadData.midName,lastName:e.leadData.lastName,suffix:e.leadData.suffix,title:e.leadData.title,address1:e.leadData.address1,address2:e.leadData.address2,city:e.leadData.city,state:e.leadData.state,zip:e.leadData.zip,email:e.leadData.email,gateKeeper:e.leadData.gateKeeper,auxData1:e.leadData.auxData1,auxData2:e.leadData.auxData2,auxData3:e.leadData.auxData3,auxData4:e.leadData.auxData4,auxData5:e.leadData.auxData5,auxPhone:e.leadData.auxPhone}}a.emailTemplate=e.emailTemplate,a.confirmCancel=g,a.save=f,function(){"MANUAL"===e.type&&i();var b=["emailBcc","emailCc","emailFrom","emailRte","emailSubject","emailTo"];_.each(Object.keys(a.emailTemplate),function(d){b.indexOf(d)>-1&&a.emailTemplate[d]&&(a.emailTemplate[d]=a.emailTemplate[d].replace(/&nbsp;/g,""),a.emailTemplate[d]=h(a.emailTemplate[d]),"MANUAL"!==e.type&&Object.keys(e.scriptResult).length>0?a.model=e.scriptResult:"MANUAL"!==e.type&&(a.model=e.scriptData),a.emailTemplate[d]=c(a.emailTemplate[d])(a))})}()}a.$inject=["$scope","$mdDialog","$interpolate","AgentSvc","resolvedData"],angular.module("agent_ui.modal.emailTemplate",[]).controller("EmailTemplateCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){if(f.isBargeInMonitor){var d="1"===b.data.hangup,e=b.data.hangup===c.currentCall.sessionId;(d||e)&&i()}c.hangup(b.data.hangup),a.hide()}function h(){a.cancel()}function i(){d.offhookTerm(),e.clearMonitor(),c.reset(),c.currentCall.isMonitoring=!0}b.data={},b.callService=c,b.transferSessions=function(a){var b=Object.keys(a);return b.length>0&&b.forEach(function(b){var c=a[b],d=c.destination+"";-1!=d.indexOf("@RC_EXT")&&(c.isCorpExtension=!0,c.extension="Extension "+d.substring(d.indexOf("*")+1,d.indexOf("@")))}),a}(f.transferSessions),b.allowEndForAll=c.currentCall.allowEndCallForEveryone,b.hangup=g,b.cancel=h}a.$inject=["$mdDialog","$scope","CallSvc","AgentSvc","MonitorSvc","resolvedData"],angular.module("agent_ui.modal.hangup",[]).controller("HangupCtrl",a)}(),function(){"use strict";function a(a,b){function c(){a.hide()}function d(){a.cancel()}b.closeError=d,b.closeSuccess=c}a.$inject=["$mdDialog","$scope"],angular.module("agent_ui.phone.modal.hangupOffhook",[]).controller("HangupOffhookCtrl",a)}(),function(){"use strict";function a(a,b,c){function d(){b.cancel()}function e(){c.hold(a.currentCall.onHold),_.each(a.transferSessions,function(a){c.holdSession(a.onHold,a.sessionId)}),b.hide()}function f(a){var b=Object.keys(a);return b.length>0&&b.forEach(function(b){var c=a[b],d=c.destination+"";-1!=d.indexOf("@RC_EXT")&&(c.isCorpExtension=!0,c.extension="Extension "+d.substring(d.indexOf("*")+1,d.indexOf("@")))}),a}a.currentCall=angular.copy(c.currentCall),a.transferSessions=angular.copy(c.getTransferSessions()),a.cancel=d,a.ok=e,a.updateSessions=f}a.$inject=["$scope","$mdDialog","CallSvc"],angular.module("agent_ui.modal.hold",[]).controller("HoldModalCtrl",a)}(),function(){"use strict";function a(a,b,c,d){function e(){b.cancel()}function f(){d.setSuppressFirstStateChange(!0),c.setAgentState("AVAILABLE"),b.hide(!0)}a.close=e,a.goAvailable=f}a.$inject=["$scope","$mdDialog","AgentSvc","SessionSvc"],angular.module("agent_ui.phone.modal.needToBeAvailable",[]).controller("NeedToBeAvailableCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){"ADVANCED"===c.currentCall.requeueType?a.props.queueId=a.props.queue.gateId:(a.props.queueId=a.props.shortcut.gateId,a.props.skillId=a.props.shortcut.skillId),b.hide(a.props)}function g(){b.cancel()}function h(){delete a.props.skillId}a.callSvc=c,a.agentSvc=e,a.allowCrossQueueRequeue=e.agentPermissions.allowCrossQueueRequeue,a.requeueQueues=[],a.props={queue:{},shortcut:{}},a.cancel=g,a.requeue=f,a.clearSkill=h,function(){"ADVANCED"===c.currentCall.requeueType?(_.each(d.getAvailableRequeues(),function(b){_.each(b.gates,function(a){a.groupName=b.groupName,a.groupSkills=b.skills}),a.requeueQueues.push(_.sortBy(b.gates,"gateName"))}),a.requeueQueues=_.flatten(a.requeueQueues),c.currentCall.queue.isCampaign?a.props.queue=a.requeueQueues[0]:a.props.queue=_.find(a.requeueQueues,function(a){return a.gateId===c.currentCall.queue.number})):a.props.shortcut=c.currentCall.requeueShortcuts[0]}()}a.$inject=["$scope","$mdDialog","CallSvc","AcdSvc","AgentSvc"],angular.module("agent_ui.modal.requeue",[]).controller("RequeueCtrl",a)}(),function(){"use strict";function a(a,b,c,d,growl,e,f,g,h,i){function j(){b.cancel()}function k(){if(t()){if(3===a.tabSelected)if(a.result.directAgent.type===a.agentString)h.directAgentTransfer(a.result.directAgent.agentId,a.stayOnCall);else{var c=a.result.directAgent.phoneNumber;c?a.stayOnCall?h.warmXfer(c,null,null,null):h.coldXfer(c,null,null,null):growl.info("SOFTPHONE.DIRECT_AGENT_XFER.NO_NUMBER")}else if(4===a.tabSelected){var d=a.mainNumber+"*"+a.corporateDirectory.extensionNumber+"@RC_EXT";d?a.stayOnCall?h.warmXfer(d,null,null,null):h.coldXfer(d,null,null,null):growl.info("SOFTPHONE.DIRECT_AGENT_XFER.NO_NUMBER")}else{var e=a.result.destination;1===a.tabSelected&&a.result.phonebook&&(e=a.result.phonebook.destination,a.result.countryId=a.result.phonebook.countryId),a.stayOnCall?h.warmXfer(e,null,null,a.result.countryId):h.coldXfer(e,null,null,a.result.countryId)}b.hide()}}function l(a){if(a)return a.name+" ("+("USA"===a.countryId?"":a.countryId+" - ")+a.destination+")"}function m(){a.tabSelected=4,u(),v=c(function(){4===a.tabSelected?n():u()},1e4)}function n(){var b="";a.availableAgentsCorpDirectory&&a.availableAgentsCorpDirectory.forEach(function(a){b+=a.id+","}),""!==b&&w.getExtensionPresenceInfo(b,function(b){b.length===a.availableAgentsCorpDirectory.length&&a.availableAgentsCorpDirectory.forEach(function(a){var c=_.findIndex(b,function(b){return b.extensionNumber==a.extensionNumber});a.presenceStatus=b[c].presenceStatus})})}function o(b){a.availableAgentsCorpDirectory=[],a.previousValue!==b&&w.searchDirectory(b,function(c){a.availableAgentsCorpDirectory=c.records,a.mainNumber=c.mainNumber,a.previousValue=b})}function p(b,c){a.corporateDirectory=b}function q(){a.availableAgents=[],i.getDirectAgentTransferList().then(function(b){a.availableAgents=a.availableAgents.concat(b)}),i.getExternalDirectTransferList().then(function(b){a.availableAgents=a.availableAgents.concat(b),i.getExternalDirectTransferListStatus(a.availableAgents).then(function(b){_.each(b,function(b,c){var d=_.find(a.availableAgents,function(a){return a.userId===c});d&&(d.available="On-Hook"===b.status)})})})}function r(){q(),a.tabSelected=3}function s(){a.tabSelected&&a.result.directAgent&&a.result.directAgent.type===a.agentString&&(h.voicemailDirectAgentTransfer(a.result.directAgent.agentId),b.hide())}function t(){var b=a.result.destination&&a.result.destination.split(":"),c=!1;if(1===a.tabSelected)_.keys(a.result.phonebook).length>0&&(c=!0);else if(2===a.tabSelected)if(a.result.destination)if("USA"===a.result.countryId||a.allowManualIntlTransfer){var d=a.result.destination.replace(/[\-\s\.]/g,"");b.length>0&&("sip"===b[0]||"sips"===b[0]||"local"===b[0])?c=!0:d.match(/(.*(\|,,).*)/g)?c=!0:isNaN(d)||"USA"===a.result.countryId&&d.length<10?(growl.error("SOFTPHONE.XFER_NUM_ERR"),c=!1):c=!0}else c=!1;else c=!1;else 3===a.tabSelected&&h.currentCall.allowDirectAgentTransfer?a.result.directAgent&&(c=!0):4===a.tabSelected&&a.allowCorpDirectory&&(c=!0);return c}function u(){v&&(c.cancel(v),v=null)}a.callService=h,a.result={},a.stayOnCall=!0,a.availableAgents=[],a.availableAgentsCorpDirectory=[],a.corporateDirectory=null,a.previousValue=null,a.mainNumber="",a.availCountries=f.getAvailableCountries(!0),a.allowManualIntlTransfer=h.currentCall.allowManualInternationalTransfer,a.result.countryId="USA",a.cancel=j,a.ok=k,a.getDecoratedName=l,a.loadAvailableAgents=q,a.loadAvailableAgentsFromDirectory=o,a.loadCorporateDirectory=m,a.loadAgentsAndSelectInternal=r,a.sendToVoicemail=s,a.agentString=d.instant("SOFTPHONE.DIRECT_AGENT_XFER.AGENTS"),a.allowCorpDirectory=!1,a.onCorporateDirSelect=p;var v=null,w=null;!function(){var b=h.currentCall.transferPhoneBook;w=g.getLibraryInstance(),a.allowCorpDirectory=i.getEnableCorporateDirectory(),1==h.currentCall.allowDirectAgentTransfer?r():b&&b.length>0?a.tabSelected=1:(a.disablePhonebooks=!0,a.tabSelected=2),e&&e.tabSelected&&(a.tabSelected=e.tabSelected)}(),a.$on("$destroy",function(){u(),a.previousValue=null})}a.$inject=["$scope","$mdDialog","$interval","$translate","growl","resolvedData","ApplicationSvc","SessionSvc","CallSvc","TransferSvc"],angular.module("agent_ui.modal.transfer",[]).controller("TransferCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){V.leadHistory=[],V.isHistoryView&&(V.callHistoryObj=_.find(k.callHistory,{time:d.callId})),V.lead&&(V.lead.campaignId||V.lead.sourceId)&&(V.lead.campaignId?V.auxLabels=l.getAuxLabels(V.lead.campaignId):V.auxLabels=l.getAuxLabels(V.lead.sourceId)),V.isDialPadView&&e(function(){b.selectedIndex=t.SCRIPT}),B(),l.isMultiNumberLead(V.lead)&&(angular.isString(V.lead.destination)&&(V.lead.destination=V.lead.destination.split("|")),b.multiNumber=l.isMultiNumberLead(V.lead)),null!==V.lead&&(Y=angular.isDefined(V.auxLabels)?z(V.lead,V.auxLabels):A(V.lead)),x(),y(Y),h.checkCallAndPopDispositionModal(),b.$watch(function(){return j.previewLeads.length},function(a,b){if(a!==b&&a<b){-1===_.findIndex(j.previewLeads,function(a){return a.leadId===V.lead.leadId})&&(l.clearSelectedPreviewLead(),c.go("^"))}}),b.$watch(function(){return l.selectedPreviewLead&&l.selectedPreviewLead.complete},function(a,b){a&&!b&&(l.clearSelectedPreviewLead(),c.go("^"))}),b.$watch("selectedIndex",function(a){a!==t.SCRIPT||h.onCallOrPendingDisp()||V.lead&&V.lead.scriptId&&V.lead.script&&V.lead.script.isPreview&&!V.lead.script.script&&I()})}function x(){if(null!==V.lead&&V.lead.extraData)for(var a in V.lead.extraData)W={label:a,value:V.lead.extraData[a],isRecording:T(V.lead.extraData),showValue:J(V.lead.extraData[a])},X.push(W)}function y(a){var b=a.filter(function(a){return angular.isDefined(a.value)&&""!==a.value});if(b.length>0){b.push(X);var c=_.flatten(b);V.left=c.splice(0,Math.round(c.length/2)),V.right=c}}function z(a,b){var c=A(a),d=[{label:b.aux1,value:a.auxData1,isRecording:T(a.auxData1),showValue:J(a.auxData1)},{label:b.aux2,value:a.auxData2,isRecording:T(a.auxData2),showValue:J(a.auxData2)},{label:b.aux3,value:a.auxData3,isRecording:T(a.auxData3),showValue:J(a.auxData3)},{label:b.aux4,value:a.auxData4,isRecording:T(a.auxData4),showValue:J(a.auxData4)},{label:b.aux5,value:a.auxData5,isRecording:T(a.auxData5),showValue:J(a.auxData5)}];return c.concat(d)}function A(a){return[{label:f.instant("LEAD_DETAIL.STATE"),value:a.leadState,isRecording:T(a.leadState),showValue:J(a.leadState)},{label:f.instant("LEAD_DETAIL.LEAD_PASSES"),value:a.leadPasses,isRecording:T(a.leadPasses),showValue:!1!==a.showLeadPasses&&J(a.leadPasses)},{label:f.instant("LEAD_DETAIL.LEAD_TITLE"),value:a.title,isRecording:T(a.title),showValue:J(a.title)},{label:f.instant("PHONE.PREVIEW.GRID.SUFFIX"),value:a.suffix,isRecording:T(a.suffix),showValue:J(a.suffix)},{label:f.instant("GENERICS.LABELS.EMAIL"),value:a.email,isRecording:T(a.email),showValue:J(a.email)},{label:f.instant("GENERICS.LABELS.ADDRESS1"),value:a.address1,isRecording:T(a.address1),showValue:J(a.address1)},{label:f.instant("GENERICS.LABELS.ADDRESS2"),value:a.address2,isRecording:T(a.address2),showValue:J(a.address2)},{label:f.instant("GENERICS.LABELS.CITY"),value:a.city,isRecording:T(a.city),showValue:J(a.city)},{label:f.instant("GENERICS.LABELS.STATE"),value:a.state,isRecording:T(a.state),showValue:J(a.state)},{label:f.instant("GENERICS.LABELS.ZIP"),value:a.zip,isRecording:T(a.zip),showValue:J(a.zip)},{label:f.instant("LEAD_DETAIL.LIST_DESC"),value:a.listDesc,isRecording:T(a.listDesc),showValue:!1!==a.showListName&&J(a.listDesc)},{label:f.instant("GENERICS.LABELS.LEAD_ID"),value:a.leadId,isRecording:T(a.leadId),showValue:J(a.leadId)},{label:f.instant("LEAD_DETAIL.EXTERN_ID"),value:a.externId,isRecording:T(a.externId),showValue:J(a.externId)},{label:f.instant("GENERICS.LABELS.GATEKEEPER"),value:a.gateKeeper,isRecording:T(a.gateKeeper),showValue:J(a.gateKeeper)}]}function B(){V.isHistoryView&&V.callHistoryObj.callPacket&&V.callHistoryObj.callPacket.appUrl?V.appUrl=V.callHistoryObj.callPacket.appUrl:V.isDialPadView&&V.callService.currentCall&&V.callService.currentCall.appUrl?V.appUrl=V.callService.currentCall.appUrl:V.lead&&V.lead.appUrl?V.appUrl=V.lead.appUrl:V.appUrl=null}function C(){return V.isDialPadView&&V.callService.currentCall.uii}function D(){
var a=V.callService.currentCall,b=m.showScript(a),c=m.showParentFrame(a);return a&&(b||c)}function E(){return!!(V.lead&&V.lead.scriptId&&V.lead.script&&V.lead.script.isPreview)}function F(){return V.isHistoryView?(V.callInfo=r,!0):!(!V.callInfo||!V.callInfo.baggage||V.callInfo.baggage.leadId!==V.lead.leadId)&&(V.callInfo=V.callService.currentCall,!0)}function G(){return V.isCallOnDialPad()&&V.callHasScript()}function H(){return!(V.isCallOnDialPad()||V.isHistoryView)&&V.leadPreviewHasScript()}function I(){if(V.lead&&V.lead.scriptId){var a=V.lead.script&&V.lead.script.scriptVersion;n.getScript(V.lead.scriptId,a).then(function(a){V.lead.script.script=a,V.lead.script.scriptVersion=a.version})}}function J(a){return angular.isDefined(a)&&null!==a&&""!==a}function K(){L()||o.leadUpdate(V.lead).then(function(a){V.lead=a})}function L(){if(V.lead&&V.lead.campaignId){var a=i.agentPermissions.allowLeadUpdatesByCampaign&&i.agentPermissions.allowLeadUpdatesByCampaign[V.lead.campaignId]||0,b=parseInt(a,10);return!V.lead.leadId||!V.lead.campaignId||isNaN(b)||0===b}return!0}function M(){V.agentPermissions.showLeadHistory&&V.lead.leadId&&(V.historyLoaded=!1,l.leadHistory(V.lead.leadId).then(function(a){V.historyLoaded=!0,V.leadHistory=a}))}function N(){O()&&o.manualPass(l.selectedPreviewLead,!1)}function O(){return!j.manualPassDisabled(V.lead,"CALL")&&!V.isDialPadView}function P(a,b){b&&b.stopPropagation(),l.selectedPreviewLead.dialedList=l.selectedPreviewLead.dialedList||[],l.selectedPreviewLead.dialedList.push(a),p.stopProgressiveDialer(!1),l.dialLead(l.selectedPreviewLead,a)}function Q(){var a;Array.isArray(l.selectedPreviewLead.destination)?a=_.find(l.selectedPreviewLead.destination,function(a){if(!V.leadService.multiNumberLeadDialDisabled(l.selectedPreviewLead,V.outboundService.pendingPreviewDial,a))return a}):V.leadService.multiNumberLeadDialDisabled(l.selectedPreviewLead,V.outboundService.pendingPreviewDial,V.lead.destination)||(a=l.selectedPreviewLead.destination),a&&P(a)}function R(a,b){b&&b.stopPropagation(),g.confirm(null,null,f.instant("SOFTPHONE.MESSAGES.CONFIRM_MANUAL_MSG",{ani:a})).then(function(){var b,d=q.get("defaultManualRingTime")||parseInt(i.agentSettings.outboundManualDefaultRingtime,10)||30,e=q.get("defaultManualCallerId")||"",f=q.get("defaultManualCountry")||"USA";q.set("defaultManualDialDest",a),V.callHistoryObj.callPacket&&V.callHistoryObj.callPacket.queue.number&&!V.callHistoryObj.callPacket.queue.isCampaign&&(b=V.callHistoryObj.callPacket.queue.number,q.set("defaultManualQueue",b)),p.stopProgressiveDialer(V.isHistoryView),h.manualOutdial(a,e,d,f,b),c.go("base.default.phone.dialpad")})}function S(a){var b=!1,c=["TRANSITION","ENGAGED","RNA-STATE"],d=h.onCallOrPendingDisp(),e=c.indexOf(i.currentAgentState.baseState)>-1;return(d||a||e)&&(b=!0),b}function T(a){return a+="",a.indexOf("bucket")>-1&&a.indexOf("region")>-1&&a.indexOf("v1")>-1}function U(a){try{var b=$("<input>");$("body").append(b),b.val(a),b.focus(),b.select(),document.execCommand("copy"),b.remove(),V.copySuccess=!0,e(function(){V.copySuccess=!1},2e3)}catch(a){console.warn("document copy not supported")}}var V=this;V.passDtsDateFormat=v.CUSTOM_DATE,V.suppressDisposition=!1,V.props={},V.callback={},V.localDts="",V.isDialPadView=c.current.name.indexOf("dialpad")>-1,V.isHistoryView=c.current.name.indexOf("callHistory")>-1,V.lead=angular.copy(s),V.callInfo=angular.copy(r),V.appUrl=null,V.callService=h,V.outboundService=j,V.agentService=i,V.leadService=l,V.agentPermissions=i.agentPermissions,V.isCallOnDialPad=C,V.callHasScript=D,V.leadPreviewHasScript=E,V.showCallInfo=F,V.showCallScriptTab=G,V.showPreviewScriptTab=H,V.editLead=K,V.editLeadDisabled=L,V.getHistory=M,V.manualPass=N,V.allowManualPass=O,V.dial=P,V.findAndDialDestination=Q,V.manualOutDial=R,V.manualOutDialDisabled=S,V.showValue=J,V.isRecordingUrl=T,V.copyValue=U;var W={},X=[],Y=[];w(),b.$on("$destroy",function(){Z()});var Z=a.$on(u.NEW_CALL,function(a,b){w()});b.$watchGroup(["vm.callService.currentCall.scriptComplete","vm.callService.onCall"],function(a){h.checkCallAndPopDispositionModal()})}a.$inject=["$rootScope","$scope","$state","$stateParams","$timeout","$translate","Dialog","CallSvc","AgentSvc","OutboundSvc","CallHistorySvc","LeadSvc","CfAgentScriptSvc","ScriptSvc","LeadDialogFactory","ProgressiveDialSvc","localStorageService","callInfo","lead","CALL_TAB_INDEX","CALL_EVENTS","DATE_FORMATS"],angular.module("agent_ui.phone.detail",[]).controller("PhoneDetailCtrl",a).constant("CALL_TAB_INDEX",{DETAIL:0,SCRIPT:1})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){""!==i.currentCall.agentRecording.pause?(i.pauseRecordTimeout&&clearTimeout(i.pauseRecordTimeout),i.pauseRecord(!1),i.currentCall.recordingPaused=!0,i.currentCall.isRecording=!1,L(i.currentCall.agentRecording.pause)):i.record(!i.currentCall.isRecording).then(function(a){})}function o(){V.requeueOpen=!0,e.custom(null,"phone/modals/requeueModal.tpl.html","RequeueCtrl",null).then(function(a){i.requeue(a.queueId,a.skillId,a.stayOnCall),V.requeueOpen=!1},function(){V.requeueOpen=!1})}function p(){var a=i.getTransferSessions();return _.some(a,{onHold:!0})}function q(){V.transferOpen=!0,e.custom(null,"phone/modals/transferModal.tpl.html","TransferCtrl").then(function(){V.transferOpen=!1},function(){V.transferOpen=!1})}function r(){i.currentCall.xferDest&&(i.currentCall.isDirectAgentXfer?i.cancelDirectAgentTransfer():i.warmXferCancel(i.currentCall.xferDest))}function s(){var a=!i.agentMonitoring()||i.agentMonitoring()&&!i.onCall;!g.pendingOffhook&&g.agentPermissions.allowOffHook&&a&&(g.isOffhook?u():t())}function t(){g.offhookInit().then(function(a){},function(a){f.showOffhookError(a.detail)}),g.systemInitOffhook=!1}function u(){i.onCall?e.custom(null,"phone/modals/hangupOffhook.modal.tpl.html","HangupOffhookCtrl").then(function(){g.offhookTerm()}):g.offhookTerm()}function v(){0===_.keys(i.getTransferSessions()).length?i.hold(!i.currentCall.onHold):e.custom(null,"phone/modals/holdModal.tpl.html","HoldModalCtrl")}function w(){l.set("defaultManualDialDest",i.dialPad.dialDest),l.set("defaultManualRingTime",i.dialPad.ringTime),l.set("defaultManualQueue",i.dialPad.queueId),l.set("defaultManualCallerId",i.dialPad.callerId),l.set("defaultManualCountry",i.dialPad.countryId),m.stopProgressiveDialer(!0),i.manualOutdial(i.dialPad.dialDest,i.dialPad.callerId,i.dialPad.ringTime,i.dialPad.countryId,i.dialPad.queueId)}function x(){return i.manualOutdialCancel(i.currentCall.earlyUii)}function y(){var a=!1,b=z();return"SOFTPHONE.MANUAL_OUTDIAL.DIAL"!==b||i.agentMonitoring()?"SOFTPHONE.HANGUP"!==b||i.agentMonitoring()?"SOFTPHONE.MANUAL_OUTDIAL.CANCEL"!==b||i.agentMonitoring()?i.agentMonitoring()&&(a=!0):g.pendingOffhook&&(a=!0):D()?angular.isDefined(g.currentAgentState)&&"TRANSITION"===g.currentAgentState.baseState&&(a=!0):a=!0:i.dialPad.dialDest?i.dialPad.ringTime&&V.agentPermissions.allowManualCalls&&(!angular.isDefined(g.currentAgentState)||"TRANSITION"!==g.currentAgentState.baseState&&"ENGAGED"!==g.currentAgentState.baseState)?i.currentCall.pendingDisp?a=!0:g.pendingOffhook&&(a=!0):a=!0:(a=!0,!i.onCallOrPendingDisp()&&V.transferOpen&&(e.close(),V.transferOpen=!1)),a}function z(){var a="SOFTPHONE.MANUAL_OUTDIAL.DIAL";return g.pendingOutdial?a="SOFTPHONE.MANUAL_OUTDIAL.CANCEL":i.onCall?a=i.currentCall&&i.currentCall.xferDest?"SOFTPHONE.TRANSFER.CANCEL":"SOFTPHONE.HANGUP":i.agentMonitoring()&&(a="SOFTPHONE.HANGUP"),a}function A(){var a=i.dialButtonStyle;return(g.pendingOutdial||i.onCall||i.currentCall&&i.currentCall.xferDest&&!i.currentCall.isMonitoring)&&"hangup-button"!==a&&(a="hangup-button icon-rotation"),a}function B(){if(!V.dialDisabled()){var a,b=z();return"SOFTPHONE.MANUAL_OUTDIAL.CANCEL"===b?a=x():"SOFTPHONE.MANUAL_OUTDIAL.DIAL"===b?a=w():"SOFTPHONE.HANGUP"===b?(N(),a=i.hangupOrPromptForSession()):"SOFTPHONE.TRANSFER.CANCEL"===b&&(a=r()),a}}function C(){return i.onCall}function D(){return C()&&i.currentCall.allowHangup}function E(){return C()&&i.currentCall.allowHold}function F(){var a=!1;return C()&&i.currentCall.agentRecording&&i.currentCall.agentRecording.agentRecording&&(a=i.currentCall.agentRecording.agentRecording),a}function G(){var a=C();return a&&(i.currentCall.allowRequeue&&(V.agentPermissions.allowCrossQueueRequeue||"OUTBOUND"!==i.currentCall.callType||"ADVANCED"!==i.currentCall.requeueType)?P()||(a=!1):a=!1),a}function H(){return C()&&i.currentCall.allowTransfer}function I(){return C()&&V.isIntegratedSoftphone}function J(a){dtmfTone.cloneNode().play(),i.onCall?h.sipSendDTMF(a):O(a)}function K(){i.currentCall.showCallView&&i.currentCall.pendingDisp?d.go("base.default.phone.dialpad.detail",{uii:i.currentCall.uii}):d.go("base.default.phone")}function L(b){M(b--),i.pauseRecordTimeout=setInterval(function(){M(b),--b<0&&N()},1e3),a.$on("$destory",function(){i.pauseRecordTimeout&&clearInterval(i.pauseRecordTimeout)})}function M(a){var b=parseInt(a%60,10);i.pauseDisplay=b+"",U()}function N(){clearInterval(i.pauseRecordTimeout),i.currentCall.recordingPaused=!1,i.currentCall.isRecording=!0,i.pauseDisplay="",U()}function O(a){var b=document.getElementById("dialDest");if(document.selection){b.focus();document.selection.createRange().text=a,b.focus()}else if(b.selectionStart||0===b.selectionStart){var c=b.selectionStart,d=b.selectionEnd,e=b.scrollTop;b.value=b.value.substring(0,c)+a+b.value.substring(d,b.value.length),i.dialPad.dialDest=b.value,b.focus(),b.selectionStart=c+a.length,b.selectionEnd=c+a.length,b.scrollTop=e}else i.dialPad.dialDest+=a,b.focus();angular.element(b).trigger("change")}function P(){var a=!1;if("ADVANCED"===i.currentCall.requeueType){var b=j.getAvailableQueues();a=b&&b.length>0}else{var c=i.currentCall.requeueShortcuts;a=c&&c.length>0}return a}function Q(){V.agentService.manualDialButtonState=!V.agentService.manualDialButtonState}function R(){V.dialButtonState=!V.dialButtonState}function S(){var a=c.instant("SOFTPHONE.MANUAL_OUTDIAL.UNKNOWN");if(("OUTBOUND"===i.currentCall.callType||"INBOUND"===i.currentCall.callType)&&angular.isDefined(i.currentCall.lead.firstName)){var b=i.currentCall.lead.firstName||a,d=i.currentCall.lead.midName||a,e=i.currentCall.lead.lastName||a;b===a&&d===a&&e===a||(a=b+" "+d+" "+e)}return a}function T(){return V.callService.currentCall.recordingPaused?c.instant("SOFTPHONE.CALL_CONTROL_HELP.TOOLTIP.RESUME"):c.instant("SOFTPHONE.CALL_CONTROL_HELP.TOOLTIP.PAUSE")}function U(){b(function(){a.$apply()})}var V=this;i.currentCall&&i.currentCall.pendingDisp&&!a.widget&&d.go("base.default.phone.dialpad.detail",{uii:i.currentCall.uii}),V.callService=i,V.showDialPad=i.onCall||l.get("showDialPad")||!1,V.agentService=g,V.softphoneService=h,V.agentPermissions=g.agentPermissions,V.agentSettings=g.agentSettings,V.callerIds=g.getCallerIds(!0),V.availQueues=j.getAvailableQueues(!0),V.availCountries=k.getAvailableCountries(!0),V.isIntegratedSoftphone="integrated"===f.getLoginType(),V.allowOffHook=g.agentPermissions.allowOffHook,V.requeueOpen=!1,V.transferOpen=!1,V.toggleOffHook=s,V.toggleHoldOrOpenHoldModal=v,V.toggleRecord=n,V.openRequeue=o,V.openTransfer=q,V.transferSessionOnHold=p,V.allowHangup=D,V.allowHold=E,V.allowRecord=F,V.allowRequeue=G,V.allowTransfer=H,V.allowMute=I,V.dialDisabled=y,V.keypadClick=J,V.getDialLabel=z,V.getDialClass=A,V.dialOptions=B,V.onCall=C,V.manualDialClick=Q,V.dialButtonClick=R,V.getLeadName=S,V.setToolTip=T,V.goToCall=K}a.$inject=["$scope","$timeout","$translate","$state","Dialog","SessionSvc","AgentSvc","SoftphoneSvc","CallSvc","AcdSvc","ApplicationSvc","localStorageService","ProgressiveDialSvc"],angular.module("agent_ui.phone.dialPad",[]).controller("DialPadCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"phone",parent:"base.default",url:"/phone",views:{"body@base.default":{templateUrl:"layout/views/twoPanel.tpl.html"},"middle@base.default.phone":{templateUrl:"layout/components/middle.default.tpl.html",controller:"PhoneCtrl as vm"},"nav@base.default.phone":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},redirectTo:"base.default.phone.dialpad",children:[{name:"dialpad",url:"/dialpad",views:{"left@base.default.phone":{templateUrl:"phone/phone.dialPad.tpl.html",controller:"DialPadCtrl as vm"}},children:[{name:"detail",url:"/detail/:uii",views:{"middle@base.default.phone":{templateUrl:"phone/phone.detail.tpl.html",controller:"PhoneDetailCtrl as vm"}},resolve:{lead:["$stateParams","CallSvc","OutboundSvc",function(a,b,c){var d=b.currentCall.baggage;if(d.destination=d.ani,b.currentCall.baggage.leadId){var e=c.findPreviewLeadById(b.currentCall.baggage.leadId);e&&(d=angular.extend(b.currentCall.baggage,e))}return d||{}}],callInfo:["CallSvc",function(a){return a.currentCall}]}}]},{name:"preview",url:"/preview",views:{"left@base.default.phone":{templateUrl:"phone/phone.previewLeads.tpl.html",controller:"PreviewLeadsCtrl as vm"}},children:[{name:"detail",url:"/detail/:leadId",params:{uii:(new Date).getTime()},views:{"middle@base.default.phone":{templateUrl:"phone/phone.detail.tpl.html",controller:"PhoneDetailCtrl as vm"}},resolve:{lead:["$stateParams","OutboundSvc",function(a,b){return a.uii=a.leadId,b.findPreviewLeadById(a.leadId)||{}}],callInfo:function(){return null}}}]},{name:"progressive",url:"/progressive",views:{"left@base.default.phone":{templateUrl:"phone/phone.previewLeads.tpl.html",controller:"PreviewLeadsCtrl as vm"}},children:[{name:"detail",url:"/detail/:leadId",views:{"middle@base.default.phone":{templateUrl:"phone/phone.detail.tpl.html",controller:"PhoneDetailCtrl as vm"}},resolve:{lead:["$stateParams","OutboundSvc",function(a,b){return b.findPreviewLeadById(a.leadId)||{}}],callInfo:function(){return null}}}]}]})}function b(a,b,c,d,e,f,g,h,i){function j(){s.agentService.moreButtonState?(s.buttonIcon=i.MORE,b(function(){s.moreButtonTooltip=c.instant("PHONE.TOOLTIP.SHOW_MORE")},1e3),s.morebuttonLabel=c.instant("PHONE.MENU_BUTTON_LABEL.SHOW_MORE"),s.agentService.moreButtonState=!1):(s.buttonIcon=i.LESS,b(function(){s.moreButtonTooltip=c.instant("PHONE.TOOLTIP.SHOW_LESS")},1e3),s.morebuttonLabel=c.instant("PHONE.MENU_BUTTON_LABEL.SHOW_LESS"),s.agentService.moreButtonState=!0)}function k(){var a=h.getDialGroup(),b=s.agentService.agentSettings.loginType;return!("OUTBOUND"!==b&&"BLENDED"!==b||"PREVIEW"!==a.dialMode&&"TCPA-SAFE-MODE"!==a.dialMode)}function l(){return h.hciEnabled()||!h.getDialGroup().hciEnabled}function m(){return s.agentService.agentPermissions.allowLeadSearch||s.agentService.agentPermissions.allowLeadInserts}function n(){var a="";return r()&&(a="SOFTPHONE.DEFAULTS.ACTIVE"),a}function o(){var a="phone";return r()&&(a="phone_in_talk"),a}function p(b){e.currentUrl=b,a.current.name.indexOf("base.default.phone.dialpad")>-1&&"base.default.phone.dialpad"===b&&e.toggleDialPad(),e.dialButtonStyle=e.currentUrl.indexOf("base.default.phone.dialpad")>-1&&e.onCall?"hangup-button":"dial-button"}function q(){s.callService.isChatView=!s.callService.isChatView}function r(){return s.agentService.pendingOutdial||e.onCall}var s=this;s.agentService=d,s.chatService=f,s.monitorService=g,s.state=a,s.getLabel=n,s.callService=e,s.getIcon=o,s.toggleSection=p,s.switchChat=q,s.moreButtonClick=j,s.buttonIcon=i.MORE,s.moreButtonTooltip=c.instant("PHONE.TOOLTIP.SHOW_MORE"),s.morebuttonLabel=c.instant("PHONE.MENU_BUTTON_LABEL.SHOW_MORE"),function(){var a=[],b=[];a.push({url:"base.default.phone.dialpad",icon:"icon-dialpad",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.DIALPAD"),label:c.instant("PHONE.MENU_BUTTON_LABEL.DIALPAD")}),k()&&(h.getDialGroup().progressiveEnabled?a.push({url:"base.default.phone.progressive",icon:"icon-outboundcall",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.OUTBOUND_DIALER"),label:c.instant("PHONE.MENU_BUTTON_LABEL.OUTBOUND_DIALER")}):l()&&a.push({url:"base.default.phone.preview",icon:"icon-outboundcall",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.OUTBOUND_DIALER"),label:c.instant("PHONE.MENU_BUTTON_LABEL.OUTBOUND_DIALER")})),a.push({url:"base.default.phone.callbacks.callbackDetail",icon:"icon-scheduledcallbacks",alwaysShowTooltip:!0,altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.CALLBACK"),label:c.instant("PHONE.MENU_BUTTON_LABEL.CALLBACK")}),a.push({url:"base.default.phone.callHistory",icon:"icon-callhistory",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.CALLHISTORY"),label:c.instant("PHONE.MENU_BUTTON_LABEL.CALLHISTORY")}),a.push({url:"base.default.phone.stats.metrics",icon:"icon-agentstats",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.STATS"),label:c.instant("PHONE.MENU_BUTTON_LABEL.STATS")}),m()&&b.push({url:"base.default.phone.leads",icon:"icon-search",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.SEARCH"),label:c.instant("PHONE.MENU_BUTTON_LABEL.SEARCH")}),b.push({url:"base.default.phone.logs.search",icon:"icon-channels",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.CALLLOGS"),label:c.instant("PHONE.MENU_BUTTON_LABEL.CALLLOGS")}),b.push({url:"base.default.scripts",icon:"icon-agentscripts",altIcon:!0,tooltip:c.instant("PHONE.TOOLTIP.SCRIPTS"),label:c.instant("PHONE.MENU_BUTTON_LABEL.SCRIPTS")}),s.navSections=a,s.navMoreSections=b,s.agentService.moreButtonState&&(s.buttonIcon=i.LESS,s.moreButtonTooltip=c.instant("PHONE.TOOLTIP.SHOW_LESS"),s.morebuttonLabel=c.instant("PHONE.MENU_BUTTON_LABEL.SHOW_LESS"))}()}a.$inject=["stateHelperProvider"],b.$inject=["$state","$timeout","$translate","AgentSvc","CallSvc","ChatSvc","MonitorSvc","OutboundSvc","BUTTON_ICONS"],angular.module("agent_ui.phone",["ui.router","ui.router.stateHelper"]).config(a).constant("BUTTON_ICONS",{MORE:"icon-more",LESS:"icon-upchevron"}).controller("PhoneCtrl",b)}(),function(){"use strict";function a(a,b,c,d,growl,e,f,g,h,i,j,k,l,m,n){function o(){f.set("leadCallFilter",b.searchFields)}function p(){q()||(b.showFilters=!1,b.searchFields=angular.copy(b.searchFieldsTemp),o(),f.set("showPreviewFilters",b.showFilters),v())}function q(){return l.onCall||l.currentCall&&l.currentCall.pendingDisp||i.leadSearchLoading}function r(){b.searchFieldsTemp={}}function s(){j.progressiveDialRunning?j.stopProgressiveDialer(!0):j.startProgressiveDialer(!0)}function t(){return i.leadSearchLoading||h.pendingOffhook||"TRANSITION"===h.currentAgentState.baseState||"ENGAGED"===h.currentAgentState.baseState}function u(){e.toggleCheatSheet()}function v(){if(w())growl.info("PHONE.PREVIEW.REQUIRED_LEADS_MSG");else{k.selectedPreviewLead={},i.previewLeads=[];var a=[];for(var d in b.searchFields)b.searchFields.hasOwnProperty(d)&&b.searchFields[d]&&""!==b.searchFields[d]&&a.push({key:d,value:b.searchFields[d]});b.isTcpaSafeMode?i.safeModeFetch(a):i.previewFetch(a),c.go("base.default.phone.preview")}}function w(){if(h.agentPermissions.requireFetchedLeadsCalled){var a=!1;return _.some(i.previewLeads,function(b){if("PENDING"===b.leadState.toUpperCase())return a=!0,!0}),a}return!1}b.agentService=h,b.outboundService=i,b.progressiveDialService=j,b.agentPermissions=h.agentPermissions,b.isTcpaSafeMode=g.applicationSettings.isTcpaSafeMode,b.auxLabels=k.getAuxLabels(),b.updateFilter=o,b.fetchLeads=p,b.clearFilters=r,b.fetchDisabled=q,b.toggleProgressive=s,b.disableProgressiveButton=t,b.toggleCheatSheet=u,function(){if(h.agentPermissions.progressiveEnabled?(b.title="PHONE.PREVIEW.HEADER_PROGRESSIVE",b.noLeadsMsg=""):i.isHciPacing()?(b.title="PHONE.PREVIEW.HEADER_HCI_PACING",b.noLeadsMsg="PHONE.PREVIEW.INITIAL_LOAD_MSG_HCI_PACING"):(b.title=b.isTcpaSafeMode?"PHONE.PREVIEW.HEADER_TCPA":"PHONE.PREVIEW.HEADER_PREVIEW",b.noLeadsMsg="",b.fetchBtnLabel="PHONE.PREVIEW.FETCH_LEADS",b.showFilters=!1,f.set("showPreviewFilters",b.showFilters)),k.selectedPreviewLead.leadId)if(k.selectedPreviewLead.complete)k.clearSelectedPreviewLead();else{var a=d("leadState")([k.selectedPreviewLead]);1===a.length&&c.go("base.default.phone.preview.detail",{leadId:k.selectedPreviewLead.leadId})}i.isHciPacing()||e.bindTo(b).add({combo:n.getByKey("FETCH_LEADS").shortcut,description:n.getByKey("FETCH_LEADS").description,callback:function(){p()}})}();var x=a.$on(m.PREVIEW_LEADS_UPDATED,function(a,c){b.isTcpaSafeMode?b.noLeadsMsg="PHONE.PREVIEW.GRID.NO_RECORDS_MSG_TCPA":h.agentPermissions.progressiveEnabled?b.noLeadsMsg="PHONE.PREVIEW.GRID.NO_RECORDS_MSG_PROGRESSIVE":i.isHciPacing()?b.noLeadsMsg="PHONE.PREVIEW.INITIAL_LOAD_MSG_HCI_PACING":b.noLeadsMsg="PHONE.PREVIEW.GRID.NO_RECORDS_MSG_PREVIEW"});b.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b)&&""!==a[b])return!1;return!0},b.$on("$destroy",function(){x()})}a.$inject=["$rootScope","$scope","$state","$filter","growl","hotkeys","localStorageService","ApplicationSvc","AgentSvc","OutboundSvc","ProgressiveDialSvc","LeadSvc","CallSvc","OUTBOUND_EVENTS","ShortcutKeys"],angular.module("agent_ui.phone.previewLeads",[]).controller("PreviewLeadsCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"callbacks",parent:"base.default.phone",url:"/callbacks",views:{"body@base.default":{templateUrl:"layout/views/fullWidth.tpl.html"},"nav@base.default.phone.callbacks":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},children:[{name:"callbackDetail",url:"/callbackDetail",templateUrl:"phone/scheduledCallbacks/scheduledCallbacks.tpl.html",controller:"ScheduledCallBacksCtrl as vm",resolve:{futureCallbacks:["$q","OutboundSvc",function(a,b){return a(function(a){b.getFutureCallbacks().then(function(b){a(b)})})}]}}]})}function b(a,b){a.outboundService=b}a.$inject=["stateHelperProvider"],b.$inject=["$scope","OutboundSvc"],angular.module("agent_ui.phone.callbacks",["ui.router","ui.router.stateHelper"]).config(a).controller("ScheduledCallBacksCtrl",b)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"scoreboard/products/statList.tpl.html",scope:!0,controller:["$scope","$rootScope","SessionSvc","Utils","STATS_EVENTS","CallSvc","ApplicationSvc","$filter",function(a,b,c,d,e,f,g,h){function i(a){return d.formatTime(a)}function j(a){return d.formatNumber(a)}a.scores={totalLoginTime:i(0),totalOffhookTime:i(0),totalLoginSessions:0,totalCallsHandled:0,totalChatsHandled:0,totalSuccessDispositions:0,totalManualDials:0,totalRna:0},g.applicationSettings.isTcpaSafeMode?a.scores.totalSafeDials=0:a.scores.totalPreviewDials=0,a.scores.pendingDisp=h("FormatBoolYesNo")(!1),a.$on("$destroy",function(){k()});var k=b.$on(e.AGENT_DAILY,function(b,c){a.scores.totalLoginTime=i(c.totalLoginTime),a.scores.totalOffhookTime=i(c.totalOffhookTime),a.scores.totalLoginSessions=j(c.totalLoginSessions),a.scores.totalCallsHandled=j(c.totalCallsHandled),a.scores.totalChatsHandled=j(c.totalChatsHandled),a.scores.totalSuccessDispositions=j(c.totalSuccessDispositions),a.scores.totalManualDials=j(c.totalManualDials),a.scores.totalRna=j(c.totalRna),a.scores.pendingDisp=c.pendingDisp,g.applicationSettings.isTcpaSafeMode?a.scores.totalSafeDials=j(c.totalSafeDials):a.scores.totalPreviewDials=j(c.totalPreviewDials)})}],link:function(b,c,d){b.type=a.AGENT_DAILY}}}a.$inject=["STATS_EVENTS"],angular.module("agent_ui.scoreboard.agentDailyStats",[]).directive("agentDailyStats",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"scoreboard/products/statList.tpl.html",scope:!0,controller:["$scope","$rootScope","SessionSvc","Utils","STATS_EVENTS",function(a,b,c,d,e){function f(a){return d.formatTime(a)}function g(a){return d.formatNumber(a)}a.scores={active:0,available:0,calls:0,totalTalk:f(0),avgTalk:f(0),rna:0},a.$on("$destroy",function(){h()});var h=b.$on(e.AGENT,function(b,c){var e=0,h=0,i=0;_.each(c,function(a){e+=Number(a.calls),h+=Number(a.totalTalkTime),i+=Number(a.rna)});var j=Math.round(100*d.divide(h,e)/100);j<0&&(j=0);var k=_.filter(c,function(a){return"AVAILABLE"===a.agentState});a.scores.active=g(c.length),a.scores.available=g(k.length),a.scores.calls=g(e),a.scores.totalTalk=f(h),a.scores.avgTalk=f(j),a.scores.rna=g(i)})}],link:function(b,c,d){b.type=a.AGENT}}}a.$inject=["STATS_EVENTS"],angular.module("agent_ui.scoreboard.agentStats",[]).directive("agentStats",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"scoreboard/products/statList.tpl.html",scope:!0,controller:["$scope","$rootScope","SessionSvc","Utils","STATS_EVENTS",function(a,b,c,d,e){function f(a){return d.formatTime(a)}function g(a){return d.formatNumber(a)}a.scores={active:0,inQueue:0,routing:0,presented:0,accepted:0,abandoned:0,deflected:0,avgQueueTime:f(0),avgChatTime:f(0),avgAbandon:f(0)},a.$on("$destroy",function(){h()});var h=b.$on(e.CHAT,function(b,c){a.scores.active=g(c.totals.active),a.scores.inQueue=g(c.totals.inQueue),a.scores.routing=g(c.totals.routing),a.scores.presented=g(c.totals.presented),a.scores.accepted=g(c.totals.accepted),a.scores.abandoned=g(c.totals.abandoned),a.scores.deflected=g(c.totals.deflected),a.scores.avgQueueTime=f(c.totals.avgQueueTime),a.scores.avgChatTime=f(c.totals.avgCT),a.scores.avgAbandon=f(c.totals.avgAba)})}],link:function(b,c,d){b.type=a.CHAT}}}a.$inject=["STATS_EVENTS"],angular.module("agent_ui.scoreboard.chatStats",[]).directive("chatStats",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"scoreboard/products/statList.tpl.html",scope:!0,controller:["$scope","$rootScope","SessionSvc","Utils","STATS_EVENTS",function(a,b,c,d,e){function f(a){return d.formatTime(a)}function g(a){return d.formatNumber(a)}a.scores={active:0,inQueue:0,routing:0,presented:0,answered:0,abandoned:0,deflected:0,shortCall:0,longCall:0,slaPass:0,slaFail:0,avgQueueTime:f(0),avgSOA:f(0),avgTT:f(0),avgAba:f(0)},a.$on("$destroy",function(){h()});var h=b.$on(e.QUEUE,function(b,c){a.scores.active=g(c.totals.active),a.scores.inQueue=g(c.totals.inQueue),a.scores.routing=g(c.totals.routing),a.scores.presented=g(c.totals.presented),a.scores.answered=g(c.totals.answered),a.scores.abandoned=g(c.totals.abandoned),a.scores.deflected=g(c.totals.deflected),a.scores.shortCall=g(c.totals.shortCall),a.scores.longCall=g(c.totals.longCall),a.scores.slaPass=g(c.totals.slaPass),a.scores.slaFail=g(c.totals.slaFail),a.scores.avgQueueTime=f(c.totals.avgQueueTime),a.scores.avgSOA=f(c.totals.avgSOA),a.scores.avgTT=f(c.totals.avgTalkTime),a.scores.avgAba=f(c.totals.avgAba)})}],link:function(b,c,d){b.type=a.QUEUE}}}a.$inject=["STATS_EVENTS"],angular.module("agent_ui.scoreboard.inboundStats",[]).directive("inboundStats",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"scoreboard/products/statList.tpl.html",scope:!0,controller:["$scope","$rootScope","SessionSvc","Utils","STATS_EVENTS",function(a,b,c,d,e){function f(a){return d.formatTime(a)}function g(a){return d.formatNumber(a)}a.scores={ready:0,active:0,complete:0,error:0,answer:0,noanswer:0,machine:0,abandon:0,intercept:0,busy:0,fax:0,totalConnects:0,totalTalkTime:f(0)},a.$on("$destroy",function(){h()});var h=b.$on(e.CAMPAIGN,function(b,c){a.scores.ready=g(c.totals.ready),a.scores.active=g(c.totals.active),a.scores.complete=g(c.totals.complete),a.scores.error=g(c.totals.error),a.scores.answer=g(c.totals.answer),a.scores.noanswer=g(c.totals.noanswer),a.scores.machine=g(c.totals.machine),a.scores.abandon=g(c.totals.abandon),a.scores.intercept=g(c.totals.intercept),a.scores.busy=g(c.totals.busy),a.scores.fax=g(c.totals.fax),a.scores.totalConnects=g(c.totals.totalConnects),a.scores.totalTalkTime=f(c.totals.totalTalkTime)})}],link:function(b,c,d){b.type=a.CAMPAIGN}}}a.$inject=["STATS_EVENTS"],angular.module("agent_ui.scoreboard.outboundStats",[]).directive("outboundStats",a)}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:"scoreboard/shared/productDetail.tableAndChart.tpl.html",require:"^productDetailControl",controller:"ProductMetrics",link:function(b,c,d){function e(){return this.agentId+" - "+this.firstName+" "+this.lastName}function f(){var a=this.agentState;return"ENGAGED"===this.agentState&&"1"!==this.isDequeueAgent?"MONITORING":a}function g(a){if(b.monitoring)b.monitoring&&b.monitoringAgent===a.agentId&&(a.ruleStyles=b.warningRow);else{var c=a.getState();"AVAILABLE"===c&&"OUTBOUND"!==a.agentLoginType?a.ruleStyles=b.successRow:"AVAILABLE"==c&&"OUTBOUND"===a.agentLoginType&&"1"===a.offHook&&"0"===a.pendingDisp?a.ruleStyles=b.successRow:"ENGAGED"===c&&c.stateDuration>300||"SUSPECT"===c?a.ruleStyles=b.warningRow:"RNA-STATE"===c&&(a.ruleStyles=b.infoRow)}}b.tableData=[],b.canMonitor=!1,b.$watch("data",function(a){_.each(b.data[0],function(a){a.concatName=e,a.getState=f,g(a)}),b.tableData=b.data[0],b.redraw()},!0),b.gridOptions={data:"tableData",showColumnFooter:!1,onRegisterApi:function(a){b.gridApi=a},enableColumnMenus:!1,rowTemplate:b.rowTemplate,columnDefs:[{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.NAME"),field:"concatName()",minWidth:200,pinnedLeft:!0,type:"string"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.SKILL"),field:"skillProfileName",minWidth:150},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.STATE"),field:"getState()",minWidth:75},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.GATE_CAMP"),field:"queueName",minWidth:75},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.S_DUR"),field:"stateDuration",minWidth:50,cellFilter:"durationFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.L_DUR"),field:"loginDuration",minWidth:50,cellFilter:"durationFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.CALLS"),field:"calls",minWidth:30,type:"number"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.TTT"),field:"totalTalkTime",minWidth:75,cellFilter:"durationFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.ATT"),field:"avgTalkTime",minWidth:75,cellFilter:"durationFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.UTIL"),field:"utilization",minWidth:50,cellFilter:"rtrPercent:2"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.RNA"),field:"rna",minWidth:50,type:"number"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.OH"),field:"offHook",minWidth:50,cellFilter:"yesNoFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.PD"),field:"pendingDisp",minWidth:50,cellFilter:"yesNoFilter"},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.CHAT"),field:"agentId",minWidth:50,visible:b.canMonitor,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.chat(row.entity.agentId, row.entity.firstName, row.entity.lastName)" class="btn btn-sm btn-link rtr-btn"><i class="fa fa-comment"></i></button></div>'},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.MONITOR"),field:"uii",minWidth:50,visible:b.canMonitor,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.monitor(row.entity.agentId, row.entity.uii)" ng-disabled="row.entity.uii === \'null\'" class="btn btn-sm btn-link rtr-btn"><i class="fa fa-headphones"></i></button></div>'},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.COACH"),field:"uii",minWidth:50,visible:b.canMonitor,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.coach(row.entity.agentId, row.entity.uii)" ng-disabled="row.entity.uii === \'null\'" class="btn btn-sm btn-link rtr-btn"><i class="fa fa-user"></i></button></div>'},{displayName:a.instant("REALTIME_REPORTING.WIDGET.agent.GRID.LOGOUT"),field:"agentId",minWidth:50,visible:b.canMonitor,cellTemplate:'<div class="ui-grid-cell-contents"><button ng-click="grid.appScope.logoutAgent(row.entity.agentId, row.entity.concatName())" class="btn btn-sm btn-link rtr-btn"><i class="fa fa-remove"></i></button></div>'}]}}}}a.$inject=["$translate","AgentSvc"],angular.module("agent_ui.scoreboard.statsAgent",[]).directive("statsAgent",a)}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:"scoreboard/shared/productDetail.tableAndChart.tpl.html",require:"^productDetailControl",controller:"ProductMetrics",link:function(c,d,e){function f(a){var b=a?a.timeStamp:null;c.chartData[0].data.unshift([b,Number(c.data[0].totals.totalConnects)]),c.chartData[1].data.unshift([b,Number(c.data[0].totals.pending)]),
c.chartData[2].data.unshift([b,Number(c.data[0].totals.active)])}function g(a){var b=Number(a.abandon),d=Number(a.answer);d>0&&b/d*100>3&&(a.ruleStyles=c.errorRow)}c.tableData=[],c.chartData=new Array(3),function(){c.chartData[0]={name:b.instant("REALTIME_REPORTING.WIDGET.outbound.CHART.TOTAL"),data:[]},c.chartData[1]={name:b.instant("REALTIME_REPORTING.WIDGET.outbound.CHART.PENDING"),data:[]},c.chartData[2]={name:b.instant("REALTIME_REPORTING.WIDGET.outbound.CHART.ACTIVE"),data:[]},_.each(c.data,function(a){f(a)})}(),c.$watch("data",function(a){(a&&a[0]?a[0].timeStamp:null)&&(f(c.data[0]),c.$broadcast("chart:newData",c.chartData),_.each(c.data[0].campaigns,function(a){g(a)}),c.limitDataLength(),c.tableData=c.data[0].campaigns,c.redraw())},!0),c.gridOptions={data:"tableData",showColumnFooter:!0,onRegisterApi:function(a){c.gridApi=a},enableColumnMenus:!1,rowTemplate:c.rowTemplate,columnDefs:[{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.NAME"),field:"campaignName",minWidth:200,pinnedLeft:!0,type:"string",cellTemplate:'<div class="ui-grid-cell-contents">{{ row.entity.campaignId }} - {{ row.entity.campaignName }}</div>',footerCellTemplate:'<div class="ui-grid-cell-contents" translate="REALTIME_REPORTING.TOTALS"></div>'},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.STAFF"),field:"staffed",minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.AVAIL"),field:"available",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.INC"),field:"ready",minWidth:30,width:"8%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.PEND"),field:"pending",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.ACT"),field:"active",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.COMP"),field:"complete",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.ERR"),field:"error",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"9%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.ANS"),field:"answer",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.NO_ANS"),field:"noanswer",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"9%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.MACH"),field:"machine",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.INT"),field:"intercept",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.BUSY"),field:"busy",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.FAX"),field:"fax",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.ABAN"),field:"abandon",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.T_TT"),field:"totalTalkTime",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,cellFilter:'secondsToDateTime | date:"HH:mm:ss"',footerCellTemplate:"<div class='ui-grid-cell-contents'>{{col.getAggregationValue() | secondsToDateTime | date:'HH:mm:ss' }}</div>",minWidth:45,width:"12%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.outbound.GRID.CONN"),field:"totalConnects",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"9%",type:"number"}]}}}}a.$inject=["uiGridConstants","$translate"],angular.module("agent_ui.scoreboard.statsCampaign",[]).directive("statsCampaign",a)}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:"scoreboard/shared/productDetail.tableAndChart.tpl.html",require:"^productDetailControl",controller:"ProductMetrics",link:function(c,d,e){function f(a){var b=a?a.timeStamp:null;b=new Date(b),c.chartData[0].data.unshift([b,Number(c.data[0].totals.routing)]),c.chartData[1].data.unshift([b,Number(c.data[0].totals.inQueue)]),c.chartData[2].data.unshift([b,Number(c.data[0].totals.accepted)]),c.chartData[3].data.unshift([b,Number(c.data[0].totals.active)])}function g(){return c.toInt(this.active)-(c.toInt(this.inQueue)+c.toInt(this.routing))}function h(a){a.longestInQueue>30&&(a.ruleStyles=c.errorRow)}c.chartData=new Array(4),c.tableData=[],function(){c.chartData[0]={name:b.instant("REALTIME_REPORTING.WIDGET.chat.CHART.ROUTING"),data:[]},c.chartData[1]={name:b.instant("REALTIME_REPORTING.WIDGET.chat.CHART.QUEUED"),data:[]},c.chartData[2]={name:b.instant("REALTIME_REPORTING.WIDGET.chat.CHART.ACCEPT"),data:[]},c.chartData[3]={name:b.instant("REALTIME_REPORTING.WIDGET.chat.CHART.ACTIVE"),data:[]},_.each(c.data,function(a){f(a)})}(),c.$watch("data",function(a){(a&&a[0]?a[0].timeStamp:null)&&(f(c.data[0]),c.$broadcast("chart:newData",c.chartData),_.each(c.data[0].chatQueues,function(a){a.calculateActive=g,h(a)}),c.limitDataLength(),c.tableData=c.data[0].chatQueues,c.redraw())},!0),c.gridOptions={data:"tableData",showColumnFooter:!0,onRegisterApi:function(a){c.gridApi=a},enableColumnMenus:!1,rowTemplate:c.rowTemplate,columnDefs:[{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.NAME"),field:"chatQueueName",minWidth:200,pinnedLeft:!0,type:"string",cellTemplate:'<div class="ui-grid-cell-contents">{{ row.entity.chatQueueId }} - {{ row.entity.chatQueueName }}</div>',footerCellTemplate:'<div class="ui-grid-cell-contents" translate="REALTIME_REPORTING.TOTALS"></div>'},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.ACTIVE"),field:"active",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:45,width:"8%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.QUEUED"),field:"inQueue",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.ROUTE"),field:"routing",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.CONN"),field:"calculateActive()",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"9%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.PRES"),field:"presented",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.ACCEPT"),field:"accepted",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.ABA"),field:"abandon",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.DEF"),field:"deflected",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.AVG_Q"),field:"avgQueueTime",minWidth:45,width:"9%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.AVG_CHAT"),field:"avgChatTime",minWidth:45,width:"10%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.AVG_ABA"),field:"avgAbandon",minWidth:45,width:"9%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.STAFF"),field:"staffed",minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.AVAIL"),field:"available",minWidth:45,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.chat.GRID.UTIL"),field:"utilization",minWidth:45,width:"10%",type:"number",cellFilter:"rtrPercent:2"}]}}}}a.$inject=["uiGridConstants","$translate"],angular.module("agent_ui.scoreboard.statsChatQueue",[]).directive("statsChatQueue",a)}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:"scoreboard/shared/productDetail.tableAndChart.tpl.html",require:"^productDetailControl",controller:"ProductMetrics",link:function(c,d,e){function f(a){var b=a?a.timeStamp:null;c.chartData[0].data.unshift([b,Number(a.totals.inQueue)]),c.chartData[1].data.unshift([b,Number(a.totals.answered)]),c.chartData[2].data.unshift([b,Number(a.totals.totalQueueTime)])}function g(){return c.toInt(this.active)-(c.toInt(this.inQueue)+c.toInt(this.routing))}function h(){return c.toInt(this.presented)-(c.toInt(this.slaFail)+c.toInt(this.slaPass))}function i(a){a.longestInQueue>120&&(a.ruleStyles=c.errorRow),a.routing>0&&(a.ruleStyles=c.warningRow)}c.chartData=new Array(3),c.tableData=[],function(){c.chartData[0]={name:b.instant("REALTIME_REPORTING.WIDGET.inbound.CHART.QUEUED"),data:[]},c.chartData[1]={name:b.instant("REALTIME_REPORTING.WIDGET.inbound.CHART.CONNECTED"),data:[]},c.chartData[2]={name:b.instant("REALTIME_REPORTING.WIDGET.inbound.CHART.LONG_QUEUE"),data:[]},_.each(c.data,function(a){f(a)})}(),c.$watch("data",function(a){(a&&a[0]?a[0].timeStamp:null)&&(f(c.data[0]),c.$broadcast("chart:newData",c.chartData),_.each(c.data[0].queues,function(a){a.calculateActive=g,a.calculateSlaUnq=h,i(a)}),c.limitDataLength(),c.tableData=c.data[0].queues,c.redraw())},!0),c.gridOptions={data:"tableData",showColumnFooter:!0,onRegisterApi:function(a){c.gridApi=a},enableColumnMenus:!1,rowTemplate:c.rowTemplate,columnDefs:[{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.NAME"),field:"queueName",minWidth:200,pinnedLeft:!0,type:"string",cellTemplate:'<div class="ui-grid-cell-contents">{{ row.entity.queueId }} - {{ row.entity.queueName }}</div>',footerCellTemplate:'<div class="ui-grid-cell-contents" translate="REALTIME_REPORTING.TOTALS"></div>'},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.CALLS"),field:"presented",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.QUEUED"),field:"inQueue",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.ROUTE"),field:"routing",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.CONN"),field:"calculateActive()",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"8%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.LONG_Q"),field:"longestInQueue",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"8%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.PRES"),field:"presented",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"8%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.ANS"),field:"answer",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.ABA"),field:"abandon",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.DEF"),field:"deflected",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.LONG_C"),field:"longCall",minWidth:30,width:"7%",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SHORT_C"),field:"shortCall",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SHORT_ABA"),field:"shortAbandon",aggregationType:a.aggregationTypes.sum,aggregationHideLabel:!0,minWidth:30,width:"10%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.ASA"),field:"asa",minWidth:45,width:"12%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.AVG_T"),field:"avgTalk",minWidth:45,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.AVG_ABA"),field:"avgAbandon",minWidth:45,width:"10%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.STAFF"),field:"staffed",minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.AVAIL"),field:"available",minWidth:45,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.UTIL"),field:"utilization",minWidth:45,width:"9%",type:"number",cellFilter:"rtrPercent:2"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SLA"),field:"sla",minWidth:30,width:"7%",type:"number",cellFilter:"rtrPercent:2"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SLA_P"),field:"slaPass",minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SLA_F"),field:"slaFail",minWidth:30,width:"7%",type:"number"},{displayName:b.instant("REALTIME_REPORTING.WIDGET.inbound.GRID.SLA_UN"),field:"calculateSlaUnq()",minWidth:30,width:"11%",type:"number"}]}}}}a.$inject=["uiGridConstants","$translate"],angular.module("agent_ui.scoreboard.statsQueue",[]).directive("statsQueue",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var a=!1;return k.selectedType===e.AGENT_DAILY&&(a=!0),a}function h(){k.widgetView===f.TABLE?k.widgetView=f.LINE_CHART:k.widgetView=f.TABLE}function i(){return k.widgetView===f.TABLE}function j(){return k.selectedType===e.AGENT}var k=this;k.callService=c,k.sessionService=b,k.isSafeMode=d.applicationSettings.isTcpaSafeMode,k.products=[e.AGENT_DAILY],k.isPaused=!1,k.widgetView=f.TABLE,k.allowQueueStats=b.getAllowQueueStats(),k.allowCampaignStats=b.getAllowCampaignStats(),k.allowChatStats=b.getAllowChatStats(),k.allowAgentStats=b.getAllowAgentStats(),k.statsTypeDisabled=g,k.toggleView=h,k.isTableView=i,k.hideChart=j,function(){function c(a,b){b&&-1===k.products.indexOf(a)&&k.products.push(a)}k.selectedType=e.AGENT_DAILY,a.$watch(function(){return b.getAllowQueueStats()},function(a){k.allowQueueStats=a,c(e.QUEUE,a)}),a.$watch(function(){return b.getAllowCampaignStats()},function(a){k.allowCampaignStats=a,c(e.CAMPAIGN,a)}),a.$watch(function(){return b.getAllowChatStats()},function(a){k.allowChatStats=a,c(e.CHAT,a)}),a.$watch(function(){return b.getAllowAgentStats()},function(a){k.allowAgentStats=a,c(e.AGENT,a)}),a.$watch(function(){return k.selectedType},function(a){a===e.AGENT_DAILY&&(k.sessionService.scoreboardExpanded=!1),a===e.AGENT&&(k.widgetView=f.TABLE)})}()}a.$inject=["$scope","SessionSvc","CallSvc","ApplicationSvc","STATS_EVENTS","RTR_WIDGET_VIEWS"],angular.module("agent_ui.scoreboard",[]).controller("ScoreboardCtrl",a).constant("RTR_WIDGET_TYPES",{INBOUND:"inbound",OUTBOUND:"outbound",AGENT:"agent",CHAT:"chat"}).constant("RTR_WIDGET_VIEWS",{TABLE:"TABLE",LINE_CHART:"LINE_CHART"})}(),function(){"use strict";function a(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"scoreboard/shared/productDetailControl.tpl.html",scope:{statType:"=",paused:"=",widgetView:"="},controller:["$scope",function(a){function b(a){return angular.isDefined(a)&&parseInt(a,10)||0}a.data=c[a.statType],a.toInt=b,a.$watch("statType",function(){a.data=c[a.statType]})}],link:function(c,e,f){function g(){var b='<ng-switch on="statType">';_.each(Object.keys(d),function(a){var c=d[a].replace(/_/g,"-");b=b+"<"+c+' ng-switch-when="'+d[a]+'"></'+c+">"}),b+="</ng-switch>";var f=a(b)(c);e.append(f)}b(function(){g()})}}}a.$inject=["$compile","$timeout","StatsSvc","STATS_EVENTS"],angular.module("agent_ui.scoreboard.productDetailControl",[]).directive("productDetailControl",a).constant("RTR_WIDGET_TYPES",{INBOUND:"inbound",OUTBOUND:"outbound",AGENT:"agent",CHAT:"chat"}).constant("RTR_WIDGET_VIEWS",{TABLE:"TABLE",LINE_CHART:"LINE_CHART"})}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){h()&&c(function(){a.gridApi.core.refresh(),a.$apply()})}function h(){return a.widgetView===f.TABLE}function i(){return a.widgetView===f.LINE_CHART}function j(){_.each(a.chartData,function(a){a.data.length>100&&a.data.splice(100,a.data.length)})}a.redraw=g,a.isTableView=h,a.isLineChartView=i,a.limitDataLength=j,a.rowTemplate=function(){var a='<div class="custom-row">';return a+='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" ',a+='class="ui-grid-cell" ng-class="row.entity.ruleStyles"',a+="ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" ",a+="ui-grid-cell></div></div>"}(),a.errorRow="error-row",a.warningRow="warning-row",a.successRow="success-row",a.infoRow="info-row",a.gridOptions=null,function(){var c=b.$on("dashboardWidgetConfig",function(){d.custom(null,"factories/dialogs/shared/tableColumns.dialog.tpl.html","TableColumnsConfigCtrl as vm",{columns:function(){return a.gridOptions.columnDefs}}).then(function(b){a.gridOptions.columnDefs=b,e.saveDetails(b)})});a.$on("$destroy",function(){c()}),a.$watch("gridOptions",function(b){if(b){var c=a.gridOptions.columnDefs,d=e.getSavedAgentDashboardByType(e.selectedType);_.each(d.hiddenColumns,function(a){var b=_.findIndex(c,function(b){return b.field===a});b>-1&&(c[b].visible=!1)})}})}()}a.$inject=["$scope","$rootScope","$timeout","Dialog","DashboardSvc","RTR_WIDGET_VIEWS"],angular.module("agent_ui.scoreboard.productMetrics",[]).controller("ProductMetrics",a)}(),function(){"use strict";function a(a,b){this.previewContact={uii:a.uii,script:b,isPreview:!0}}a.$inject=["$stateParams","script"],angular.module("agent_ui.scripts.detail",[]).controller("ScriptsDetailCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"scripts",parent:"base.default",url:"/scripts",views:{"body@base.default":{templateUrl:"layout/views/twoPanel.tpl.html",controller:"ScriptsCtrl as vm"},"nav@base.default.scripts":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"},"left@base.default.scripts":{templateUrl:"scripts/scripts.list.tpl.html",controller:"ScriptsListCtrl as vm"},"middle@base.default.scripts":{templateUrl:"layout/components/middle.default.tpl.html",controller:"ScriptsCtrl as vm"}},children:[{name:"detail",url:"/detail/:scriptId",params:{uii:(new Date).getTime()},views:{"middle@base.default.scripts":{controller:"ScriptsDetailCtrl as vm",templateUrl:"scripts/scripts.detail.tpl.html"}},resolve:{script:["ScriptSvc","$stateParams",function(a,b){return b.uii=(new Date).getTime(),a.getScript(b.scriptId,null,"PREVIEW")}]}}]})}function b(){function a(){return""}function b(){return"description"}var c=this;c.getLabel=a,c.getIcon=b}a.$inject=["stateHelperProvider"],angular.module("agent_ui.scripts",["ui.router","ui.router.stateHelper"]).config(a).controller("ScriptsCtrl",b)}(),function(){"use strict";function a(a){var b=this;b.selectedScript={},b.scripts=a.getAvailableScripts()}a.$inject=["AgentSvc"],angular.module("agent_ui.scripts.list",[]).controller("ScriptsListCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){m.metrics=c[c.selectedType],c.saveSelectedType()}function j(a,c){b.$emit("dashboardWidgetConfig")}function k(a){m.dashboardTypes.push(a),m.dashboardTypes=_.union(m.dashboardTypes,[f.BLENDED]),c.addTypeToBlended(a)}function l(a,b){b.detail.view===m.rtrWidgetViews.TABLE?b.detail.view=m.rtrWidgetViews.LINE_CHART:b.detail.view=m.rtrWidgetViews.TABLE,a.stopPropagation()}var m=this;m.updateMetrics=i,m.showMetricConfig=j,m.changeDetailView=l,m.statsService=d,m.dashboardService=c,m.rtrWidgetViews=h,m.statsEvents=g,m.dashboardTypes=[],m.metrics=[],function(){m.dashboardTypes.push(f.DAILY),i();var b=a.$watch(function(){return e.getAllowQueueStats()},function(){k(f.INBOUND),b()}),c=a.$watch(function(){return e.getAllowCampaignStats()},function(){k(f.OUTBOUND),c()}),d=a.$watch(function(){return e.getAllowChatStats()},function(){k(f.CHAT),d()})}()}a.$inject=["$scope","$rootScope","DashboardSvc","StatsSvc","SessionSvc","DASHBOARD_TYPES","STATS_EVENTS","RTR_WIDGET_VIEWS"],angular.module("agent_ui.stats.metrics",[]).controller("StatsMetricsCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"stats",parent:"base.default.phone",url:"/stats",redirectTo:"base.default.stats.metrics",views:{"body@base.default":{templateUrl:"layout/views/fullWidth.tpl.html",controller:"StatsCtrl"},"nav@base.default.phone.stats":{templateUrl:"phone/phone.nav.tpl.html",controller:"PhoneCtrl as vm"}},children:[{name:"metrics",url:"/metrics",templateUrl:"stats/metrics/metrics.tpl.html",controller:"StatsMetricsCtrl as vm"}]})}function b(){}a.$inject=["stateHelperProvider"],angular.module("agent_ui.stats",["ui.router","ui.router.stateHelper"]).config(a).controller("StatsCtrl",b)}(),function(){"use strict";function a(a,b,c,d){function e(){c.manualSoftphoneReconnect=!1,f(),h.resetSoftphoneSession({maintainOH:null,autoStartOH:!0})}function f(){var a=b.instant("GENERICS.MESSAGES.OFFHOOK_RECONNECT_MSG");c.setStatusMessage(b.instant("GENERICS.MESSAGES.OFFHOOK_ERR",{detail:a}))}var g=this,h=c.getLibraryInstance();g.sessionService=c,g.softphoneService=d,g.tryReconnect=e}a.$inject=["$rootScope","$translate","SessionSvc","SoftphoneSvc"],angular.module("agent_ui.statusbar",[]).controller("StatusBarCtrl",a)}(),function(){"use strict";function a(a){a.setNestedState({name:"base.test",url:"test",public:!0,views:{"base@":{controller:"TestHarnessCtrl as vm",templateUrl:"testHarness/testHarness.tpl.html"}},data:{pageTitle:"Test Harness"}})}function b(a){function b(){a.isInitialized=!0,d(),a.Lib=new AgentLibrary(z.config),a.Lib.setCallback("closeResponse",k)}function c(){switch(z.methodType){case"authenticateAgentWithUsernamePassword":a.Lib.authenticateAgentWithUsernamePassword(z.props.username,z.props.password,z.props.platformId,g);break;case"authenticateAgentWithRcAccessToken":a.Lib.authenticateAgentWithRcAccessToken(z.props.rcAccessToken,z.props.tokenType,g);break;case"authenticateAgentWithEngageAccessToken":a.Lib.authenticateAgentWithEngageAccessToken(z.props.engageAccessToken,g);break;case"openSocket":a.Lib.openSocket(z.props.agentId,j);break;case"logoutAgent":a.Lib.logoutAgent(z.props.agentId,l);break;case"getAgentConfig":a.Lib.getAgentConfig(i);break;case"loginAgent":z.props.gateIds=null,z.props.chatIds=null,""!==z.props.gateIdsStr&&(z.props.gateIds=z.props.gateIdsStr.split(",")),""!==z.props.chatIdsStr&&(z.props.chatIds=z.props.chatIdsStr.split(",")),a.Lib.loginAgent(z.props.gateIds,z.props.chatIds,z.props.skillProfileId,z.props.outdialGroupId,z.props.dialDest,!1,h);break;case"offhookInit":a.Lib.offhookInit(m);break;case"offhookTerm":a.Lib.offhookTerm();break;case"manualOutdial":a.Lib.manualOutdial(z.props.destination,z.props.ringTime,z.props.callerId,z.props.countryId,z.props.gateId);break;case"cancelManualOutdial":a.Lib.manualOutdialCancel(z.props.uii);break;case"hangup":a.Lib.hangup(z.props.sessionId)}}function d(){z.config={authDest:z.props.authDest,callbacks:{openResponse:j,authenticateResponse:g,loginResponse:h,loginPhase1Response:i,offhookTermNotification:n,genericResponse:o,genericNotification:p,endCallNotification:q,newCallNotification:r,addSessionNotification:s,earlyUiiNotification:t,agentStats:u,agentDailyStats:v,campaignStats:w,queueStats:x,pendingDispNotification:y},isSecureSocket:z.props.isSecureSocket}}function e(b){z.socketResponse=JSON.stringify(b,null,2),a.$apply()}function f(){a.Lib.closeSocket()}function g(a){console.log("TestHarness: authenticate response received",a),e(a)}function h(a){console.log("TestHarness: login response received",a),e(a)}function i(b){console.log("TestHarness: loginPhase1 response received",b);for(var c=a.Lib.getAgentSettings(),d=0;d<c.availableAgentStates.length;d++){var f=c.availableAgentStates[d],g=""===f.agentAuxState?f.agentState:f.agentAuxState;z.states.push({label:g,value:f.agentState})}e(b)}function j(a){console.log("TestHarness: socket open response received",a),e(a)}function k(a){console.log("TestHarness: socket closed notification received",a),e(a)}function l(a){console.log("TestHarness: LOGOUT notification received",a)}function m(a){console.log("TestHarness: OFFHOOK_INIT notification received",a),e(a)}function n(a){console.log("TestHarness: OFFHOOK_TERM notification received",a),e(a)}function o(a){console.log("TestHarness: GENERIC response received",a),e(a)}function p(a){console.log("TestHarness: GENERIC notification received",a),e(a)}function q(a){console.log("TestHarness: END-CALL notification received",a),e(a)}function r(a){console.log("TestHarness: NEW-CALL notification received",a),z.currentCall=a,z.dispositions=a.outdialDispositions.dispositions,e(a)}function s(a){console.log("TestHarness: ADD-SESSION notification received",a),e(a)}function t(a){console.log("TestHarness: EARLY_UII notification received",a),e(a)}function u(a){z.props.showStats&&(console.log("TestHarness: AGENT stats received",a),e(a))}function v(a){z.props.showStats&&(console.log("TestHarness: AGENTDAILY stats received",a),e(a))}function w(a){z.props.showStats&&(console.log("TestHarness: CAMPAIGN stats received",a),e(a))}function x(a){z.props.showStats&&(console.log("TestHarness: GATE stats received",a),e(a))}function y(a){console.log("TestHarness: PENDING_DISP notification received",a),e(a)}var z=this;z.currentCall={},z.methodTypes=[{label:"Authenticate with Username/Password",value:"authenticateAgentWithUsernamePassword"},{label:"Authenticate with RC Access Token",value:"authenticateAgentWithRcAccessToken"},{label:"Authenticate with Engage Access Token",value:"authenticateAgentWithEngageAccessToken"},{label:"Open Socket",value:"openSocket"},{label:"Get Agent Config (Login Phase 1)",value:"getAgentConfig"},{label:"Login (Login Phase 2)",value:"loginAgent"},{label:"Hangup",value:"hangup"},{label:"Offhook - Begin",value:"offhookInit"},{label:"Offhook - End",value:"offhookTerm"},{label:"Manual Outdial - call",value:"manualOutdial"},{label:"Manual Outdial - cancel",value:"cancelManualOutdial"},{label:"Logout",value:"logoutAgent"}],z.states=[],z.methodType="authenticateAgentWithUsernamePassword",z.props={gateIdsStr:"",chatIdsStr:"",searchFields:[{key:"",value:""},{key:"",value:""}],isSecureSocket:!1,authDest:"http://localhost:81",showStats:!1},z.dataObj={},z.config={},z.sendMessage=c,z.closeSocket=f,z.initializeLibrary=b,a.$watch("vm.props",function(){d()},!0)}a.$inject=["stateHelperProvider"],b.$inject=["$scope"];var c=angular.module("agent_ui.testHarness",["ui.router","ui.router.stateHelper"]);c.config(a),c.controller("TestHarnessCtrl",b)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"toolbar/toolbar.tpl.html",controller:["$scope","ToolbarSvc",function(a,b){a.toolbarSvc=b}]}}angular.module("agent_ui.toolbar",[]).directive("toolbar",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",replace:!0,require:"^toolbar",templateUrl:"toolbar/widgets/agentControl/agentControl.tpl.html",link:function(l,m){function n(){e.logout({logoutEngageAuth:!0})}function o(a){l.showCaret=!0,g.cancel(s),a||(s=g(function(){l.showCaret=!1},400))}function p(){j.onCallOrPendingDisp()||(i.closeWidget(k.AGENT_CONTROL),h.go("base.default.updatelogin"))}function q(){r(),a.contrastMode?a.replaceCSSFile("agent-js.css","agent-js-contrast.css"):a.replaceCSSFile("agent-js-contrast.css","agent-js.css")}function r(){var b=f.getContrastModeData(),c=a.agentIndexForContrastMode();-1!==c?b[c].status=a.contrastMode:b.push({agentId:a.agentSettings.agentId,status:a.contrastMode}),f.setContrastModeData(b)}l.agentService=a,l.agent=a.agentSettings,l.agentPermissions=a.agentPermissions,l.chatService=c,l.callService=j,l.toolbarService=i,l.isSupervisor=a.isSupervisor(),l.dialGroupName=angular.isUndefined(d.outboundSettings.outdialGroup.dialGroupName)?"N/A":d.outboundSettings.outdialGroup.dialGroupName,l.profileName=angular.isUndefined(b.inboundSettings.skillProfile.profileName)?"N/A":b.inboundSettings.skillProfile.profileName,l.showCaret=!1;var s=g(function(){});l.logOut=n,l.updateLogin=p,l.onSwitchContrastMode=q,l.toggleSubMenu=o,angular.element(window.document).off("mouseup").on("mouseup",function(a){0===jQuery(a.target).closest(".agent-control-widget").length&&(i.closeWidget(k.AGENT_CONTROL),angular.element(window.document).off("mouseup"))})}}}a.$inject=["AgentSvc","AcdSvc","ChatSvc","OutboundSvc","AuthService","SessionSvc","$timeout","$state","ToolbarSvc","CallSvc","TOOLBAR_WIDGETS"],angular.module("agent_ui.toolbar.widget.agentControl",[]).directive("agentControl",a)}(),function(){"use strict";function a(a,b,c){return{restrict:"E",replace:!0,templateUrl:"toolbar/widgets/callControl/callControl.tpl.html",controller:"DialPadCtrl as vm",scope:!0,link:function(d,e){function f(){return b.onCall&&!c.isMonitoring}d.visible=!0,d.widget=!0,e.draggable({containment:".base-wrapper"}),d.$on("$destroy",function(){g(),h(),i()});var g=a.$on("$stateChangeStart",function(a,c){var e=!1;f()&&c&&(b.dialPadHidden&&0===c.name.indexOf("base.default.phone.dialpad")?e=!0:-1===c.name.indexOf("base.default.phone.dialpad")&&(e=!0)),d.visible=e}),h=a.$watch(f,function(a){a||(d.visible=!1)}),i=a.$watch(function(){return b.dialPadHidden},function(a){d.visible=f()&&a})}}}a.$inject=["$rootScope","CallSvc","AgentSvc"],angular.module("agent_ui.toolbar.widget.callControl",[]).directive("callControl",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,require:"^toolbar",templateUrl:"toolbar/widgets/chatControl/chatControl.tpl.html",controller:["$scope","$timeout","$q","ChatSvc","CfChatSvc","SessionSvc","ChatUtils",function(a,b,c,d,e,f,g){function h(){e.currentView="LIST",a.chatService.selectedChatWidget={},e.currentWidgetRoom=null}function i(b){a.widget.listView=!1,e.goToChatRoom(b)}function j(){e.currentView="CONFIG"}function k(a){e.listViewType=a}function l(){n(e.currentWidgetRoom.agentMessage)&&(e.sendChat(e.currentWidgetRoom.roomId,e.currentWidgetRoom.agentMessage),e.currentWidgetRoom.agentMessage="")}function m(){b(function(){a.$apply();var b=$(".chat-content-view .chat-messages");b[0]&&b.scrollTop(b[0].scrollHeight)})}function n(a){return(a=a&&a.trim()||"")&&a.trim().length>0}function o(){f.setChatOptions(e.chatOptions);var a=e.chatOptions.alias;a&&a.length>0&&e.setAlias(a)}a.cfChatService=e,a.chatService=d,a.sendChat=l,a.goToRoom=i,a.goToListView=h,a.goToConfigChat=j,a.goToListType=k,a.internalMsgDecorator=g.chatMsgInternalDecorator,function(){e.createRooms(),m(),a.$watch(function(){return e.chatOptions},function(a){a&&o()},!0),a.$watch(function(){if(e.currentWidgetRoom)return e.chats[e.currentWidgetRoom.roomId].messages.length},function(){m()},!0)}()}],link:function(a,b){}}}function b(){return function(a,b,c){return c=c||"",_.filter(a,function(a){var d=a.type===b;return"PRIVATE"===b?d&&a.roomName.toLowerCase().indexOf(c.toLowerCase())>-1:d})}}
angular.module("agent_ui.toolbar.widget.chatControl",[]).directive("chatControl",a).filter("chatRoomType",b)}(),function(){"use strict";function a(a,b,c,d,e,f,g){return{restrict:"E",replace:!0,templateUrl:"toolbar/widgets/monitorControl/monitorControl.tpl.html",scope:!0,controller:"MonitorDetailCardCtrl",link:function(h,i){function j(a,b){return k()&&!l()&&(a&&"base.default.monitoring.agent"!==a.name||"base.default.monitoring.agent"===a.name&&b.agentId!==e.monitoredAgent.agentId)}function k(){return f.isMonitoring&&e.call.type&&"bargeIn"!==e.call.type}function l(){return g.onCall&&g.currentCall.isMonitoring&&"FULL"===g.currentCall.monitoringType}h.visible=!1,h.monitorService=e,h.agent=e.monitoredAgent,h.uii=e.monitoredAgent.uii,h.$watch(function(){return e.monitoredAgent},function(a,b){a!==b&&(h.agent=a,h.uii=a.uii)}),h.goToAgent=function(){b.go("base.default.monitoring.agent",{agentId:h.agent.agentId})},function(){i.draggable({containment:".base-wrapper"});var f=a.$on("$stateChangeStart",function(a,b,c){h.visible=j(b,c)}),g=a.$watch(k,function(a,d){a!==d&&(h.visible=a&&!l()&&("base.default.monitoring.agent"!==b.current.name||c.agentId!==e.monitoredAgent.agentId))}),m=a.$on(d.AGENT,function(a,b){var c=_.find(b,function(a){return a.agentId===e.selectedAgent.agentId});c&&(h.selectedAgent=c)});h.$on("$destroy",function(){f(),g(),m()})}()}}}a.$inject=["$rootScope","$state","$stateParams","STATS_EVENTS","MonitorSvc","AgentSvc","CallSvc"],angular.module("agent_ui.toolbar.widget.monitorControl",[]).directive("monitorControl",a)}(),function(){"use strict";function a(a,b,c,d){return{restrict:"E",replace:!0,templateUrl:"toolbar/widgets/supervisorBargeinControl/supervisorBargeinControl.tpl.html",scope:!0,link:function(e,f){function g(a,b){c.holdSession(!a,b)}function h(){b.go("base.default.monitoring.agent",{agentId:d.monitoredAgent.agentId})}function i(a){if(c.onCall&&c.currentCall&&c.currentCall.isMonitoring&&"FULL"===c.currentCall.monitoringType){return a>0||c.onCall}}e.monitorService=d,e.callService=c,e.hold=g,e.goToAgent=h,function(){e.visible=!1,f.draggable({containment:".base-wrapper"});var b=a.$watch(function(){return _.keys(c.getTransferSessions()).length},function(a){e.sessions=c.getTransferSessions(),e.visible=i(a)}),d=a.$watch(function(){return c.onCall},function(a){var b=_.keys(c.getTransferSessions()).length;e.sessions=c.getTransferSessions(),e.visible=i(b)});e.$on("$destroy",function(){b(),d()})}()}}}a.$inject=["$rootScope","$state","CallSvc","MonitorSvc"],angular.module("agent_ui.toolbar.widget.supervisorBargeinControl",[]).directive("supervisorBargeinControl",a)}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:"toolbar/widgets/transferSessionsControl/transferSessionsControl.tpl.html",scope:!0,link:function(c,d){function e(a,c){b.holdSession(!a,c)}function f(a){if(b.currentCall&&b.currentCall.isMonitoring){return _.filter(c.sessions,function(a){return a.uii!==b.currentCall.uii}).length>0}return a>0}function g(){var a=Object.keys(c.sessions);a.length>0&&a.forEach(function(a){var b=c.sessions[a],d=b.destination+"";-1!=d.indexOf("@RC_EXT")&&(b.isCorpExtension=!0,b.extension="Extension "+d.substring(d.indexOf("*")+1,d.indexOf("@")))})}c.callService=b,c.hold=e,function(){d.draggable({containment:".base-wrapper"});var e=a.$watch(function(){return _.keys(b.getTransferSessions()).length},function(a){c.sessions=b.getTransferSessions(),c.visible=f(a),g()});c.$on("$destroy",function(){e()})}()}}}a.$inject=["$rootScope","CallSvc"],angular.module("agent_ui.toolbar.widget.transferSessionsControl",[]).directive("transferSessionsControl",a)}(),function(){"use strict";function a(a,b){return{restrict:"A",replace:!0,require:"^toolbar",scope:{widget:"="},template:'<div class="wrapper"></div>',link:function(c,d){!function(){b(function(){d.html(c.widget.html),a(d.contents())(c)})}()}}}a.$inject=["$compile","$timeout"],angular.module("agent_ui.toolbar.widget",[]).directive("widget",a)}(),function(){"use strict";function a(a,growl){return{restrict:"E",templateUrl:"directives/audioPlayer/audioPlayer.tpl.html",scope:{src:"="},replace:!0,controller:"AudioPlayerCtrl",link:function(b,c,d,e){function f(){b.recording?k():(j(),b.isPlaying=!0),b.recording.play()}function g(){b.isPlaying=!1,b.recording.pause(),l()}function h(){l(),b.currentTime=(b.slider.progressPercent*b.recordingLength/100).toFixed(1),b.recording.seek(b.currentTime),k()}function i(){b.isPlaying&&b.isOpen&&g(),b.isOpen=!b.isOpen}function j(){b.loading=!0,b.recording=new Howl({src:[b.buildURL()],buffer:!0,format:["mp3","pcm"],pool:1,onload:function(){b.loading=!1,k()},onloaderror:function(a,c){growl.error("AUDIO_PLAYER.RECORDING_ERR"),b.loading=!1},onend:function(){b.isPlaying=!1,b.slider.progressPercent=0,b.currentTime=0,l()}})}function k(){0===b.recordingLength&&(b.recordingLength=b.recording._duration.toFixed(1)),b.playbackInterval=a(function(){b.currentTime++,b.slider.progressPercent=Math.round(b.currentTime/b.recordingLength*100),b.slider.progressPercent>100&&(b.isPlaying=!1,b.slider.progressPercent=0,b.currentTime=0,l())},1e3),b.isPlaying=!0}function l(){b.playbackInterval&&a.cancel(b.playbackInterval)}b.recordingLength=0,b.slider={progressPercent:0},b.currentTime=0,b.isOpen=!1,b.loading=!1,b.isPlaying=!1,b.pause=g,b.play=f,b.seek=h,b.togglePopover=i,b.$on("$destroy",function(){b.recording&&g()})}}}function b(a,b){function c(){var b="/voice/api/v1/agent/";return b+=d.accountId,b+="/recordingAccess?fileUrl="+encodeURIComponent(a.src),b+="&guid=",b+=d.guid,b+="&access_token=",b+=EngageAuth.Session.getAccessToken()}a.buildURL=c;var d=b.agentSettings}a.$inject=["$interval","growl"],b.$inject=["$scope","AgentSvc"],angular.module("agent_ui.directives.audioPlayer",[]).directive("audioPlayer",a).controller("AudioPlayerCtrl",b)}(),function(){function a(){return{restrict:"E",replace:!0,templateUrl:"directives/callHistory/callHistoryCard.tpl.html",scope:{call:"="},controller:"CallHistoryCardCtrl",link:function(a,b,c,d){}}}function b(a,b,c,d,e){var f="-",g=a.call.callPacket;a.headerValue=function(){var c=a.call.destination,d=b.instant("SOFTPHONE.MANUAL_OUTDIAL.UNKNOWN"),e=g&&g.baggage&&g.baggage.firstName||d,f=g&&g.baggage&&g.baggage.lastName||d;return g&&(c=e!==d||f!==d?e+" "+f:g.baggage.ani),c}(),a.disposition=function(){var b=f;return a.call.errorPacket?b=a.call.errorPacket.leadState:a.call&&a.call.dispositionPacket&&(b=a.call.dispositionPacket.disposition),b}(),a.source=function(){var c={};return a.call.type===d.MANUAL?g&&g.queue&&g.queue.name?(c.type=b.instant("GENERICS.LABELS.QUEUE.QUEUE"),c.value=g.queue.name):(c.type=b.instant("SOFTPHONE.MANUAL_OUTDIAL.TITLE"),c.value=b.instant("SOFTPHONE.MANUAL_OUTDIAL.OUTBOUND")):g&&g.queue?g.queue.isCampaign?(c.type=b.instant("PHONE.CALLBACKS.CAMPAIGN"),c.value=g.queue.name):(c.type=b.instant("GENERICS.LABELS.QUEUE.QUEUE"),c.value=g.queue.name):a.call.lead&&a.call.lead.campaignId?(c.type=b.instant("PHONE.CALLBACKS.CAMPAIGN"),c.value=e("campaignNameFromId")(a.call.lead.campaignId)):a.call.type===d.MISSED&&(c.type=b.instant("PHONE.MODALS.DIRECT_XFER.MISSED.TITLE_ALT"),c.value=f),c}(),a.outboundIcon=function(){return a.call.type===d.OUTBOUND||a.call.type===d.MANUAL}(),a.inboundIcon=function(){return a.call.type===d.INBOUND}(),a.dateFormat=c}b.$inject=["$scope","$translate","DATE_FORMATS","CALL_TYPES","$filter"],angular.module("agent_ui.directives.call_history.card",[]).directive("callHistoryCard",a).controller("CallHistoryCardCtrl",b)}(),function(){"use strict";function a(a){return{restrict:"A",transclude:!0,link:function(b,c,d,e,f){f(function(d){c.html();var e=d[1];c.append(e);var f=_.find(d,function(a){return angular.isDefined(a.tagName)&&(a.tagName.indexOf("SELECT")>=0||a.tagName.indexOf("INPUT")>=0)});f=angular.element(f);var g=h(c,f),i=g.formName+"."+g.name,j="<div class='pull-right error-message animate-fade-slide' ng-messages='"+i+".$error' role='alert'><div ng-messages-include='directives/cfAgentInputsMessages.tpl.html'></div></div>";c.append(j),c.removeAttr("agent-input"),c.attr("ng-class","{ error: ("+i+".$invalid && "+i+".$touched) || ("+i+".$invalid && "+g.formName+".$submitted) }"),a(c)(b),c.append(f),f.off("focus").on("focus",function(){$(e).addClass("focused")}).off("blur").on("blur",function(){$(e).removeClass("focused")})})}}}function b(){return{restrict:"A",scope:{validator:"="},require:"ngModel",link:function(a,b,c,d){b.off("blur").on("blur",function(e){if(void 0!==c.validator&&"function"==typeof a.validator){a.validator(b[0].value).then(function(a){d.$setValidity("unique",a)})}})}}}function c(){return{restrict:"A",scope:{regex:"=agentInputRegex"},require:"ngModel",link:function(a,b,c,d){d.$formatters.push(function(b){if(angular.isDefined(b)){return b.toLowerCase().replace(new RegExp(a.regex,"g"),"")}return b}),d.$parsers.push(function(b){var c=b.toLowerCase().replace(new RegExp(a.regex,"g"),"");return d.$setViewValue(c),d.$commitViewValue(),d.$render(),c})}}}function d(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){c.addClass("clearable"),b.show=!1,b.$watch(function(){return e.$modelValue},function(a){b.show=a&&a.toString().length>0}),b.clear=function(){e.$setViewValue(""),e.$commitViewValue(),e.$render()};var f=angular.element("<i ng-show='show' ng-click='clear()' class='fa fa-times-circle clear-input'></i>"),g=a(f)(b);c.after(g)}}}function e(a){return{restrict:"A",link:function(b,c,d){a(function(){c[0].focus()})}}}function f(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return parseInt(a,10)}),d.$formatters.push(function(a){return""+a})}}}function g(){return{restrict:"E",required:"^ngModel",scope:{bindedModel:"=ngModel",editorDisabled:"="},template:function(a,b){return'<ng-quill-editor max-length="charLimit" toolbar="true" ng-model="bindedModel" bounds="document.body" link-tooltip="true" toolbar-entries="{{ opts }}"read-only="editorDisabled" save="html"></ng-quill-editor>'},link:{pre:function(a,b,c,d){a.opts="bold italic underline strike align","true"!==c.hideFont&&(a.opts+=" font size"),"true"!==c.hideColor&&(a.opts+=" color"),"true"!==c.hideBackground&&(a.opts+=" background"),"true"!==c.hideList&&(a.opts+=" list bullet"),c.showLinkTool&&(a.opts+=" link")}}}}function h(a,b){var c={formName:$(a).closest("form").attr("name"),name:"",id:""};return angular.isDefined(b)&&angular.isDefined(b[0])&&($.each(b[0].attributes,function(){var a=this.name,b=this.value;"name"===a?c.name=b:"id"===a?c.id=b:"validator"===a&&(c.validator=b)}),""===c.name&&(c.name=c.id),""===c.name&&console.warn("the name or id attr is required for the agent-input directive to work")),c}a.$inject=["$compile"],d.$inject=["$compile"],e.$inject=["$timeout"],angular.module("agent_ui.directives.agentInputs",[]).directive("agentInput",a).directive("validator",b).directive("agentInputRegex",c).directive("clearInput",d).directive("autofocus",e).directive("convertToNumber",f).directive("textEditor",g)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"directives/cfAgentLoader.tpl.html",link:function(a,b,c){}}}angular.module("agent_ui.directives.cfAgentLoader",[]).directive("cfAgentLoader",a)}(),function(){"use strict";function a(a){return{restrict:"E",template:'<script-render ng-if="contactSource && contactSource.script" data-uii="{{contactSource.uii}}" data-config="contactSource.script" data-callbacks="contactSource.callbacks"></script-render>',scope:{contactSource:"="},link:function(b,c,d){function e(){return b.contactSource.isChat}c.on("$destroy",function(){b.$destroy()});var f=a.getCallData,g=a.setScriptResultCall,h=a.requestDisposition,i=a.changeCallScript;b.contactSource.isChat&&(f=a.getChatData,g=a.setScriptResultChat,h=a.requestDispositionChat,i=a.changeChatScript);var j={setScriptResult:g,getScriptData:f,requestDisposition:h,changeScript:i,setRecordingState:a.setRecordingState,setHoldState:a.setHoldState,requestColdRequeue:a.requestColdRequeue,requestWarmRequeue:a.requestWarmRequeue,requestHangup:a.requestHangup,requestColdTransfer:a.requestColdTransfer,requestWarmTransfer:a.requestWarmTransfer,allowSendKbArticle:e,sendKbArticle:a.sendKbArticle,getKnowledgeBaseArticles:a.getKnowledgeBaseArticles};b.contactSource.isPreview&&(_.each(j,function(b,c){j[c]=a.mockCallback}),j.getScriptData=a.getMockData,j.allowSendKbArticle=function(){return!1},j.getKnowledgeBaseArticles=a.getKnowledgeBaseArticles,b.contactSource.isLeadPreview&&(j.setScriptResult=a.setScriptResultLead,j.getScriptData=a.getSelectedLeadData)),b.contactSource.callbacks=j}}}a.$inject=["ScriptRenderSvc"],angular.module("agent_ui.directives.cfAgentScript",[]).directive("cfAgentScript",a)}(),function(){"use strict";function a(){return{restrict:"E",template:'<iframe class="agent-script" class="externalUrl" id="render" name="render" target="render" ng-src="{{ trustSrc(appUrl) }}" sandbox="allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts"></iframe>',scope:{appUrl:"="},controller:["$scope","$sce",function(a,b){function c(a){return a=a.replace("parent:",""),b.trustAsResourceUrl(a)}a.trustSrc=c}],link:function(a,b,c){a.$on("$destroy",function(){b.empty()})}}}angular.module("agent_ui.directives.cfAgentScript.frame",[]).directive("cfAgentScriptFrame",a)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"directives/cfChatMessaging.tpl.html",controller:"CfChatMessaging",scope:{chat:"="},link:function(a,b,c){}}}function b(a,b,c,d,e,f,g){function h(){b.chat&&b.chat.inactive&&b.chat.pendingDisp&&p()}function i(){b.monitorMessageOpen=!b.monitorMessageOpen}function j(){if(!b.chat.pendingInactive&&!b.chat.inactive&&l(b.chat.agentMessage)){r=!0;var a=b.chat.isMonitoring||!1;e.sendMessage(b.chat.uii,b.chat.agentId,b.chat.agentMessage,a)}}function k(){l(b.chat.agentMessage)&&!b.chat.isMonitoring&&e.typing(b.chat.uii,b.chat.agentMessage)}function l(a){return(a=a&&a.trim()||"")&&a.trim().length>0}function m(){c(function(){b.$apply();var a=$(".chat-messaging #chatDisplay"+b.chat.uii+" .scrollable-wrapper");a.animate({scrollTop:a.find(".scroll-height").height()})})}function n(){d.confirm(null,null,"CHAT.CONFIRM_END_CHAT").then(function(){b.chat.endedByAgent=!0,e.agentEndChat(b.chat.agentId,b.chat.uii)})}function o(){e.allowRequeue()&&(b.requeueOpen=!0,d.custom(null,"chat/modals/requeueModal.tpl.html","RequeueChatCtrl").then(function(){b.requeueOpen=!1,b.chat.endedByAgent=!0,b.chat.requeueSent=!0},function(){b.requeueOpen=!1}))}function p(){e.allowDisposition()&&(s&&(c.cancel(s),s=null),b.dispositionOpen||(b.dispositionOpen=!0,e.openDispositionModal().then(function(){b.dispositionOpen=!1})))}function q(){m()}var r=!0;b.toggleMonitorMessage=i,b.sendChat=j,b.sendTypingMsg=_.debounce(k,1e3),b.agentEndChat=n,b.openRequeue=o,b.openDisposition=p,b.transcriptComplete=q,b.msgDecorator=g.chatMsgExternalDecorator,b.chatService=e,function(){m(),h(),b.chat.unreadCount=0,c(function(){jQuery("#agentChatMsg"+b.chat.uii).off("keydown").on("keydown",function(a){13===a.which&&(b.sendChat(),a.preventDefault())})})}(),b.$watch(function(){return b.chat.uii},function(a,b){a&&b&&a!==b&&(m(),h())},!0);var s;b.$watch(function(){return b.chat.inactive},function(a,d){a!==d&&a?s=b.chat.endedByAgent?c(h,0):c(h,15e3):a!==d&&d&&s&&(c.cancel(s),s=null)}),b.$on("$destroy",function(){t(),u()});var t=a.$on(f.CHAT_MESSAGE,function(a,c){c.uii===b.chat.uii&&m()}),u=a.$on(f.CHAT_TYPING,function(a,c){c.uii===b.chat.uii&&m()})}b.$inject=["$rootScope","$scope","$timeout","Dialog","ChatSvc","CHAT_EVENTS","ChatUtils"],angular.module("agent_ui.directives.cfChatMessaging",[]).directive("cfChatMessaging",a).controller("CfChatMessaging",b)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"directives/cfChatMessagingSend.tpl.html",controller:"CfChatMessaging",link:function(a,b,c){}}}angular.module("agent_ui.directives.cfChatMessagingSend",[]).directive("cfChatMessagingSend",a)}(),function(){"use strict";function a(a){return{restrict:"E",templateUrl:"directives/cfChatMessagingSendMonitoring.tpl.html",controller:"CfChatMessaging",link:function(a,b,c){}}}a.$inject=["$timeout"],angular.module("agent_ui.directives.cfChatMessagingSendMonitoring",[]).directive("cfChatMessagingSendMonitoring",a)}(),function(){"use strict";function a(a){return{priority:1,restrict:"E",require:"ngModel",replace:!0,template:'<div class="input-group clear-messages"><input class="form-control" ui-mask="{{ ::getMask() }}"ui-options="{allowInvalidValue: true}"date-time-format format="{{ format }}" min-date="minDate" max-date="maxDate" ng-model="ngModel"ng-model-options="{ updateOn: \'blur\' }"ng-required="required" ng-disabled="{{ disabled }}" ng-change="onChange"name="{{ name }}"><span class="input-group-btn"><button class="datepickerbutton btn btn-default" type="button" ng-disabled="{{ disabled }}"><i class="fa fa-fw" ng-class="::getType()"></i></button></span></div>',scope:{minDate:"=",maxDate:"=",onChange:"=",format:"@",ngModel:"=",disabled:"@",required:"@",appendToBody:"@"},controller:["$scope","$element","DATE_FORMATS",function(a,b,c){function d(){return a.format}function e(){return a.picker}!function(){a.format=a.format?a.format:c.DATE;var d="true"==a.appendToBody;b.datetimepicker({format:a.format,keepInvalid:!0,useCurrent:!0,timeZone:"",widgetParent:d?"body":b}),d&&b.on("dp.show",function(a){var c=$("body").find(".bootstrap-datetimepicker-widget:last"),d=b.offset().top+b.outerHeight(),e=b.offset().top,f=b.offset().left,g={left:f+"px","z-index":6e3};c.hasClass("bottom")?(g.top=d+"px",g.bottom="auto"):(g.top="auto",g.bottom=e+"px"),c.css(g)}),b.on("dp.change",function(b){a.dateSelected=b.date}),a.picker=b.data("DateTimePicker")}(),a.getFormat=d,a.getPicker=e,a.$watch(function(){return a.maxDate},function(b){var c=moment(b);b&&c.isValid()&&a.picker.maxDate(c)}),a.$watch(function(){return a.minDate},function(b){var c=moment(b);b&&c.isValid()&&a.picker.minDate(c)}),this.$scope=a}],link:function(b,c,d,e){function f(){var c="fa-calendar";return b.format!==a.TIME&&b.format!==a.HOUR||(c="fa-clock-o"),c}function g(){var c=b.format.replace(/[A-Za-z]/g,"9");return b.format===a.DATE_TIME?c="99/99/9999 99:99 **":b.format===a.TIME?c="99:99 **":b.format===a.HOUR?c="99 **":b.format===a.DATE_TIME_SECONDS&&(c="99/99/9999 99:99:99 **"),c}b.name=d.name,c.removeAttr("name"),c.removeClass("form-control"),b.getType=f,b.getMask=g}}}function b(a){return{priority:102,restrict:"A",require:["ngModel","^cfDateTimePicker"],scope:{minDate:"=",maxDate:"=",format:"@",ngModel:"=",disabled:"="},link:function(b,c,d,e){function f(a){var c=moment(a);return c.isValid()&&b.picker.date(c),c}function g(){a(function(){e[0].$setValidity("required",!0),e[0].$setValidity("invalid",!0),e[0].$setValidity("min",!0),e[0].$setValidity("max",!0)})}function h(a){if(!d.required&&!a)return!0;var c=moment(a,b.format);return c.isValid()?b.minDate&&c.isBefore(moment(b.minDate))?(e[0].$setValidity("min",!1),!1):!b.maxDate||!c.isAfter(moment(b.maxDate))||(e[0].$setValidity("max",!1),!1):(e[0].$setValidity("invalid",!1),!1)}b.format=e[1].$scope.getFormat(),b.picker=e[1].$scope.getPicker(),b.$watch(function(){return e[1].$scope.dateSelected},function(a){e[0].$setViewValue(""),a&&(a=moment.isMoment(a)?a.format(b.format):moment(a).format(b.format),e[0].$setViewValue(a)),e[0].$commitViewValue(),e[0].$render()}),e[0].$parsers.unshift(function(a){return a?moment(a,b.format).format(b.format):""}),e[0].$parsers.push(function(a){if(h(a)){g();var c=a;return a&&(c=new Date(moment(a,b.format).format()),f(c)),c}return a}),e[0].$formatters.unshift(function(a){return a}),e[0].$formatters.push(function(a){return"MULTI"===a?(g(),""):a?f(a).format(b.format):""})}}}a.$inject=["DATE_FORMATS"],b.$inject=["$timeout"],angular.module("agent_ui.directives.cfDateTimePicker",[]).directive("cfDateTimePicker",a).directive("dateTimeFormat",b).constant("DATE_FORMATS",{DATE:"MM/DD/YYYY",PRETTY_DATE:"MMM Do, YYYY",PRETTY_DATE_TIME:"MMM Do, YYYY  hh:mm a",PRETTY_DATE_TIME_SECONDS:"MMM Do, YYYY  hh:mm:ss a",DATE_TIME:"MM/DD/YYYY  hh:mm a",DATE_TIME_SECONDS:"MM/DD/YYYY  hh:mm:ss a",TIME:"hh:mm a",TIME_1:"hh:mm A",HOUR:"hh a",REPORT_TIME:"HH:mm:ss.SSS",CUSTOM_DATE:"MMM DD, YYYY"})}(),function(){"use strict";function a(a){return{scope:{getHelpString:"&",dynamicValObj:"=",disable:"@"},link:function(b,c,d){function e(){"true"===b.disable?c.bind("click.disableLink",function(a){return"true"!==b.disable||(a.preventDefault(),!1)}):c.unbind("click.disableLink")}function f(){a(b.helpString,b.dynamicValObj).then(function(a){b.helpText=a,void 0!==$(b.elementId).data("bs.popover")?$(b.elementId).data("bs.popover").options.content=b.helpText:$(b.elementId).popover({html:!0,content:b.helpText,trigger:d.trigger,placement:d.location,container:"body"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css("max-width","300px")})},function(a){})}b.elementId="#"+c.attr("id"),b.getHelpString()&&(b.helpString=b.getHelpString()(b.elementId)),b.setupPopover=f,b.toggleLink=e,void 0===d.location&&(d.location="right"),void 0===d.trigger&&(d.trigger="hover"),b.toggleLink(),b.$watch("disable",function(a){"true"===a?(c.addClass("not-active"),c.css("cursor","help"),b.getHelpString()&&(b.helpString=b.getHelpString()(b.elementId),b.setupPopover()),b.toggleLink()):(c.removeClass("not-active"),c.css("cursor","pointer"),void 0!==$(b.elementId).data("bs.popover")&&($(b.elementId).data("bs.popover").options.content=""),b.toggleLink())},!0)}}}a.$inject=["$translate"],angular.module("agent_ui.directives.disableLink",["ui.router"]).directive("cfDisableLink",a)}(),function(){"use strict";function a(){return{restrict:"A",link:function(a,b,c){b.outerHeight(45).css("padding","10px"),b.off("keydown").on("keydown",function(a){"true"===c.ignoreEnter&&13===a.which&&a.preventDefault()}).on("input",function(){$(this).height(1);var a=$(this).prop("scrollHeight")-parseInt($(this).css("padding-top"))-parseInt($(this).css("padding-bottom"));a<23?a=23:a>278&&(a=278),$(this).height(a)})}}}angular.module("agent_ui.directives.growingHeightInput",[]).directive("cfGrowingHeightInput",a)}(),function(){"use strict";angular.module("agent_ui.directives.helptext",["ui.router"]).directive("cfFormLabelHelp",["$translate","$timeout",function(a,b){return{scope:{helpString:"=",dynamicValObj:"="},link:function(b,c,d){void 0===b.helpString?b.helpTranslation=d.labelText+"_HELP":b.helpTranslation=b.helpString,void 0===d.location&&(d.location="right"),void 0===d.trigger&&(d.trigger="hover click"),a(d.labelText).then(function(a){b.labelText=a}),b.setupTooltip=function(){a(b.helpTranslation,b.dynamicValObj).then(function(a){if(b.helpText=a,void 0!==$("#"+c.attr("id")).data("bs.popover"))$("#"+c.attr("id")).data("bs.popover").options.content=b.helpText;else{var e=angular.isDefined(c.attr("id"))?c.attr("id"):b.helpTranslation.replace(/\./g,"_");c.attr("id",e),c.css("cursor","help"),c.html("<a>"+b.labelText+' <i class="fa fa-question-circle"></i></a>'),$("#"+e).popover({html:!0,content:b.helpText,trigger:d.trigger,placement:d.location,container:"body"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css("max-width","600px")})}},function(a){c.text(b.labelText)})},b.$watch("helpString",function(a,c){a!=c&&(b.helpTranslation=a,b.setupTooltip())},!0),b.setupTooltip()}}}])}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",scope:{destination:"="},templateUrl:"directives/cfHostnameLink.tpl.html",controller:"cfHostnameLinkCtrl",link:function(a,b,c){}}}function b(a,b){function c(){b.open(d,"_blank")}var d=a.destination.replace("parent:","")||"";a.parser=document.createElement("a"),a.parser.href=d,a.openAppUrl=c}b.$inject=["$scope","$window"],angular.module("agent_ui.directives.cfHostnameLink",[]).directive("cfHostnameLink",a).controller("cfHostnameLinkCtrl",b)}(),function(){"use strict";function a(a,b){function c(c){b(function(){a.chart.setSize(c.width,c.height)})}a.widgetStyle={color:"#7b7b7b",fontSize:"14px"},b(function(){a.$on("chart:newData",a.dataCallback)}),a.$on("chart:initChart",function(b,c){a.chart.destroy(),a.initChart()}),a.$on("dashboard:resizeWidgets",function(a,b){c(b)})}a.$inject=["$scope","$timeout"],angular.module("agent_ui.directives.charts.controller",[]).controller("ChartCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,template:'<div class="chart-wrapper"></div>',controller:"ChartCtrl",link:function(a,b,c){function d(){a.chart=Highcharts.chart(b[0],{chart:{type:"line"},exporting:{buttons:{contextButton:{symbolStroke:a.widgetStyle.color}}},plotOptions:{line:{marker:{enabled:!1}}},xAxis:{type:"datetime",lineColor:a.widgetStyle.color,tickColor:a.widgetStyle.color,dateTimeLabelFormats:{millisecond:"%A, %b %e, %I:%M:%S %p",second:"%I:%M:%S %p",minute:"%I:%M %p",hour:"%I:%M %p"}},yAxis:{min:0,gridLineColor:a.widgetStyle.color,title:{text:null}},tooltip:{shared:!0,followPointer:!0,followTouchMove:!0,dateTimeLabelFormats:{millisecond:"%A, %b %e, %I:%M:%S %p",second:"%I:%M:%S %p",minute:"%I:%M %p",hour:"%I:%M %p"}}})}function e(b,c){angular.isDefined(a.chart)&&(a.chart.series.length?(_.each(a.chart.series,function(a){var b=a.data.length>500,d=_.find(c,function(b){return b.name===a.name});d&&a.addPoint(d.data[0],!1,b)}),a.chart.redraw()):_.each(c,function(b){a.chart.addSeries({name:b.name,data:b.data.reverse(),borderColor:a.widgetStyle.color})}))}a.dataCallback=e,a.initChart=d,d()}}}angular.module("agent_ui.directives.charts.lineChart",[]).directive("lineChart",a)}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",templateUrl:"directives/dashboard/bigNumber.tpl.html",scope:{source:"=",selected:"=",options:"="},link:function(a,b,c){},controller:"bigNumberCtrl"}}function b(a,b,c,d,e,f){function g(c){a.key=c,a.selected=c.key,b(function(){e.saveMetrics(a.source)})}function h(){var b=a.key.key.split("."),d=c[a.source][0],e="totalSafeDials"===b[0];return d?(e&&(d.totalSafeDials=d.totalPreviewDials),_.each(b,function(a){d=d[a]})):d=0,i(d)}function i(b){var c=a.key.type,e="";switch(c){case f.NUMBER:e=d.formatNumber(b);break;case f.TIME:e=d.formatTime(b);break;case f.AVERAGE:e=d.formatPercentage(b);break;default:e=b}return e}function j(){return _.find(a.options,function(b){return b.key===a.selected})}a.statsService=c,a.statsDataTypes=f,a.getData=h,a.updateKey=g,a.$watch("selected",function(){a.key=j()})}b.$inject=["$scope","$timeout","StatsSvc","Utils","DashboardSvc","STATS_DATA_TYPES"],angular.module("agent_ui.directives.dashboard.bigNumber",[]).directive("bigNumber",a).controller("bigNumberCtrl",b)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"directives/dashboard/monitor/monitorChatDetailCard.tpl.html",scope:{agent:"=",chat:"=",uii:"="},link:function(a,b,c){a.isWidget=c.isWidget&&"true"===c.isWidget.toLowerCase()},controller:"MonitorChatDetailCardCtrl"}}function b(a,b){function c(){a.isChatDetailView=!a.isChatDetailView}a.chatService=b,a.isChatDetailView=!1,a.toggleDetailView=c}b.$inject=["$scope","ChatSvc"],angular.module("agent_ui.directives.dashboard.monitor.chatDetailCard",[]).directive("monitorChatDetailCard",a).controller("MonitorChatDetailCardCtrl",b)}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"directives/dashboard/monitor/monitorDetailCard.tpl.html",scope:{type:"@",agent:"=",chat:"=",uii:"="},controller:"MonitorDetailCardCtrl"}}function b(a,b,c,d,e,f,g,h,i){function j(){return a.uii&&"null"!==a.uii&&!f.call.connecting}function k(){return t()&&null!=f.call.type&&!f.call.connecting}function l(c){if("null"!==a.uii||c===i.MONITOR){var g=f.call.agent.agentId&&f.call.agent.agentId===a.agent.agentId;if(!e.isOffhook||e.isOffhook&&e.isMonitoring&&g)f.monitoredAgent=a.agent,w(!1,c),x=b.$on(h.OFFHOOK_CHANGED,function(a,b){x(),!1===b&&f.clearMonitor()});else{var j;e.isOffhook&&!e.isMonitoring?j="AGENT_MONITOR.OFFHOOK_NOTIF":g?(j="we got in to a weird state",console.warn(e.isOffhook,e.isMonitoring,g)):j="AGENT_MONITOR.ACTIVE_MONITOR_NOTIF",d.confirm(null,null,j).then(function(){f.monitoredAgent=a.agent,v(c)})}}}function m(a){a===i.MONITOR&&!t()||a!==i.MONITOR&&f.call.type===a&&!t()||"null"!==f.call.type&&f.call.type!==a?l(a):s()}function n(){var a="";return f.call.connecting?a="disabled":t()?a="btn-danger":t()||(a="btn-secondary"),a}function o(b){var c="";return"null"===a.uii?c="disabled":f.call.type===b&&f.call.agent.agentId===a.agent.agentId?c="danger":(f.call.type!==b&&"null"!==a.uii||!t())&&(c="primary"),c}function p(){var a="AGENT_MONITOR.ACTIONS.";return t()&&null!=f.call.type?a+=f.call.type.toUpperCase()+(f.call.connecting?".CONNECTING":".STOP"):a+="MONITOR.START",a}function q(a){return f.call.type===a&&t()?"STOP":"START"}function r(){return f.call.connecting||!1===f.selectedAgent.online||t()&&f.call.type===i.BARGE_IN}function s(){e.offhookTerm(),f.clearMonitor(),g.reset(),g.currentCall.isMonitoring=!0}function t(){var b=!1;return null!=f.call.agent&&(b=f.call.agent.agentId===a.agent.agentId||f.call.connecting),b}function u(b){return f.call.agent.agentId===a.agent.agentId&&f.call.type===b}function v(c){a.terminatingOffhook=!0,x=b.$on(h.OFFHOOK_CHANGED,function(b,d){x(),a.terminatingOffhook=!1,w(d,c)}),f.clearMonitor(),e.offhookTerm()}function w(b,d){var h=a.uii,j=a.agent.agentId;if(!1===b){f.monitorAgent(a.agent,d,!0);var k=c.defer();switch(d){case i.MONITOR:e.systemInitOffhook=!1,k=g.monitor(h,j);break;case i.COACH:e.systemInitOffhook=!1,k=g.coach(h,j);break;case i.BARGE_IN:e.systemInitOffhook=!0,k=g.bargeIn(h,j);break;default:k.resolve(!1),k=k.promise}k.then(function(){f.call.connecting=!1,f.startTimer(),a.agentService.agentColor="#25A73C"},function(){f.clearMonitor()})}}a.agentService=e,a.monitorService=f,a.monitorTypes=i,a.callActive=j,a.monitorAction=l,a.terminateSession=s,a.isMonitorForThisAgent=t,a.activeMonitorType=u,a.monitoringActive=k,a.toggleMonitor=m,a.getMainButtonClass=n,a.getMonitorButtonClass=o,a.getMonitorButtonLabel=p,a.getMonitorVerb=q,a.monitorButtonDisabled=r;var x;a.$on("$destroy",function(){x&&x()})}b.$inject=["$scope","$rootScope","$q","Dialog","AgentSvc","MonitorSvc","CallSvc","AGENT_EVENTS","MONITOR_TYPES"],angular.module("agent_ui.directives.dashboard.monitor.detailCard",[]).directive("monitorDetailCard",a).controller("MonitorDetailCardCtrl",b)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,controller:"DispositionFormCtrl",templateUrl:"directives/disposition/dispositionForm.tpl.html",scope:{disposition:"=",dispositions:"=dispositionList"},link:function(a,b,c){}}}function b(a,b,c,d,e){function f(){return a.disposition.disposition&&a.disposition.disposition.dispositionId&&!a.disposition.disposition.isComplete&&!a.disposition.disposition.contactForwarding&&-1===e.current.name.indexOf("chat")}a.showCallback=f,a.timezones=d.getTimezonesList(),a.localTimezone={tz:b.get("USERTZ")||moment.tz.guess()},a.dateFormat=c.PRETTY_DATE,a.timeFormat=c.TIME,a.dispositions=a.dispositions||[],function(){if(a.disposition&&!a.disposition.leadTimezone&&(a.disposition.leadTimezone=a.timezones[0].value),a.disposition&&!a.disposition.leadDate&&!a.disposition.leadTime){var b=moment().add(120,"minutes");a.disposition.leadDate=b.format(),a.disposition.leadTime=b.format()}a.$watch("disposition",function(b){if(b&&b.leadTimezone&&b.leadDate&&b.leadTime){var d=moment(b.leadDate),e=moment(b.leadTime);d.hours(e.hours()),d.minutes(e.minutes()),d.seconds(e.seconds());var f=moment.tz(d.format("YYYY-MM-DD HH:mm:ss"),b.leadTimezone);a.localDts=moment.tz(f,a.localTimezone.tz).format(c.PRETTY_DATE+" "+c.TIME),a.disposition.leadDts=f}},!0)}()}b.$inject=["$scope","localStorageService","DATE_FORMATS","Utils","$state"],angular.module("agent_ui.directives.disposition.form",[]).directive("dispositionForm",a).controller("DispositionFormCtrl",b)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"directives/leads/callbacksTable.tpl.html",scope:{callbacks:"=",type:"@"},link:function(a,b,c,d){},controller:"CallbacksTableCtrl"}}function b(a,b,c,d,e,f,g,h){function i(b){
a.pendingDial=!0,h.dialLead(b).then(function(b){a.pendingDial=!1},function(b){a.pendingDial=!1})}function j(b){b.isFutureCallback="FUTURE-CALLBACK"===a.type,c.leadDetail(b)}function k(a){var c=a.leadId,e=b.instant("PHONE.CALLBACKS.CONFIRM_CANCEL_MGS",{number:a.destination});g.confirm("#cancelBtn","PHONE.CALLBACKS.CONFIRM_CANCEL_TITLE",e).then(function(){d.cancelCallback(c)})}function l(){var a=["PENDING","DIALING","RINGING"];d.agentCallbacks=_.filter(d.agentCallbacks,function(b){return-1!==a.indexOf(b.leadState)})}function m(){a.pendingRefresh=!0,d.getFutureCallbacks().then(function(b){a.pendingRefresh=!1},function(b){a.pendingRefresh=!1})}function n(a){for(var c="",d=1;d<=5;d++)a["auxData"+d]&&""!==a["auxData"+d]&&(c=""===c?a["auxData"+d]:c+":"+a["auxData"+d]);return""===c&&(c=b.instant("PHONE.CALLBACKS.NO_AUX_DATA")),c}a.outboundService=d,a.agentService=e,a.callService=f,a.dial=i,a.dialDisabled=h.leadDialDisabled,a.cancelDisabled=h.leadCancelDisabled,a.concatAuxData=n,a.openDetail=j,a.cancel=k,a.refreshFutureCallbacks=m,a.flushCompleted=l,"FUTURE-CALLBACK"===a.type?a.noCallbacksMsg="PHONE.CALLBACKS.NO_FUTURE_CALLBACKS_MSG":a.noCallbacksMsg="PHONE.CALLBACKS.NO_CURR_CALLBACKS_MSG"}b.$inject=["$scope","$translate","LeadDialogFactory","OutboundSvc","AgentSvc","CallSvc","Dialog","LeadSvc"],angular.module("agent_ui.directives.leads.callbacksTable",[]).directive("callbacksTable",a).controller("CallbacksTableCtrl",b)}(),function(){"use strict";function a(a,b,growl,c,d,e,f,g,h,i,j){return{restrict:"E",templateUrl:"directives/leads/forms/leadSearch.tpl.html",replace:!0,scope:{type:"@"},link:function(k,l,m){function n(){p(),"SEARCH"===k.type?(k.title=k.isTcpaSafeMode?"PHONE.PREVIEW.TITLE_SEARCH_TCPA":"PHONE.PREVIEW.TITLE_SEARCH",k.noLeadsMsg="PHONE.PREVIEW.INITIAL_LOAD_MSG_SEARCH",k.fetchBtnLabel="PHONE.PREVIEW.SEARCH.SEARCH_BUTTON",k.leads=g.searchedLeads):"INSERT"===k.type&&(k.title="PHONE.LEAD_MANAGEMENT.INSERT.SELECT_DIAL_GROUP",k.fetchBtnLabel="PHONE.LEAD_MANAGEMENT.INSERT.INSERT_BTN",k.campaigns=g.getInsertCampaigns(),k.leads=g.insertedLeads)}function o(){s()||("SEARCH"===k.type?w():"INSERT"===k.type&&x())}function p(){k.searchFieldsTemp={}}function q(){return!("SEARCH"===k.type&&!1===k.agentPermissions.allowLeadSearch&&!k.overrideSearchPermission)}function r(){switch(k.type){case"INSERT":b.set("leadInsertFilter",k.searchFieldsTemp);break;case"SEARCH":b.set("leadSearchFilter",k.searchFieldsTemp)}}function s(){var a=!1;return"SEARCH"===k.type?k.agentPermissions.allowLeadSearch?g.leadSearchLoading?a=!0:v()&&(a=!0):a=!0:"INSERT"===k.type&&(k.agentPermissions.allowLeadInserts||(a=!0)),a}function t(){k.agentPermissions.allowOffHook?h.offhookInit():growl.info("SOFTPHONE.MESSAGES.OFFHOOK_DISABLED_MSG")}function u(a){k.auxLabels=i.getAuxLabels(a)}function v(){if(0===_.keys(k.searchFieldsTemp).length)return!0;var a=_.find(_.keys(k.searchFieldsTemp),function(a){return""!==k.searchFieldsTemp[a]});return angular.isUndefined(a)}function w(){g.searchedLeads=[],k.leads=g.searchedLeads;var a=[];for(var b in k.searchFieldsTemp)k.searchFieldsTemp.hasOwnProperty(b)&&k.searchFieldsTemp[b]&&""!==k.searchFieldsTemp[b]&&a.push({key:b,value:k.searchFieldsTemp[b]});k.isTcpaSafeMode?g.safeModeSearch(a):g.searchLeads(a)}function x(){g.insertedLeads=[],k.leads=g.insertedLeads;var a="";!0===k.searchFieldsTemp.dialable&&(a=moment(y).tz("US/Eastern").format("YYYY-MM-DD HH:mm:ss")),k.searchFieldsTemp.agent_id=h.agentSettings.agentId,k.searchFieldsTemp.callback_dts=a,i.leadInsert(angular.copy(k.searchFieldsTemp)).then(function(){k.searchFieldsTemp={}}),k.searchFieldsTemp.dialable=!1}k.dialing=!1,k.datetime={},k.localDts="",k.callService=j,k.agentService=h,k.outboundService=g,k.dateFormat=e.DATE_TIME,k.localTimezone={tz:b.get("USERTZ")},k.agentPermissions=h.agentPermissions,k.isTcpaSafeMode=f.applicationSettings.isTcpaSafeMode,k.overrideSearchPermission=!1;var y="";k.dial=i.dialLead,k.leadAction=o,k.leadActionDisabled=s,k.clearFilters=p,k.showForm=q,k.goOffhook=t,k.setAuxLabels=u,k.updateFilter=r,k.timezones=c.getTimezonesList(),k.auxLabels=i.getAuxLabels(),n(),k.$watch("type",function(a,b){n()}),k.$watch("datetime",function(a,b){if(k.datetime.timezone&&k.datetime.date){var c=moment(k.datetime.date).format("YYYY-MM-DD HH:mm:ss");y=moment.tz(c,k.datetime.timezone),k.localDts=moment(y).tz(k.localTimezone.tz).format("MMM Do YYYY, hh:mm a")}},!0),k.$on("$destroy",function(){z()});var z=a.$on(d.SEARCHED_LEADS_UPDATED,function(a,b){b.callbacks||(k.noLeadsMsg=k.isTcpaSafeMode?"PHONE.PREVIEW.GRID.NO_RECORDS_MSG_TCPA":"PHONE.PREVIEW.GRID.NO_RECORDS_MSG_PREVIEW",!0!==b.isInsert?k.leads=g.searchedLeads:k.leads=g.insertedLeads,"SEARCH"===k.type&&!1===k.agentPermissions.allowLeadSearch&&(k.overrideSearchPermission=!0))})}}}a.$inject=["$rootScope","localStorageService","growl","Utils","OUTBOUND_EVENTS","DATE_FORMATS","ApplicationSvc","OutboundSvc","AgentSvc","LeadSvc","CallSvc"],angular.module("agent_ui.directives.lead.forms.search",[]).directive("leadSearch",a)}(),function(){"use strict";function a(a,b,c){function d(){b.hide(a.selectedDest)}function e(){b.cancel()}a.destinations=c.destinations.split("|"),a.selectedDest=a.destinations[0],a.ok=d,a.cancel=e}a.$inject=["$scope","$mdDialog","resolvedData"],angular.module("agent_ui.directives.leads.table.dial",[]).controller("LeadInfoTableDialCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"directives/leads/leadInfoTable.tpl.html",link:function(a,b,c,d){},controller:["$scope","AgentSvc","OutboundSvc","ApplicationSvc","SessionSvc","Dialog","LeadSvc","LeadDialogFactory",function(a,b,c,d,e,f,g,h){function i(b){a.leadService.isMultiNumberLead(b)?h.multiNumberDial(b.destination).then(function(c){a.leadService.dialLead(b,c)}):a.leadService.dialLead(b)}function j(a){h.leadDetail(a)}function k(){f.custom("#leadInfoTableSettingsBtn","directives/leads/leadInfoTable.settings.tpl.html","LeadInfoTableSettingsCtrl",{columns:function(){return angular.copy(a.agentService.colPreferences)}}).then(function(b){b.agentId=a.agentService.agentSettings.agentId,a.agentService.colPreferences=b,e.setCallOptions(b)})}a.outboundService=c,a.agentService=b,a.leadService=g,a.dial=i,a.openDetail=j,a.openPreferences=k,a.availableCols=function(){return _.filter(_.keys(a.agentService.colPreferences),function(a){return"agentId"!==a})}()}]}}angular.module("agent_ui.directives.leads.table",[]).directive("leadInfoTable",a)}(),function(){"use strict";function a(a,b,c){function d(){b.hide(a.columns)}function e(){b.cancel()}a.columns=c.columns,a.ok=d,a.cancel=e}a.$inject=["$scope","$mdDialog","resolvedData"],angular.module("agent_ui.directives.leads.table.settings",[]).controller("LeadInfoTableSettingsCtrl",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"directives/leads/leadList.tpl.html",controller:"LeadListCtrl",link:function(a,b,c,d){}}}function b(a,b,c,d,e,f){function g(a){e.dialLead(a,a.destination)}function h(a){e.multiNumberLeadDialDisabled(a)||(b.go("base.default.phone.preview.detail",{leadId:a.leadId}),e.selectedPreviewLead=a)}function i(){var b="";return d.leadSearchLoading?b="PHONE.PREVIEW.GRID.LOADING_MSG":0===d.previewLeads.length&&(b=a.noLeadsMsg),b}function j(){d.previewLeads.length>0&&(_.isEmpty(e.selectedPreviewLead)?h(d.previewLeads[0]):_.some(d.previewLeads,function(a,b){if(a.leadId===e.selectedPreviewLead.leadId){if(b<d.previewLeads.length-1)return h(d.previewLeads[b+1]),!0;if(b==d.previewLeads.length-1)return h(d.previewLeads[0]),!0}}))}function k(){d.previewLeads.length>0&&(_.isEmpty(e.selectedPreviewLead)?h(d.previewLeads[d.previewLeads.length-1]):_.some(d.previewLeads,function(a,b){if(a.leadId===e.selectedPreviewLead.leadId){if(b>0)return h(d.previewLeads[b-1]),!0;if(0===b)return h(d.previewLeads[d.previewLeads.length-1]),!0}}))}a.outboundService=d,a.leadService=e,a.dial=g,a.setSelected=h,a.getNoLeadsMsg=i,a._selectNextLead=j,a._selectPreviousLead=k,function(){c.bindTo(a).add({combo:f.getByKey("PREV_LEAD_NAV").shortcut,description:f.getByKey("PREV_LEAD_NAV").description,callback:function(){k()}}),c.bindTo(a).add({combo:f.getByKey("NEXT_LEAD_NAV").shortcut,description:f.getByKey("NEXT_LEAD_NAV").description,callback:function(){j()}}),c.bindTo(a).add({combo:f.getByKey("DIAL_SELECTED_LEAD").shortcut,description:f.getByKey("DIAL_SELECTED_LEAD").description,callback:function(){_.isEmpty(e.selectedPreviewLead)||g(e.selectedPreviewLead)}})}()}function c(a,b){return b.hciEnabled()?function(a){return a}:function(b){return _.filter(b,function(b){var c=!1,d=a.leadStateAvailable(b);return(b.destination.indexOf("|")>-1||angular.isArray(b.destination))&&((c=a.allNumbersDialed(b))||d||(d=!0)),!b.complete&&d&&!0&&!c})}}b.$inject=["$scope","$state","hotkeys","OutboundSvc","LeadSvc","ShortcutKeys"],c.$inject=["LeadSvc","OutboundSvc"],angular.module("agent_ui.directives.leads.list",[]).directive("leadList",a).controller("LeadListCtrl",b).filter("leadState",c)}(),function(){"use strict";function a(a){return{restrict:"E",replace:!0,templateUrl:"directives/leads/searchFields.tpl.html",link:function(a,b,c,d){},controller:["$scope",function(b){function c(){return"SEARCH"===b.type||("INSERT"!==b.type?!(!b.agentPermissions.allowPreviewLeadFilters||b.agentPermissions.progressiveEnabled||b.outboundService.isHciPacing()||!b.showFilters):!!b.searchFieldsTemp.campaign_id||void 0)}function d(){b.showFilters=!b.showFilters,a.set("showPreviewFilters",b.showFilters),c()}b.showSearchFields=c,b.toggleSearchFields=d,function(){"INSERT"===b.type?(b.searchFieldsTemp=a.get("leadInsertFilter")||{},b.datetime.date=moment().format(b.dateFormat),b.datetime.timezone=b.localTimezone.tz):"SEARCH"===b.type?b.searchFieldsTemp=a.get("leadSearchFilter")||{}:b.searchFieldsTemp=a.get("leadCallFilter")||{},b.showFilters=null===a.get("showPreviewFilters")||a.get("showPreviewFilters")}()}]}}a.$inject=["localStorageService"],angular.module("agent_ui.directives.leads.searchFields",[]).directive("searchFields",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,controller:"ScriptFrameManagerCtrl",templateUrl:"directives/scriptFrameManager.tpl.html"}}function b(a,b,c,d,e,f,g){function h(a){return e.showScript(a)}function i(a){return e.showParentFrame(a)}function j(b,e,f){e.name.indexOf("detail")>-1&&f&&f.uii?(a.currentDetailUii=f.uii,d(function(){m()},200)):(a.currentDetailUii=null,c.css("height",0).css("width",0).css("display","none"))}function k(b,c){(h(c)||i(c))&&(a.managedFrames.push(c),d(function(){m(b,!0)},200))}function l(b,c){var d=_.findIndex(a.managedFrames,function(a){return a.uii===c.uii});-1!==d&&a.managedFrames.splice(d,1)}function m(b,e){if(a.currentDetailUii){var f=_.find(a.managedFrames,function(b){return b.uii===a.currentDetailUii});if(f&&(h(f)||i(f))){if(b&&b.target){"tab"===angular.element(b.target).attr("role")&&c.css("height",0).css("width",0)}d(function(){var a=jQuery("#scriptSection");!0===e&&a.hasClass("ng-hide")&&!a.hasClass("ng-hide-animate")&&a.removeClass("ng-hide");var b=a.offset(),d=a.outerWidth(),f=a.outerHeight();c.css("height",f).css("width",d).css("display",d<=0?"none":"block"),b&&c.css("top",b.top>f?b.top-f:b.top).css("left",b.left)})}else d(function(){c.is(":visible")&&c.css("height",0).css("width",0).css("display","none")})}}a.managedFrames=[],a.currentDetailUii=null,a.showScript=h,a.showParentFrame=i,function(){a.$on("$destroy",function(){c(),e(),h(),i(),n(),o(),jQuery("body").off("click"),jQuery("window").off("resize")});var c=b.$on("$stateChangeSuccess",j),e=b.$on("leftMenuExpanded",function(){d(function(){m()},200)}),h=b.$on(g.NEW_CALL,k),i=b.$on(g.CLEAR_SCRIPT,l),n=b.$on(f.NEW_CHAT,k),o=b.$on(f.DISP_RESPONSE,l);jQuery("body").off("click").on("click",_.throttle(m,250)),jQuery(window).off("resize").on("resize",_.throttle(m,250))}()}b.$inject=["$scope","$rootScope","$element","$timeout","CfAgentScriptSvc","CHAT_EVENTS","CALL_EVENTS"],angular.module("agent_ui.directives.scriptFrameManager",[]).directive("scriptFrameManager",a).controller("ScriptFrameManagerCtrl",b)}(),function(){"use strict";function a(a){return"Notification"in a?a.Notification:null}a.$inject=["$window"],angular.module("agent_ui.factories.browserNotification",[]).factory("Notification",a)}(),function(){"use strict";function a(a){function b(a){return"SYSTEM"===a.type?"system":"CLIENT"===a.type?"inbound":"MONITORING"===a.type||a.whisper?"monitoring":"outbound"}function c(b){return"SYSTEM"===b.sender?"system":b.senderId===a.agentSettings.agentId?"outbound":"inbound"}return{chatMsgExternalDecorator:b,chatMsgInternalDecorator:c}}a.$inject=["AgentSvc"],angular.module("agent_ui.factories.chatUtils",[]).factory("ChatUtils",a)}(),function(){"use strict";function a(a){function b(a,b){return a=parseInt(a,10),b=parseInt(b,10),a>0&&b>0?a/b:0}function c(a){return a.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}function d(a){return isNaN(parseFloat(a))||null==a||a.length<10?a:10==a.length?"("+a.slice(0,3)+") "+a.slice(3,6)+"-"+a.slice(6,10):"("+a.slice(0,3)+") "+a.slice(3,6)+"-"+a.slice(6,10)+" ["+a.slice(10,a.length)+"]"}function e(b,c){return c=c||"CutesyTime",a(c)(b)}function f(a){return a=a||0,String(a).replace(/(.)(?=(\d{3})+$)/g,"$1,")}function g(a){return a=a||0,Number(Number(a).toFixed(2))+"%"}function h(){return[{value:"US/Eastern",label:"GENERICS.LABELS.TIMEZONES.EASTERN"},{value:"US/Central",label:"GENERICS.LABELS.TIMEZONES.CENTRAL"},{value:"US/Mountain",label:"GENERICS.LABELS.TIMEZONES.MOUNTAIN"},{value:"US/Pacific",label:"GENERICS.LABELS.TIMEZONES.PACIFIC"},{value:"US/Alaska",label:"GENERICS.LABELS.TIMEZONES.ALASKAN"},{value:"US/Hawaii",label:"GENERICS.LABELS.TIMEZONES.HAWAIIAN"}]}function i(a){return a&&a.replace(/[@]/g,"_at_")}return{convertCamelToUnderscore:c,divide:b,formatPhone:d,formatTime:e,formatNumber:f,formatPercentage:g,getTimezonesList:h,escapeSoftphoneUsername:i}}a.$inject=["$filter"],angular.module("agent_ui.factories.utils",[]).factory("Utils",a)}(),function(){"use strict";function a(a,b,c,d){function e(c,d,e,f,g){d=d||"GENERICS.MODAL.CONFIRM.TITLE",f=f||"GENERICS.MODAL.CONFIRM.OK",e=e||"GENERICS.MODAL.CONFIRM.CONTENT",g=g||"GENERICS.MODAL.CONFIRM.CANCEL",c=c||null;var h=a.defer();return b.show({templateUrl:"factories/dialogs/confirm.tpl.html",controller:"ConfirmDialogCtrl as vm",openFrom:c,closeTo:c,escapeToClose:!1,locals:{title:d,content:e,ok:f,cancel:g}}).then(function(a){h.resolve(a||!0)},function(a){h.reject(a||!1)}),h.promise}function f(c,d,e,f){d=d||"GENERICS.MODAL.ALERT.TITLE",e=e||"GENERICS.MODAL.ALERT.OK",f=f||"GENERICS.MODAL.ALERT.CONTENT",c=c||null;var g=a.defer();return b.show({templateUrl:"factories/dialogs/confirm.tpl.html",controller:"ConfirmDialogCtrl as vm",openFrom:c,closeTo:c,locals:{title:d,content:f,ok:e,cancel:null}}).then(function(a){g.resolve(a||!0)}),g.promise}function g(c,d,e,f){function g(a){var g=0;for(var i in f)a[g]?f[i]=JSON.parse(JSON.stringify(a[g])):f[i]="",g+=1;return b.show({templateUrl:d,controller:e,openFrom:c,closeTo:c,locals:{resolvedData:f}}).then(function(a){h.resolve(a||!0)},function(a){h.reject(a||!1)}),h.promise}var h=a.defer(),i=a.defer();if(c=c||null,f=f||null){var j=[];return _.each(f,function(a){if(angular.isArray(a)){var b=a[0],c=a.slice(1);j.push(b.apply(null,c))}else j.push(a())}),a.all(j).then(function(a){i.resolve(a),g(a)}),h.promise}return g()}function h(){b.hide()}return{confirm:e,alert:f,custom:g,close:h}}a.$inject=["$q","$mdDialog","$timeout","$translate"],angular.module("agent_ui.factories.dialogs",[]).factory("Dialog",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){a.hide(!0)}function g(){a.cancel()}var h=this;h.title=b,h.content=c,h.ok=d,h.cancel=e,h.closeSuccess=f,h.closeError=g}a.$inject=["$mdDialog","title","content","ok","cancel"],angular.module("agent_ui.factories.dialogs.confirm",[]).controller("ConfirmDialogCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){d.sendDisposition(b.selectedChat,b.disposition.disposition,b.disposition.notes,b.disposition.isCallback,b.disposition.contactForwardNum,b.leadDts,null,e.CHAT),a.hide(b.disposition)}function h(){a.cancel()}function i(){var a={label:"GENERICS.ACTIONS.SUBMIT",button:"btn-secondary"};return b.selectedChat&&!b.selectedChat.inactive&&(a={label:"DISPOSITIONS.SUBMIT_END_CHAT",button:"btn-danger"}),a}function j(){var a=!1;return null!=f.selectedChat.scriptResult&&(a=!f.selectedChat.scriptResult.renderFormValid),!a&&b.dispositionModalForm.$invalid&&(a=!0),a}b.submitDisposition=g,b.close=h,b.getSubmitDisplay=i,b.submitDisabled=j,b.selectedChat=c.selectedChat,b.disposition=c.disposition||{},b.dispositionList=c.dispositionList,b.scriptValid=!f.selectedChat.scriptResult||f.selectedChat.scriptResult.renderFormValid}a.$inject=["$mdDialog","$scope","resolvedData","DispositionSvc","DISPOSITION_TYPES","ChatSvc"],angular.module("agent_ui.dialogs.disposition.chat",[]).controller("DispositionChatConfigCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var c="";e.currentCall.baggage&&e.currentCall.baggage.leadId===f.selectedPreviewLead.leadId&&(c=angular.copy(f.selectedPreviewLead.requestId),f.selectedPreviewLead.complete=!0,f.clearSelectedPreviewLead()),d.sendDisposition(e.currentCall,b.disposition.disposition,b.disposition.notes,b.disposition.isCallback,b.disposition.contactForwardNum,b.disposition.leadDts,c),a.hide(b.disposition)}function h(){a.cancel()}function i(){var a={label:"GENERICS.ACTIONS.SUBMIT",button:"btn-secondary"};return e.onCall&&e.currentCall&&e.currentCall.hangupOnDisposition&&(a={label:"DISPOSITIONS.SUBMIT_END_CALL",button:"btn-danger"}),a}function j(){var a=!1;return null!=e.currentCall.scriptResult&&(a=!e.currentCall.scriptResult.renderFormValid),!a&&b.dispositionModalForm.$invalid&&(a=!0),a}b.submitDisposition=g,b.close=h,b.getSubmitDisplay=i,b.submitDisabled=j,b.disposition=c.disposition,b.dispositionList=c.dispositionList,b.scriptValid=!e.currentCall.scriptResult||e.currentCall.scriptResult.renderFormValid}a.$inject=["$mdDialog","$scope","resolvedData","DispositionSvc","CallSvc","LeadSvc"],angular.module("agent_ui.dialogs.disposition",[]).controller("DispositionConfigCtrl",a)}(),function(){"use strict";function a(a,b,c,d){function e(){var b=c.content;c.isSms||(b=d("toLinkPop")({message:b})),a.hide(b)}function f(){a.cancel()}b.data=c,b.send=e,b.cancel=f}a.$inject=["$mdDialog","$scope","resolvedData","$filter"],angular.module("agent_ui.modal.knowledgeBaseEdit",[]).controller("knowledgeBaseEditCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){i()||(d.isMultiNumberLead(r.lead)?c.multiNumberDial(r.lead.destination).then(function(a){d.dialLead(r.lead,a),r.close()}):(d.dialLead(a),r.close()))}function i(){return s||d.leadDialDisabled(r.lead)}function j(){k()||(r.historyLoaded=!1,d.leadHistory(r.lead.leadId).then(function(a){r.historyLoaded=!0,r.leadHistory=a,q()}))}function k(){return!r.permissions.showLeadHistory}function l(){m()||(c.manualPass(r.lead,!0),r.close())}function m(){return f.manualPassDisabled(r.lead,b.params.type)}function n(){o()||(c.leadUpdate(angular.copy(r.lead),!0),r.close())}function o(){return 0===r.allowLeadUpdates}function p(){a.cancel()}function q(){jQuery("#leadData").animate({scrollTop:$("#leadData").prop("scrollHeight")},1e3)}var r=this;r.lead=g.lead,r.permissions=e.agentPermissions,r.leadHistory=[],r.allowLeadUpdates=parseInt(r.permissions.allowLeadUpdatesByCampaign[r.lead.campaignId],10),angular.isDefined(b.params.type)||(b.params.type=r.lead.isFutureCallback?"FUTURE-CALLBACK":"");var s="FUTURE-CALLBACK"===b.params.type;r.dialLead=h,r.dialDisabled=i,r.manualPass=l,r.manualPassDisabled=m,r.getHistory=j,r.leadHistoryDisabled=k,r.updateLead=n,r.updateDisabled=o,r.close=p,function(){r.auxLabels=d.getAuxLabels(r.lead.campaignId)}()}a.$inject=["$mdDialog","$state","LeadDialogFactory","LeadSvc","AgentSvc","OutboundSvc","resolvedData"],angular.module("agent_ui.factories.dialogs.leads.detail",[]).controller("LeadDetailCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){return b.custom(null,"factories/dialogs/leads/leadDetail.tpl.html","LeadDetailCtrl as vm",{lead:function(){return a}})}function i(a){return b.custom("#dialBtn","directives/leads/leadInfoTable.dial.tpl.html","LeadInfoTableDialCtrl",{destinations:function(){return a}})}function j(a,c){return b.custom(null,"factories/dialogs/leads/leadUpdate.tpl.html","LeadUpdateCtrl as vm",{lead:function(){return a},showDetailOnClose:function(){return c}})}function k(e,f){var g={dispositions:function(){return a(function(a){return d.campaignDispositions(e.campaignId).then(function(b){a(b)})})},lead:function(){return e},showDetailOnClose:function(){return f}};return b.custom(null,"factories/dialogs/leads/leadManualPass.tpl.html","ManualPassCtrl as vm",g).then(function(a){a.disposition?c.handleEmailTemplate(a.disposition,e,"MANUAL",{}).then(function(){l(a.disposition,a.props,e)}):console.error("Please selected a valid disposition.")})}function l(a,b,c){var d=angular.copy(b.isCallback),h="";a.isComplete&&(d=!1),d&&(h=moment(b.leadDts).tz("US/Eastern").format("YYYY-MM-DD HH:mm:ss")),c.complete=!0,f.clearSelectedPreviewLead(),f.goToPreviewDial(),g.progressiveDialRunning&&(g.stopProgressiveDialer(!1),g.startProgressiveDialer(!0)),e.manualPass(a.dispositionId,b.notes,d,h,c)}return{leadDetail:h,leadUpdate:j,manualPass:k,multiNumberDial:i}}a.$inject=["$q","Dialog","EmailTemplateSvc","CallSvc","OutboundSvc","LeadSvc","ProgressiveDialSvc"],angular.module("agent_ui.factories.dialogs.leads",[]).factory("LeadDialogFactory",a)}(),function(){"use strict";function a(a,b,c){function d(){a.hide({props:f.selectedDisposition,disposition:f.selectedDisposition.disposition})}function e(){b.showDetailOnClose&&c.leadDetail(f.lead),a.cancel()}var f=this;f.lead=b.lead,f.selectedDisposition={},f.dispositions=b.dispositions,f.submit=d,f.cancel=e}a.$inject=["$mdDialog","resolvedData","LeadDialogFactory"],angular.module("agent_ui.factories.dialogs.leads.manualPass",[]).controller("ManualPassCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){b.updateLead(h.lead).then(function(){d.showDetailOnClose&&e.leadDetail(h.lead),a.hide(h.lead)})}function g(){d.showDetailOnClose&&e.leadDetail(i),a.cancel()}var h=this,i=angular.copy(d.lead);h.lead=d.lead,h.permissions=c.agentPermissions,h.allowLeadUpdates=parseInt(h.permissions.allowLeadUpdatesByCampaign[h.lead.campaignId],10),h.save=f,h.close=g,function(){h.auxLabels=b.getAuxLabels(h.lead.campaignId)}()}a.$inject=["$mdDialog","LeadSvc","AgentSvc","resolvedData","LeadDialogFactory"],angular.module("agent_ui.factories.dialogs.leads.update",[]).controller("LeadUpdateCtrl",a)}(),function(){"use strict";function a(a,b){function c(){a.hide(e.columnOptions)}function d(){a.cancel()}var e=this;e.columnOptions=b.columns,e.save=c,e.close=d,function(){_.each(e.columnOptions,function(a){a.visible=!angular.isDefined(a.visible)||a.visible})}()}a.$inject=["$mdDialog","resolvedData"],angular.module("agent_ui.dialogs.shared.tableColumns",[]).controller("TableColumnsConfigCtrl",a)}(),function(){"use strict";function a(a,b,c,d){var e;return function(f){if(!e){e=a.defer();var g=d.assetsUrl;g+="assets/languages/locale-",g+=f.key,g+=".json?v=",g+=c.v4(),b.get(g).success(function(a){e.resolve(a)})}return e.promise}}a.$inject=["$q","$http","uuid","ENV_VARS"],angular.module("agent_ui.factories.localeLoader",[]).factory("localeLoader",a)}(),function(){function a(a){function b(a,b){d[a].shortcut=b}function c(a){return d[a]}var d={PREV_LEAD_NAV:{shortcut:"up",description:a.instant("SHORTCUT_KEYS.PHONE.PREV_LEAD")},NEXT_LEAD_NAV:{shortcut:"down",description:a.instant("SHORTCUT_KEYS.PHONE.NEXT_LEAD")},DIAL_SELECTED_LEAD:{shortcut:"shift+c",description:a.instant("SHORTCUT_KEYS.PHONE.DIAL_LEAD")},FETCH_LEADS:{shortcut:"shift+f",description:a.instant("SHORTCUT_KEYS.PHONE.FETCH_LEADS")}};return{setKey:b,getByKey:c}}a.$inject=["$translate"],angular.module("agent_ui.service.shortcutKeys",[]).factory("ShortcutKeys",a)}(),function(){"use strict";function a(){return function(a){return a.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}}angular.module("agent_ui.filter.camelToSnake",[]).filter("camelToSnake",a)}(),function(){"use strict";function a(){return function(a,b){var c=a;if(!b){var d=a.split(/[\s-_]/),e="";d.length>1?_.each(d,function(a,b){b<3&&(e+=a[0])}):e=d[0].slice(0,3),c=e}return c.toUpperCase()}}angular.module("agent_ui.filter.chat.queueAbbr",[]).filter("ChatQueueAbbr",a)}(),function(){"use strict";var a=angular.module("agent_ui.filter.dateTime",[]);a.filter("secondsToDateTime",function(){return function(a){var b=new Date(0,0,0,0,0,0,0);return b.setSeconds(a),b}}),a.filter("secondsToDuration",function(){return function(a){var b=moment().hour(0).minute(0).seconds(a||0),c=Math.floor(a/86400),d="";return c>0&&(d+=c+"d "),d+=b.format("HH:mm:ss")}}),a.directive("dateFormat",["$filter",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$formatters.push(function(b){return a("date")(b)})}}}]),a.filter("momentDate",["DATE_FORMATS",function(a){return function(b,c){return c=c||a.DATE_TIME,moment(b).format(c)}}])}(),function(){"use strict";function a(){return function(a,b){if(b=b||14,a)return a.length>b?a.substr(0,b-1)+"...":a}}angular.module("agent_ui.filter.filterLength",[]).filter("FilterLength",a)}(),function(){"use strict";function a(a){return function(b){return!0===b?a.instant("GENERICS.LABELS.YES"):!1===b?a.instant("GENERICS.LABELS.NO"):b}}a.$inject=["$translate"],angular.module("agent_ui.filter.formatBoolYesNo",[]).filter("FormatBoolYesNo",a)}(),function(){"use strict";function a(a){return function(b,c){if("WEB_CHAT"===b){return"fullString"===c?a.instant("CHAT.DETAIL.CHANNEL_TYPE.WEB_CHAT"):a.instant("CHAT.DETAIL.CHANNEL_TYPE.WEB")}return"SMS"===b?a.instant("CHAT.DETAIL.CHANNEL_TYPE.SMS"):b}}a.$inject=["$translate"],angular.module("agent_ui.filter.formatChatChannelType",[]).filter("FormatChatChannelType",a)}(),function(){"use strict";function a(){return function(a){return angular.isDefined(a)&&""!==a&&"null"!==a?a:"--"}}angular.module("agent_ui.filter.formatEmptyValue",[]).filter("FormatEmptyValue",a)}(),function(){"use strict";function a(){return function(a){if(a)return a.stateLabel&&""!==a.stateLabel?a.stateLabel:a.baseState}}angular.module("agent_ui.filter.formatStateLabel",[]).filter("FormatStateLabel",a)}(),function(){"use strict";function a(a){return function(b){return null==b?"":isNaN(parseFloat(b))||b.length<10||b.length>10?b.indexOf("|")>-1||angular.isArray(b)?a.instant("PHONE.PREVIEW.MULTIPLE"):b:10==b.length?"("+b.slice(0,3)+") "+b.slice(3,6)+"-"+b.slice(6,10):void 0}}a.$inject=["$translate"],angular.module("agent_ui.filter.phoneFormat",[]).filter("phoneFormat",a)}(),function(){"use strict";function a(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(a){var b=a;return angular.isDefined(a)&&(b="true"===c.allowSip&&a.match(g)?0===a.indexOf("sip:")||0===a.indexOf("sips:")?a:a.replace(i,""):a.replace(h,"")),b}function f(a){if("true"===c.prettyPrint&&a.length<=10&&!a.match(g)){var b=a.match(/.{1,3}/g);return b&&4===b.length&&(b[2]=b[2]+""+b[3],b.pop()),b&&b.join("-")}return a}var g=/([Ss][Ii]*[Pp]*[Ss]?).*/g,h=/[^\d\|\,]/g,i=/[^sSiIpP]/g;d.$parsers.push(function(a){a=a||"";var b=e(a);return d.$setViewValue(f(b)),d.$render(),b}),d.$formatters.push(function(a){return a=a||"",f(e(a))})}}}angular.module("agent_ui.filter.phoneNumber",[]).directive("phoneNumber",a)}(),function(){"use strict";function a(a){return function(b,c){return c=angular.isDefined(c)?c:0,a("number")(b,c)+"%"}}function b(a){return function(b){return 1===b||!0===b||"1"===b||"true"===b||"yes"===b?a.instant("GENERICS.ACTIONS.YES"):a.instant("GENERICS.ACTIONS.NO")}}function c(){function a(a){var b="";return a<=9&&(b="0"),b+a}return function(b){var c=Math.floor(b/86400),d=Math.floor(b/3600)%24,e=Math.floor(b/60)%60,f=b%60;return b>86400?c+"d "+a(d)+":"+a(e)+":"+a(f):a(d)+":"+a(e)+":"+a(f)}}function d(){return function(a){return a&&"null"!==a?a:""}}a.$inject=["$filter"],b.$inject=["$translate"],angular.module("agent_ui.filter.realTimeReporting",[]).filter("rtrPercent",a).filter("yesNoFilter",b).filter("durationFilter",c).filter("nullSafe",d)}(),function(){function a(a){return function(b){if(moment(b).isValid()){var c=moment(b).format(a.DATE_TIME_SECONDS);return moment.tz(c,a.DATE_TIME_SECONDS,"America/New_York").tz(moment.tz.guess()).format()}return b}}a.$inject=["DATE_FORMATS"],angular.module("agent_ui.filter.serverTimeToLocal",[]).filter("serverTimeToLocal",a)}(),function(){"use strict";function a(){return function(a){return a.replace(/^([A-Z])|[\s-_](\w)/g,function(a,b,c,d){var e="";return b&&(e=b.toLowerCase()),c&&(e=c.toUpperCase()),e})}}angular.module("agent_ui.filter.snakeToCamel",[]).filter("snakeToCamel",a)}(),function(){"use strict";function a(a){return function(b){return a("CutesyTime")(moment().diff(b,"seconds")).split(" ")[0]}}a.$inject=["$filter"],angular.module("agent_ui.filter.chat.lastMessage",[]).filter("ChatLastMessage",a)}(),function(){"use strict";function a(){return function(a){var b="";if(isNaN(a))b="0s";else{a=Math.floor(Number(a));var c=Math.floor(a/3600);c&&(b=c+"h ",a-=3600*c);var d=Math.floor(a/60);d&&(b+=d+"m ");b+=a%60+"s"}return b}}angular.module("agent_ui.filter.time.cutesyTime",[]).filter("CutesyTime",a)}(),function(){"use strict";function a(a){return function(b){if(b&&moment.isDate(b))return a("date")(b,"EEEE, MM/dd/yyyy hh:mm:ss a");if(b&&moment.isMoment(b))return moment(b).format("dddd, MM/DD/YYYY hh:mm:ss A");var c=moment(b);return c._d&&"Invalid Date"===c._d.toString()?"--":moment(b).format("dddd, MM/DD/YYYY hh:mm:ss A")}}a.$inject=["$filter"],angular.module("agent_ui.filter.time.fullDateTime",[]).filter("FullDateTime",a)}(),function(){"use strict";function a(){return function(a){return"null"===a?moment().hour(0).minute(0).second(0).format("HH:mm:ss"):moment().hour(0).minute(0).second(a||0).format("HH:mm:ss")}}angular.module("agent_ui.filter.time.hhMmSs",[]).filter("hhMmSs",a)}(),function(){"use strict";function a(){return function(a){var c=b(a.message)||"";return null!=a.mediaLinks&&a.mediaLinks.length>0&&_.each(a.mediaLinks,function(a){var d=a.text,e=b(d);c=c.concat(e)}),c}}function b(a){if(null==a||"string"!=typeof a||0===a.length)return a;var b=a;try{var d=0,e=[],g=document.createElement("span");g.innerHTML=a;var h=g.querySelectorAll("a,img,video,audio,iframe");if(null!==h&&h.length>0)for(d=0;d<h.length;d++)e.push(h[d].outerHTML),$(h[d]).replaceWith("$"+(e.length-1)+"$");a=g.innerHTML;for(var i=a.match(f);null!==i&&i.length>0;){var j=i[0],k=j;0!==j.indexOf("http")&&(k="http://"+k);var l="";l=c(k)?'<a href="'+k+'" title="'+j+'" target="_blank"><img alt="image" style="max-width:250px" src="'+k+'"></a>':'<a href="'+k+'" target="_blank">'+j+"</a>",e.push(l),a=a.slice(0,i.index)+a.substr(i.index).replace(j,"$"+(e.length-1)+"$"),i=a.match(f)}for(d=0;d<e.length;d++){var m=e[d];if(-1===m.indexOf('target="_blank"')){var n=document.createElement("div");n.innerHTML=m,angular.element(n.firstChild).attr("target","_blank"),m=n.innerHTML}a=a.replace("$"+d+"$",m)}}catch(a){return b}return a}function c(a){switch(d(a)){case"jpg":case"jpeg":case"png":case"gif":return!0}return!1}function d(a){if(null===a||0===a.length||-1===a.indexOf("."))return null;var b=e(a);return-1===b.indexOf(".")?null:b.split(/\#|\?/)[0].split(".").pop().trim()}function e(a){return a.substring(0,-1===a.indexOf("#")?a.length:a.indexOf("#")).substring(0,-1===a.indexOf("?")?a.length:a.indexOf("?")).substring(a.lastIndexOf("/")+1,a.length)}angular.module("agent_ui.filter.html.toLinkPop",[]).filter("toLinkPop",a);var f=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s\)]{2,})|(www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s\)]{2,})|(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9]\.[^\s\)]{2,})/m}(),function(){"use strict";function a(a,growl){function b(b){var c=[]
;return h.inboundSettings.availableQueues&&(c=_.orderBy(h.inboundSettings.availableQueues,function(a){return a.gateName?a.gateName.toString().toLowerCase():""}),b&&c.unshift({gateId:"",gateName:a.instant("GENERICS.LABELS.DEFAULT")})),c}function c(){var a=[];return h.inboundSettings.availableRequeueQueues&&(a=angular.copy(h.inboundSettings.availableRequeueQueues)),_.orderBy(a,function(a){return a.groupName?a.groupName.toString().toLowerCase():""})}function d(){var a=[];return h.inboundSettings.availableSkillProfiles&&(a=_.orderBy(angular.copy(h.inboundSettings.availableSkillProfiles),function(a){return a.profileName?a.profileName.toString().toLowerCase():""})),a}function e(){var a={};return h.inboundSettings.skillProfile&&(a=h.inboundSettings.skillProfile),a}function f(b){growl.info(a.instant("GENERICS.MESSAGES.QUEUES_CHANGED"))}function g(){h.inboundSettings={}}var h=this;return h.inboundSettings={},h.getAvailableQueues=b,h.getAvailableRequeues=c,h.getAvailableSkillProfiles=d,h.getSkillProfile=e,h.gatesChangedCallback=f,h.reset=g,h}a.$inject=["$translate","growl"],angular.module("agent_ui.service.acd",[]).factory("AcdSvc",a)}(),function(){"use strict";function a(a,b,c,d,e,growl,f,g,h,i,j,k){function l(a){return F.colPreferences[a]}function m(a){var b=a.split("@")[1];if(b!==f.getAssignments().dialDest.split("@")[1]){var c=F.agentSettings.dialDest.split("@")[0]+"@"+b,d=f.getAssignments();d.dialDest=c,F.agentSettings.dialDest=c,f.setAssignments(d)}}function n(){f.getLibraryInstance().updateDialDestination(F.agentSettings.dialDest,!0)}function o(){return"AVAILABLE"===F.currentAgentState.baseState}function p(){var a=!1;return angular.isUndefined(F.agentSettings.agentType)||(a=F.agentSettings.agentType.indexOf("SUPERVISOR")>-1),a}function q(){G=a.defer();var c=f.getLibraryInstance();return!1===F.microphoneAccess&&b.$emit(i.CALL_AUDIO_STREAM_REJECTED),F.pendingOffhook?growl.info("SOFTPHONE.MESSAGES.OFFHOOK_PENDING_MSG"):!F.agentPermissions.allowOffHook&&!F.pendingOutdial||F.isOffhook?F.agentPermissions.allowOffHook||(growl.info("SOFTPHONE.MESSAGES.OFFHOOK_DISABLED_MSG"),G.reject(!1)):(F.pendingOffhook=!0,F.isOffhook=!0,F.systemInitOffhook=!0,F.offhookStatus="connecting",c.offhookInit(r)),G.promise}function r(a){return F.isOffhook="OK"===a.status,F.pendingOffhook=!1,"OK"===a.status?(F.offhookStatus="connected",F.isMonitoring=a.monitoring,b.$emit(h.OFFHOOK_CHANGED,!0),f.attemptingSoftphoneReconnect&&(f.attemptingSoftphoneReconnect=!1,f.manualSoftphoneReconnect=!1),G.resolve(a)):(F.offhookStatus="disconnected",b.$emit(h.OFFHOOK_CHANGED,!1),G.reject(a),console.error("AgentService.offhookInit",a)),G.promise}function s(){F.isOffhook=!1,f.getLibraryInstance().offhookTerm()}function t(b,c,d){var e=a.defer();f.getSuppressFirstStateChange()?(f.setSuppressFirstStateChange(!1),e.resolve(!0)):F.agentPermissions.allowOffHook?"OUTBOUND"!==F.agentSettings.loginType&&"BLENDED"!==F.agentSettings.loginType||"AVAILABLE"!==b||"AVAILABLE"===F.currentAgentState.baseState||"TRANSITION"===F.currentAgentState.baseState||F.isOffhook?e.resolve(!0):k.confirm(null,"SOFTPHONE.MESSAGES.GO_OFFHOOK_TITLE","SOFTPHONE.MESSAGES.GO_OFFHOOK_MSG","SOFTPHONE.GO_OFFHOOK","GENERICS.ACTIONS.NO").then(function(){F.offhookInit().then(function(a){F.systemInitOffhook=!1,e.resolve(a)},function(a){f.showOffhookError(a.detail),e.resolve(a)})},function(){e.resolve(!0)}):e.resolve(!0);var g=f.getLibraryInstance();e.promise.then(function(a){g.setAgentState(b,c)})}function u(b){var c=a.defer();return f.getLibraryInstance().requestLogoutAgent(b,"",function(a){c.resolve(a)}),c.promise}function v(a){var b=[];return F.chatSettings.availableChatQueues&&(b=_.orderBy(angular.copy(F.chatSettings.availableChatQueues),function(a){return a.chatQueueName?a.chatQueueName.toString().toLowerCase():""}),a&&b.unshift({chatQueueName:c.instant("GENERICS.LABELS.DEFAULT"),chatQueueId:""})),b}function w(){return F.scriptSettings.availableScripts}function x(a){var b=[];return F.agentSettings.callerIds&&(b=angular.copy(F.agentSettings.callerIds),a&&b.unshift({description:c.instant("GENERICS.LABELS.DEFAULT"),number:""})),b}function y(){var a={},b="",c=[];if(F.agentSettings.availableAgentStates)for(var d=0;d<F.agentSettings.availableAgentStates.length;d++){a=F.agentSettings.availableAgentStates[d];var e=z(a.agentState);b=""===a.agentAuxState?a.agentState:a.agentAuxState,c.push({label:b,value:a.agentState,color:e})}return c}function z(a){var b;switch(a){case"AVAILABLE":b=F.contrastMode?"#2CB644":"#4BD964";break;case"AWAY":b="#BDBDBD";break;case"WORKING":b="#F7B500";break;case"ON-BREAK":case"BREAK-AFTER-CALL":case"LUNCH":b="#BDBDBD";break;case"AUX-UNAVAIL-OFFHOOK":case"AUX-UNAVAIL-NO-OFFHOOK":b="#F44336";break;case"TRAINING":b="#F7B500";break;case"ENGAGED":b="#0091FF";break;case"TRANSITION":b="#F7B500";break;default:b="#BDBDBD"}return b}function A(a,b){var c=document.getElementsByTagName("link");F.styleSheetLoading=!0,e(function(){for(var d=0;d<c.length;d++){var e=c[d],f=e.getAttribute("href");if(-1!==f.indexOf(a)){var g=f.split(a).join(b),h=document.createElement("link");h.setAttribute("rel","stylesheet"),h.setAttribute("type","text/css"),h.setAttribute("href",g),document.getElementsByTagName("head").item(0).replaceChild(h,e);break}}F.agentColor=z(F.currentAgentState.baseState)}),e(function(){F.styleSheetLoading=!1},3e3)}function B(){var a=f.getContrastModeData();return _.findIndex(a,function(a){return a.agentId===F.agentSettings.agentId})}function C(a){F.timeInState=0,"OK"!==a.status&&growl.error(c.instant("AGENT_STATE.ERR_MSG",{detail:a.detail})),F.currentAgentState={baseState:a.currentState,stateLabel:a.currentAuxState,prevBaseState:a.previousState,prevStateLabel:a.previousAuxState,status:a.status},F.agentColor=z(F.currentAgentState.baseState),"RNA-STATE"===F.currentAgentState.baseState&&"base.default.phone.dialpad.detail"===d.current.name&&d.go("base.default.phone.dialpad"),e(function(){b.$emit(h.STATE_CHANGED,F.currentAgentState)},100)}function D(a){F.isMonitoring&&(F.isMonitoring=!1,g.clearMonitor()),F.isOffhook=!1,F.pendingOffhook=!1,F.offhookStatus="disconnected",F.systemInitOffhook=!0,b.$emit(h.OFFHOOK_CHANGED,!1)}function E(){F.currentAgentState={baseState:"OFFLINE"},F.timeInState=0,F.isOffhook=!1,F.pendingOffhook=!1,F.pendingOutdial=!1,F.offhookStatus="init",F.systemInitOffhook=!0,F.agentSettings={},F.agentPermissions={},F.scriptSettings={},F.chatSettings={},F.colPreferences=H}var F=this;F.currentAgentState={baseState:""},F.offhookStatus="disconnected",F.timeInState=0,F.microphoneAccess=!0,F.isOffhook=!1,F.isMonitoring=!1,F.pendingOffhook=!1,F.pendingOutdial=!1,F.moreButtonState=!1,F.manualDialButtonState=!0,F.openMenuState=!1,F.openChatMenuState=!1,F.systemInitOffhook=!0,F.agentSettings={},F.agentPermissions={},F.scriptSettings={},F.chatSettings={},F.agentColor="",F.contrastMode=!1,F.styleSheetLoading=!1;var G=a.defer(),H={LEAD_ID:!1,DESTINATION:!0,LEAD_STATE:!0,EXTERN_ID:!1,LIST_DESC:!0,CAMPAIGN_ID:!0,FIRST_NAME:!0,MID_NAME:!1,LAST_NAME:!1,SUFFIX:!1,TITLE:!1,ADDRESS1:!1,ADDRESS2:!1,CITY:!1,STATE:!1,ZIP:!1,AUX_DATA_1:!1,AUX_DATA_2:!1,AUX_DATA_3:!1,AUX_DATA_4:!1,AUX_DATA_5:!1};F.colPreferences=angular.copy(H);var I=b.$on(h.AGENT_LOGIN,function(a,b){var c=_.find(j.get("callOptions"),function(a){return a.agentId===F.agentSettings.agentId});angular.isDefined(c)&&(F.colPreferences=c);var d=F.agentIndexForContrastMode();d>-1&&(F.contrastMode=f.getContrastModeData()[d].status,F.contrastMode&&F.replaceCSSFile("agent-js.css","agent-js-contrast.css"))});return b.$on("$destroy",function(){I()}),F.getCallerIds=x,F.getAvailableAgentStates=y,F.getAvailableScripts=w,F.getAvailableChatQueues=v,F.offhookInit=q,F.offhookTerm=s,F.setAgentState=t,F.logoutAgent=u,F.updateDialDestination=n,F.processAgentState=C,F.offhookTermCallback=D,F.offhookInitCallback=r,F.reset=E,F.isColVisible=l,F.setDialDest=m,F.isAvailable=o,F.isSupervisor=p,F.agentStateColor=z,F.replaceCSSFile=A,F.agentIndexForContrastMode=B,F}a.$inject=["$q","$rootScope","$translate","$state","$timeout","growl","SessionSvc","MonitorSvc","AGENT_EVENTS","SOFTPHONE_EVENTS","localStorageService","Dialog"],angular.module("agent_ui.service.agent",[]).factory("AgentSvc",a).constant("AGENT_EVENTS",{AGENT_LOGIN:"agent_login",AGENT_CONFIG:"agent_config",AGENT_LOGOUT:"agent_logout",STATE_CHANGED:"agent_stateChanged",OFFHOOK_CHANGED:"agent_offhookChanged"})}(),function(){"use strict";function a(){function a(a){var b=[];return c.applicationSettings.availableCountries&&(b=angular.copy(c.applicationSettings.availableCountries),a&&b.unshift({countryId:"USA",countryName:"United States"})),b}function b(){c.applicationSettings={}}var c=this;return this.applicationSettings={},c.getAvailableCountries=a,c.reset=b,c}angular.module("agent_ui.service.application",[]).factory("ApplicationSvc",a)}(),function(){"use strict";function a(b,c,d,e,f,growl,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){if(M.isOffhook){M.offhookTerm();var a=!0;c.$on(B.OFFHOOK_CHANGED,function(b,c){!c&&a&&E(),a=!1})}else g.getLoginType()===y.INTEGRATED?S?E():T||(T=setInterval(D,500)):E()}function D(){S&&!M.isOffhook&&(E(),clearInterval(T),T=null)}function E(){M.offhookInit().then(function(a){},function(a){g.showOffhookError(a.detail)}),k.systemInitOffhook=!1}function F(a){"OK"===a.status?(L.inboundSettings=a.inboundSettings,O.outboundSettings=a.outboundSettings,M.chatSettings=a.chatSettings,M.agentSettings=a.agentSettings,M.scriptSettings=a.scriptSettings,M.agentPermissions=a.agentPermissions,P.applicationSettings=a.applicationSettings,M.agentSettings.autoAnswerCalls=M.agentPermissions.defaultAutoAnswerOn,g.setFirstLogin(!0),g.setAuthCredentials({username:a.agentSettings.username,password:a.agentSettings.agentPassword}),c.$emit(B.AGENT_LOGIN,a),Q.resolve(a)):"EXISTING_LOGIN_FOUND"===a.status?Q.resolve(a):"EXISTING_LOGIN_ENGAGED"===a.status?(Q.reject(a),console.error("AuthService.login",a)):"FAILURE"===a.status?(a.message=d.instant("LOGIN.IQ_LOGIN_PHASE1_FAILURE_MSG"),Q.reject(a),console.error("AuthService.login",a)):(Q.reject(a),console.error("AuthService.login",a))}function G(b){growl.info(b.message+" "+b.detail),"-987"===b.messageCode&&c.$emit(A.PREVIEW_DIAL_RESOLVED,b),"-988"===b.messageCode&&c.$emit(A.PREVIEW_DIAL_RESOLVED,b),"001"===b.messageCode&&y.INTEGRATED&&K.switchSoftphoneRegistrar(),"99999"===b.messageCode&&a.logout()}function H(a){var b=a.agents;if(a.status&&401===a.status&&(e.location.href=EngageAuth.Navigation.getLoginUrl()),!angular.isDefined(K.socket)||1!==K.socket.readyState){var c=new URLSearchParams(e.location.search),f=c.get("agentId"),g=d.instant("LOGIN.NO_AGENT_FOUND"),h=d.instant("LOGIN.SOCKET_CLOSED");if(angular.isDefined(f)&&angular.isDefined(b)){_.some(b,function(a){return a.agentId===parseInt(f)})||(e.location.href=EngageAuth.Navigation.getLoginUrl({errorMessage:g})),K.openSocket(f,function(a){angular.isDefined(a.error)&&3===a.error.currentTarget.readyState&&(e.location.href=EngageAuth.Navigation.getLoginUrl({errorMessage:h})),a.reconnect&&(growl.info("LOGIN.SOCKET_RECONNECTED"),U=0)})}else e.location.href=EngageAuth.Navigation.getLoginUrl({errorMessage:g})}}function I(a){"CHAT-DISPOSITION"===a.type?o.dispResponse(a):"OUTBOUND_SMS"===a.type&&o.manualOutboundSmsResponse(a)}function J(a){g.getIsLoggedIn()&&(0===U&&(M.setAgentState("ON-BREAK","ON-BREAK"),growl.info("LOGIN.SOCKET_DISCONNECTED")),10===U&&growl.error("LOGIN.SOCKET_CANT_RECONNECT"),U++)}var K,L=n,M=k,N=m,O=q,P=i,Q=b.defer(),R={agentStateResponse:M.processAgentState,offhookInitResponse:M.offhookInitCallback,offhookTermNotification:M.offhookTermCallback,agentDebugEmailNotification:u.buildDebugEmail,updateDialDestination:M.updateDialDestination,addSessionNotification:N.addSessionCallback,earlyUiiNotification:N.earlyUiiCallback,endCallNotification:N.endCallCallback,newCallNotification:N.newCallCallback,pendingDispNotification:N.pendingDispCallback,holdResponse:m.holdCallback,directAgentTransferResponse:m.directAgentTransferCallback,directAgentTransferNotification:m.directAgentTransferNotificationCallback,chatResponse:p.chatMessageCallback,chatActiveNotification:o.chatActiveCallback,chatCancelledNotification:o.chatCancelledCallback,chatClientReconnectNotification:o.chatClientReconnectCallback,chatInactiveNotification:o.chatInactiveCallback,chatListResponse:o.chatListCallback,chatMessageNotification:o.chatMessageCallback,chatNewNotification:o.newChatCallback,chatPresentedNotification:o.chatPresentedCallback,chatStateResponse:o.chatStateCallback,chatTypingNotification:o.chatTypingCallback,pendingChatDispNotification:o.dispResponse,addChatSessionNotification:o.addChatSessionCallback,stopAgentChatMonitorNotification:t.stopAgentChatMonitorCallback,dialGroupChangeNotification:O.dialGroupChangeCallback,dialGroupChangePendingNotification:O.dialGroupChangePendingCallback,leadSearchResponse:O.leadSearchCallback,previewFetchResponse:O.previewFetchCallback,safeModeSearchResponse:O.leadSearchCallback,safeModeFetchResponse:O.previewFetchCallback,previewLeadStateNotification:O.previewLeadStateCallback,tcpaSafeLeadStateNotification:O.previewLeadStateCallback,gatesChangeNotification:L.gatesChangedCallback,genericNotification:G,closeResponse:J,acknowledgeResponse:I,authenticateResponse:H,loginPhase1Response:F,agentDailyStats:l.processDailyStats,queueStats:l.processQueueStats,campaignStats:l.processCampaignStats,agentStats:l.processAgentStats,chatQueueStats:l.processChatQueueStats,sipConnectedNotification:h.sipConnectedCallback,sipDialDestChangedNotification:h.sipDialDestChangedCallback,sipEndedNotification:h.sipEndedCallback,sipMuteResponse:h.sipMuteCallback,sipRegisteredNotification:h.sipRegisteredCallback,sipRegistrationFailedNotification:h.sipRegistrationFailedCallback,sipRingingNotification:h.sipRingingCallback,sipUnmuteResponse:h.sipUnmuteCallback,sipUnregisteredNotification:h.sipUnregisteredCallback,sipSwitchRegistrarNotification:g.switchSipRegistrarCallback};a.callbacks=R;var S=!1,T=null,U=0;return c.$on(z.SESSION_REGISTERED,function(){S=!0}),c.$on(z.CALL_REJECTED,function(){g.setOffhookErrMsg(d.instant("GENERICS.MESSAGES.OFFHOOK_REJECTED"))}),c.$on(z.CALL_AUDIO_STREAM_REJECTED,function(){""===g.getOffhookErrMsg()&&g.setOffhookErrMsg(d.instant("GENERICS.MESSAGES.OFFHOOK_AUDIO_REJECTED"))}),e.__settings.start_stats=function(){e.__settings.show_stats=!0,K.requestStats()},e.__settings.stop_stats=function(){e.__settings.show_stats=!1,K.terminateStats()},a.init=function(){var b={authHost:window.location.origin,callbacks:R,isSecureSocket:x.isSecureSocket};K=new AgentLibrary(b),g.setLibraryInstance(K),g.isAuthenticated()&&a.logout()},a.login=function(){return g.getLibraryInstance()||a.init(),angular.isDefined(K.socket)||K.authenticateAgentWithEngageAccessToken(EngageAuth.Session.getAccessToken()),g.setIqUrl(EngageAuth.Session.getUserDetails().iqUrl),Q.promise},a.configure=function(a,d,f,i,j,k){var l=b.defer();return M.agentPermissions.allowInbound||(a=null),M.agentPermissions.allowOutbound||(i=null),M.agentPermissions.allowChat||(d=null),K.loginAgent(j,a,d,f,i,!1,k,function(a){if("SUCCESS"===a.status){ga("set","userId",a.agentSettings.accountId+"-"+a.agentSettings.agentId),M.agentSettings=a.agentSettings,M.agentPermissions=a.agentPermissions,L.inboundSettings=a.inboundSettings,P.applicationSettings=angular.extend(P.applicationSettings,a.applicationSettings),O.outboundSettings=a.outboundSettings;var b=g.getAssignments();g.getLoginType()===y.INTEGRATED?a.agentSettings.dialDest?b.dialDest=a.agentSettings.dialDest:(b.dialDest="",growl.error("LOGIN.NO_WEB_RTC_MSG")):g.getLoginType()===y.RC_PHONE&&(a.agentSettings.dialDest?b.dialDest=a.agentSettings.dialDest:(b.dialDest="",growl.error("LOGIN.NO_RC_EXT_MSG"))),m.init();var d=[];_.each(a.inboundSettings.queues,function(a){d.push(a.gateId)});var f=[];_.each(a.chatSettings.chatQueues,function(a){f.push(a.chatQueueId)});var i=[];_.each(a.chatSettings.availableChatRequeueQueues,function(a){_.each(a.queues,function(b){b.skills=a.skills,b.chatGroup=a.groupName,i.push(b)})}),i.length>0&&(a.chatSettings.availableChatRequeueQueues=i);var j={queues:d,skillProfile:a.inboundSettings.skillProfile.profileId,dialGroup:a.outboundSettings.outdialGroup.dialGroupId,chatQueues:f,dialDest:a.agentSettings.dialDest},k=g.getAssignments();j=angular.extend(k,j),g.setAssignments(j);if(!g.getChatOptions(a.agentSettings.agentId)){var n={agentId:a.agentSettings.agentId,playRoom:!1,playDirect:!1,alias:a.agentSettings.firstName+" "+a.agentSettings.lastName};g.setChatOptions(n)}g.getIsLoggedIn()||(g.getLoginType()===y.INTEGRATED&&(h.sipInit(),h.sipRegister()),g.getTakeCalls()&&a.agentPermissions.allowOffHook&&("BLENDED"===a.agentSettings.loginType||"OUTBOUND"===a.agentSettings.loginType)&&C(),M.setAgentState(a.agentSettings.initLoginState,a.agentSettings.initLoginStateLabel)),!1!==e.__settings.show_stats&&K.requestStats(),g.setIsLoggedIn(!0),g.setSuppressFirstStateChange(!0),c.$emit(B.AGENT_CONFIG,a),l.resolve(a)}else"EXISTING_LOGIN_FOUND"===a.status?l.resolve(a):"EXISTING_LOGIN_ENGAGED"===a.status?l.resolve(a):(l.reject(a),console.error("AuthService.config",a))}),l.promise},a.logout=function(a){K=g.getLibraryInstance();var d="object"==typeof a&&!!a&&!!a.logoutEngageAuth;return b(function(a,b){K.logoutAgent(M.agentSettings.agentId,function(b){S=!1,T=null,L.reset(),M.reset(),P.reset(),N.reset(),p.reset(),o.reset(),O.reset(),j.reset(),r.reset(),s.reset(),t.reset(),h.reset(),v.reset(),g.clearSession(),d?EngageAuth.Session.logout().then(function(){a(b)}):a(b)})}).finally(function(){c.$emit(B.AGENT_LOGOUT),x.testing||(c.$emit("customBeforeUnload"),e.location.href=EngageAuth.Navigation.getLoginUrl()),e.onbeforeunload=angular.noop})},a.refreshEngageAuthToken=function(a){return b(function(b,c){EngageAuth.Session.refreshToken(a).then(b).catch(function(a){e.location.href=EngageAuth.Navigation.getLoginUrl(),c(a)})})},a}a.$inject=["$q","$rootScope","$translate","$window","$injector","growl","SessionSvc","SoftphoneSvc","ApplicationSvc","ToolbarSvc","AgentSvc","StatsSvc","CallSvc","AcdSvc","ChatSvc","CfChatSvc","OutboundSvc","LeadSvc","CallHistorySvc","MonitorSvc","SystemSvc","TransferSvc","Utils","ENV_VARS","LOGIN_TYPE","SOFTPHONE_EVENTS","OUTBOUND_EVENTS","AGENT_EVENTS"],angular.module("agent_ui.service.auth",[]).factory("AuthService",a)}(),function(){"use strict";function a(a,b,c,d,growl){return{request:function(a){if(a.headers=a.headers||{},-1===a.url.indexOf("amazonaws"))try{Object.assign(a.headers,EngageAuth.Session.getAuthHeader())}catch(a){console.log("err in adding authenticate header")}return a},responseError:function(a){if(401===a.status){var c=d.defer();return b.get("AuthService").refreshEngageAuthToken(EngageAuth.Session.getXAuthToken()).then(function(){var d=EngageAuth.Session.getAuthHeader();Object.assign(a.config.headers,d),b.get("$http")(a.config).then(c.resolve,c.reject)}).catch(c.reject),c.promise}return growl.error(a.status+" - "+a.statusText,{ttl:-1}),console.error("error data",a),d.reject(a)}}}a.$inject=["$rootScope","$injector","$window","$q","growl"],angular.module("agent_ui.service.authInterceptor",[]).factory("AuthInterceptor",a)}(),function(){"use strict";function a(a,b){return{request:function(c){var d=a.apiHost+a.apiPath;return"string"!=typeof c.url?c.url=d:0===c.url.indexOf("http")||0===c.url.indexOf(d)||0===c.url.indexOf(a.assetsUrl)||b.get(c.url)||(c.url=d+c.url),c}}}a.$inject=["ENV_VARS","$templateCache"],angular.module("agent_ui.service.baseUrlInterceptor",[]).factory("BaseUrlInterceptor",a)}(),function(){"use strict";function a(a,b,c,d,e,f,growl,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){var a=g.get("dialPadHidden");xa.dialPadHidden=a&&a[k.agentSettings.agentId]||!1,xa.dialPad={dialDest:g.get("defaultManualDialDest")||"",ringTime:g.get("defaultManualRingTime")||parseInt(k.agentSettings.outboundManualDefaultRingtime,10)||30,queueId:g.get("defaultManualQueue")||"",callerId:g.get("defaultManualCallerId")||"",countryId:g.get("defaultManualCountry")||"USA"}}function x(b){var c=a.defer();return i.getLibraryInstance().getCampaignDispositions(b,function(a){c.resolve(a)}),c.promise}function y(b,c,d,e){c=c||"";var f=a.defer();return i.getLibraryInstance().internationalColdXfer(b,c,d,e,function(a){"OK"===a.status?f.resolve(a):(f.reject(a),console.error("CallService.coldXfer",a))}),f.promise}function z(b,c,d,e){c=c||"";var f=a.defer(),g=i.getLibraryInstance();return xa.currentCall.xferDest=b,beep.play(),g.internationalWarmXfer(b,c,d,e,function(a){"OK"===a.status?f.resolve(a):(f.reject(a),a.message&&a.detail&&growl.error(a.message+" "+a.detail),console.error("CallService.warmXfer",a)),beep.pause(),xa.currentCall.xferDest=null}),f.promise}function A(a){i.getLibraryInstance().warmXferCancel(a),beep.pause()}function B(b,c){var d=a.defer(),e=i.getLibraryInstance(),f=k.agentSettings.agentId;return e.monitor(f,b,c,function(a){"OK"===a.status?d.resolve(a):(d.reject(a),console.error("CallService.monitor",a))}),d.promise}function C(b,c){var d=a.defer(),e=i.getLibraryInstance(),f=k.agentSettings.agentId;return e.coach(f,b,c,function(a){"OK"===a.status?d.resolve(a):(d.reject(a),console.error("CallService.coach",a))}),d.promise}function D(b,c){var d=a.defer(),e=i.getLibraryInstance(),f=k.agentSettings.agentId;return e.bargeIn(f,b,c,function(a){"OK"===a.status?d.resolve(a):(d.reject(a),console.error("CallService.bargeIn",a))}),d.promise}function E(a,c,d,e,f,g,h){e=e||!1,xa.currentCall.pendingDisp=!1,xa.currentCall.showCallView=!1;var k=null,l=j.saveScriptResult(xa.currentCall);_.isEmpty(l)||(k=l.model?l.model:l);var m,n,o=i.getLibraryInstance(),p=o.getCallTokens();p.leadId&&""!==p.leadId&&(m=p.leadId,n=p.externId),o.dispositionCall(a,c,d,e,f,g,k,n,m,h),b.$emit(r.PENDING_DISP,!1),M(),na(),qa(),G(),xa.returnToLeadManagerAfterCall?(xa.returnToLeadManagerAfterCall=!1,va()):ua()}function F(){var a=xa.currentCall.scriptComplete,b=xa.currentCall.pendingDisp,c=xa.onCall,e=d.current.name.indexOf("base.default.phone.dialpad")>-1,f=!(xa.currentCall.outdialDispositions&&xa.currentCall.outdialDispositions.dispositions),g=!1;return e&&b&&(a||!c)&&!f&&xa.allowDisposition()&&(xa.openDispositionModal(),g=!0),g}function G(){xa.dispositionOpen&&h.close()}function H(b,c){if(!xa.dispositionOpen){if(b=b||xa.currentCall.disposition,!c){var d=xa.currentCall.outdialDispositions;d&&d.dispositions&&(c=d.dispositions)}xa.dispositionOpen=!0;var e=a.defer();return h.custom(null,"factories/dialogs/disposition/disposition.dialog.tpl.html","DispositionConfigCtrl",{disposition:function(){return b},dispositionList:function(){return c}}).then(function(){e.resolve(!1),xa.dispositionOpen=!1},function(){e.resolve(!1),xa.dispositionOpen=!1}),e.promise}}function I(){return xa.onCall&&xa.currentCall&&xa.currentCall.pendingDisp}function J(a){return xa.onCall||xa.currentCall&&xa.currentCall.pendingDisp}function K(){return xa.onCall&&xa.currentCall&&xa.currentCall.uii&&xa.currentCall.isMonitoring}function L(){return xa.onCallOrPendingDisp()&&xa.currentCall&&xa.currentCall.pendingDisp&&"SUPPRESS"!==xa.currentCall.surveyPopType}function M(){var a=xa.currentCall.uii;xa.currentCall.scriptResult={},g.remove("scriptingStudio.script:currentScript"),b.$emit(r.CLEAR_SCRIPT,{uii:a})}function N(){k.systemInitOffhook&&k.offhookTerm()}function O(){xa.dialPadHidden=!xa.dialPadHidden;var a=g.get("dialPadHidden")||{};a[k.agentSettings.agentId]=xa.dialPadHidden,g.set("dialPadHidden",a)}function P(a){i.getLibraryInstance().hangup(a)}function Q(){var a=xa.getTransferSessions(),b=Object.keys(a).length>0,c=xa.currentCall.isMonitoring,d=c&&"FULL"===xa.currentCall.monitoringType;!b||c&&!d?xa.hangup():h.custom(null,"phone/modals/hangupModal.tpl.html","HangupCtrl",{transferSessions:function(){return a},isBargeInMonitor:function(){return d}})}function R(a,b){i.getLibraryInstance().holdSession(a,b)}function S(b){return Da=a.defer(),i.getLibraryInstance().hold(b),Da.promise}function T(a){"OK"===a.status?"1"===a.sessionId&&(xa.currentCall.onHold=a.holdState,Da&&Da.resolve(xa.currentCall.onHold)):(console.error("CallService.hold",a),Da.reject(!1))}function U(b,c,d){var e=a.defer(),f=i.getLibraryInstance();return d&&(beep.play(),xa.currentCall.onHold||S(!0)),f.requeueCall(b,c,d,function(a){"OK"===a.status?e.resolve(a):(e.reject(a),console.error("CallService.requeue",a))}),e.promise}function V(a,b,c,d,e){if(c=c||"60",d=d||"USA",e=e||"",ta(d,a)){k.pendingOutdial=!0;var f=i.getLibraryInstance();k.isOffhook?(f.manualOutdial(a,b,c,d,e),l.createNewCallAttempt(a,null,q.MANUAL)):k.offhookInit().then(function(){xa.manualOutdial(a,b,c,d,e)},function(a){k.pendingOutdial=!1,i.showOffhookError(a.detail,!1)})}}function W(a){k.pendingOutdial=!1,i.getLibraryInstance().manualOutdialCancel(a),xa.checkAndTermOffhook(),ma()}function X(b){var c=a.defer();return i.getLibraryInstance().record(b,function(a){xa.currentCall.isRecording="RECORDING"===a.state,"OK"===a.status?c.resolve(a):(c.reject(a),console.error("CallService.record",a))}),c.promise}function Y(a){xa.currentCall.isRecording=a,i.getLibraryInstance().pauseRecord(a)}function Z(){return i.getLibraryInstance().getCallTokens()}function $(){return xa.currentCall.transferPhoneBook?xa.currentCall.transferPhoneBook:[]}function aa(){var a,b=i.getLibraryInstance();return b&&(a=b.getTransferSessions()),a}function ba(a){var d=i.getLibraryInstance();if(a.agentId===k.agentSettings.agentId&&parseInt(a.sessionId)>1&&(!a.monitoring||!xa.currentCall.isMonitoring)&&a.uii===xa.currentCall.uii&&(xa.onCall=!0,d.waitingForAddSession=!1,xa.currentCall.outdialDispositions&&xa.currentCall.outdialDispositions.dispositions&&xa.currentCall.outdialDispositions.dispositions.length>0&&(xa.currentCall.pendingDisp=!0,_.some(xa.currentCall.outdialDispositions.dispositions,function(a){a.isDefault&&(xa.currentCall.defaultDisp=a)}),b.$emit(r.PENDING_DISP,!0)),xa.currentCall.appUrl&&""!==xa.currentCall.appUrl&&-1===xa.currentCall.appUrl.indexOf("parent:"))){var e=c.open(xa.currentCall.appUrl,"_blank");try{e.focus()}catch(a){growl.error("LOGIN.POPUP_BLOCKER_MSG")}}beep.pause()}function ca(a){xa.currentCall.earlyUii=a.uii}function da(a){xa.onCall=!1,m.call.type&&m.call.connecting||xa.checkAndTermOffhook(),!0===xa.currentCall.isMonitoring&&m.call.type===v.BARGE_IN&&m.setToMonitor(),xa.onManualCall=!1,xa.currentCall.onHold=!1,xa.currentCall.isRecording=!1,xa.currentCall.callState=u.CALL_ENDED,xa.currentCall.termParty=a.termParty,xa.currentCall.termReason=a.termReason,xa.currentCall.xferDest=null,beep.pause(),!za&&xa.currentCall.pendingDisp&&(xa.currentCall.defaultDisp&&(za=window.setTimeout(sa,1e3*xa.currentCall.defaultDisp.timeout)),ya=a.dispositionTimeout?window.setTimeout(ra,1e3*a.dispositionTimeout):window.setTimeout(ra,6e4)),b.$emit(r.END_CALL,a),!xa.currentCall.pendingDisp&&xa.returnToLeadManagerAfterCall?(xa.returnToLeadManagerAfterCall=!1,M(),va()):xa.currentCall.pendingDisp||ua(),l.updateCallHistory(p.END_CALL_PACKET,a)}function ea(c){var e=a.defer();if(i.getLibraryInstance().waitingForAddSession=!0,ma(),xa.currentCall=c,xa.currentCall.disposition={},xa.onCall=!0,!0===xa.currentCall.isMonitoring)xa.currentCall.callState=u.ACTIVE_MONITORING,e.resolve(!1);else{if(l.updateCallHistory(p.NEW_CALL_PACKET,c),c.baggage&&c.baggage.leadId&&xa.currentCall&&xa.currentCall.baggage){var f=l.findHistoryItemByLeadId(c.baggage.leadId);f&&f.destination&&f.destination.length>1&&c.baggage.leadId===xa.currentCall.baggage.leadId&&(c.scriptResponse=angular.copy(xa.currentCall.scriptResponse),delete c.scriptResponse.uii)}xa.currentCall.callState=u.ACTIVE,xa.currentCall.agentRecording&&xa.currentCall.agentRecording.default&&(xa.currentCall.isRecording="ON"===xa.currentCall.agentRecording.default),""!==xa.currentCall.scriptId?j.getScript(xa.currentCall.scriptId,xa.currentCall.scriptVersion,"CALL",xa.currentCall.uii).then(function(a){xa.currentCall.script=a,e.resolve(!0)}):(xa.currentCall.appUrl&&xa.currentCall.appUrl.indexOf("parent"),e.resolve(!0))}return xa.currentCall.callType.toLowerCase()===q.INBOUND&&b.$emit(n.STOP_DIALER),e.promise.then(function(a){a&&(b.$emit(r.NEW_CALL,xa.currentCall),xa.currentCall.showCallView=a,d.go("base.default.phone.dialpad.detail",{uii:xa.currentCall.uii}))}),e.promise}function fa(a){a.agentId===k.agentSettings.agentId&&(xa.currentCall.pendingDisp=a.status,b.$emit(r.PENDING_DISP,a.status),na(),G()),a.status||xa.onCall||!xa.returnToLeadManagerAfterCall?a.status||xa.onCall||(M(),ua()):(xa.returnToLeadManagerAfterCall=!1,M(),va()),a.status||G()}function ga(a,b){var c=i.getLibraryInstance();b?c.warmDirectAgentXfer(a):c.coldDirectAgentXfer(a),xa.currentCall.xferDest=a,xa.currentCall.isDirectAgentXfer=!0}function ha(){i.getLibraryInstance().cancelDirectAgentXfer(xa.currentCall.xferDest)}function ia(a){i.getLibraryInstance().voicemailDirectAgentXfer(a)}function ja(a){i.getLibraryInstance().rejectDirectAgentXfer(a)}function ka(a){if("WARM"===a.type||"COLD"===a.type)switch(a.status){case"ACCEPTED":beep.play(),xa.currentCall.xferActive=!0;break;case"SUCCEEDED":beep.pause(),xa.currentCall.xferDest=null,xa.currentCall.isDirectAgentXfer=!1;break;case"REJECTED":case"FAILED":"COLD"===a.type?growl.error(a.message):"WARM"===a.type&&h.custom(null,"phone/modals/directTransferFailed.modal.tpl.html","DirectTransferFailedCtrl",{xferDest:function(){return angular.copy(xa.currentCall.xferDest)},message:function(){return a.message}}),xa.currentCall.xferActive=!1,beep.pause(),xa.currentCall.xferDest=null,xa.currentCall.isDirectAgentXfer=!1}else if("CANCEL"===a.type)xa.currentCall.xferActive=!1,beep.pause(),xa.currentCall.xferDest=null,xa.currentCall.isDirectAgentXfer=!1;else if("VOICEMAIL"===a.type)switch(a.status){case"FAILED":growl.error(a.message)}}function la(a){switch(a.status){case"VOICEMAIL":case"MISSED":if(a.voicemailUrl){var b=l.createMissedTransferRecord(a.uii,a.ani,a.voicemailUrl),c='<span ui-sref="base.default.phone.callHistory({callId: '+b.time+'})">{{ ::"PHONE.MODALS.DIRECT_XFER.MISSED.MSG" | translate }}</span>',d=e.instant("PHONE.MODALS.DIRECT_XFER.MISSED.TITLE",{number:f("phoneFormat")(a.ani)});growl.info(c,{ttl:-1,title:d}),h.close()}break;case"CANCELLED":h.close();break;case"PENDING":xa.onCall||Ea||(Ea=!0,h.custom(null,"phone/modals/directTransferPresented.modal.tpl.html","DirectTransferPresentedCtrl",{pendingUii:function(){return a.uii}}).then(function(){Ea=!1},function(){Ea=!1}))}}function ma(){xa.dialPad.dialDest="",g.remove("defaultManualDialDest")}function na(){oa(),pa()}function oa(){window.clearTimeout(ya),ya=null}function pa(){window.clearTimeout(za),za=null}function qa(){Aa&&(Aa.destroy(),Aa=null)}function ra(){Aa=growl.error("DISPOSITIONS.DISP_TIMEOUT"),oa()}function sa(){if(xa.currentCall.pendingDisp){var a={contact:xa.currentCall,dispositionType:o.CALL};b.$emit(s.AUTO_DISPOSITION,a)}na()}function ta(a,b){return"USA"!==a||10===b.length||(growl.error("SOFTPHONE.MANUAL_OUTDIAL.INVALID_MSG"),!1)}function ua(){"base.default.phone.dialpad.detail"===d.current.name&&d.go("base.default.phone")}function va(){"base.default.phone.dialpad.detail"===d.current.name&&d.go("base.default.phone.preview")}function wa(){xa.onCall=!1,xa.onManualCall=!1,xa.returnToLeadManagerAfterCall=!1,xa.currentCall={},xa.dialPadHidden=!1,xa.dispositionOpen=!1,na()}var xa=this;xa.currentCall={},xa.dialPad={},xa.onCall=!1,xa.onManualCall=!1,xa.returnToLeadManagerAfterCall=!1,xa.callHistory=[],xa.leadDialed=null,xa.dialPadHidden=!1,xa.currentUrl="base.default.phone.dialpad",xa.dialButtonStyle="dial-button",xa.isChatView=!1,xa.dispositionOpen=!1,xa.pauseDisplay="",xa.pauseRecordTimeout=void 0;var ya=null,za=null,Aa=null;xa.init=w,xa.getCallTokens=Z,xa.getTransferPhonebook=$,xa.getTransferSessions=aa,xa.campaignDispositions=x,xa.coach=C,xa.bargeIn=D,xa.dispositionCall=E,xa.hangup=P,xa.hangupOrPromptForSession=Q,xa.holdSession=R,xa.hold=S,xa.holdCallback=T,xa.pauseRecord=Y,xa.manualOutdial=V,xa.manualOutdialCancel=W,xa.monitor=B,xa.record=X,xa.requeue=U,xa.coldXfer=y,xa.warmXfer=z,xa.warmXferCancel=A,xa.directAgentTransfer=ga,xa.cancelDirectAgentTransfer=ha,
xa.voicemailDirectAgentTransfer=ia,xa.rejectDirectAgentXfer=ja,xa.addSessionCallback=ba,xa.earlyUiiCallback=ca,xa.endCallCallback=da,xa.newCallCallback=ea,xa.pendingDispCallback=fa,xa.directAgentTransferCallback=ka,xa.directAgentTransferNotificationCallback=la,xa.checkCallAndPopDispositionModal=F,xa.openDispositionModal=H,xa.onCallOrPendingDisp=J,xa.onCallAndPendingDisp=I,xa.agentMonitoring=K,xa.allowDisposition=L,xa.clearScript=M,xa.checkAndTermOffhook=N,xa.toggleDialPad=O,xa.clearDialDest=ma,xa.reset=wa;var Ba=b.$watch(function(){return xa.onCall&&_.keys(xa.getTransferSessions()).length},function(a,b){a!==b&&(xa.currentCall.xferActive=a>0)}),Ca=b.$on(t.AGENT_DAILY,function(a,b){xa.onCall&&(xa.currentCall.duration=b.currCallTime)});b.$on("$destroy",function(){Ba(),Ca()});var Da,Ea=!1;return xa}a.$inject=["$q","$rootScope","$window","$state","$translate","$filter","growl","localStorageService","Dialog","SessionSvc","ScriptSvc","AgentSvc","CallHistorySvc","MonitorSvc","PROGRESSIVE_DIALER_REQUESTS","DISPOSITION_TYPES","CALL_HISTORY_EVENTS","CALL_TYPES","CALL_EVENTS","DISPOSITION_EVENTS","STATS_EVENTS","CALL_STATE","MONITOR_TYPES"],angular.module("agent_ui.service.call",[]).factory("CallSvc",a).constant("CALL_EVENTS",{ADD_SESSION:"call_addSession",END_CALL:"call_endCall",NEW_CALL:"call_newCall",PENDING_DISP:"call_pendingDisp",SHOW_CALL_VIEW:"call_showCallView",CLEAR_SCRIPT:"call_clearScript",HOLD_STATE:"call_holdState"}).constant("CALL_STATE",{ACTIVE:"ACTIVE",ACTIVE_MONITORING:"ACTIVE-MONITORING",CALL_ENDED:"CALL-ENDED"})}(),function(){"use strict";function a(a,b,c,d){function e(d,e){var g={},h=a.INBOUND;e.callType&&(h=e.callType.toLowerCase()),d===b.NEW_CALL_PACKET?(g=_.find(k.callHistory,{time:k.currentCallTime}),_.isEmpty(g)&&(g=f(e.ani,null,h)),g.uii=e.uii,g.callPacket=e,c.modifySingleRecord(g.time,g)):d===b.END_CALL_PACKET?(g=_.find(k.callHistory,{uii:e.uii}),_.isEmpty(g)&&(g=f(null,null,h),g.callPacket={baggage:{ani:"END CALL"}}),g.endCallPacket=e,c.modifySingleRecord(g.time,g),k.currentCallTime=null):d===b.ERROR_PACKET?(g=_.find(k.callHistory,{time:k.currentCallTime})||{},_.isEmpty(g)||(g.errorPacket=e,c.modifySingleRecord(g.time,g)),k.currentCallTime=null):d===b.DISPOSITION_PACKET&&(g=_.find(k.callHistory,{uii:e.uii}),_.isEmpty(g)||(g.dispositionPacket=e,c.modifySingleRecord(g.time,g)))}function f(a,b,d){var e=moment().valueOf().toString(),f=angular.copy(l);return f.time=e,f.queueTime=moment(),f.destination=a,f.lead=b,f.type=d,k.currentCallTime=e,k.callHistory.push(f),c.addCallHistoryRecord(f),f}function g(b,c,d){var e=f(c,null,a.MISSED);return e.uii=b,e.callPacket={baggage:{ani:c},voicemailUrl:d},_.each(k.callHistory,function(a){a.selected=!1}),e.selected=!0,e}function h(a){return _.find(k.callHistory,function(b){return a&&b.lead&&b.lead.leadId===a})}function i(a){return d(function(b){c.getCallHistoryRecordsByAgent(a,!0).then(function(a){if(a){var c;k.callHistory=a.map(function(a){try{c=JSON.parse(a.record)}catch(a){c=null,console.error("error parsing callHistory Record")}return c}),b(k.callHistory)}})})}function j(){k.callHistory=[],k.currentCallTime=null}var k=this,l={type:null,lead:null,callPacket:null,destination:null,time:null,uii:null,dispositionPacket:null};return k.callHistory=[],k.currentCallTime=null,k.createNewCallAttempt=f,k.updateCallHistory=e,k.findHistoryItemByLeadId=h,k.createMissedTransferRecord=g,k.reset=j,k.getMoreCallHistory=i,k}a.$inject=["CALL_TYPES","CALL_HISTORY_EVENTS","IndexDbSvc","$q"],angular.module("agent_ui.service.callHistory",[]).factory("CallHistorySvc",a).constant("CALL_HISTORY_EVENTS",{NEW_CALL_PACKET:"newCallPacket",END_CALL_PACKET:"endCallPacket",ERROR_PACKET:"errorPacket",DISPOSITION_PACKET:"dispositionPacket"}).constant("CALL_TYPES",{MANUAL:"manual",OUTBOUND:"outbound",INBOUND:"inbound",MISSED:"missed"})}(),function(){"use strict";function a(){return a.showScript=function(a){return!(a.appUrl&&a.appUrl.indexOf("parent:")>-1)&&angular.isDefined(a.script)&&null!==a.script},a.showParentFrame=function(b){return!a.showScript(b)&&b.appUrl&&b.appUrl.indexOf("parent")>-1},a}angular.module("agent_ui.services.cfAgentScript",[]).service("CfAgentScriptSvc",a)}(),function(){"use strict";function a(a,b,c,d,e,growl,f,g,h,i){function j(a){d.getLibraryInstance().setChatAlias(a)}function k(a,b){d.getLibraryInstance().publicChatRoom(a,b)}function l(a,b){var c=e.agentSettings.agentId,f=y(b.agentId);return d.getLibraryInstance().privateChatRoom(a,f,c,b.agentId),"ENTER"===a&&m(b),G.chats[f]}function m(a){var b=y(a.agentId);G.chats[b]?G.chats[b].connectionCount=0:G.chats[b]={roomId:b,roomName:a.firstName+" "+a.lastName,roomDesc:"",agentId:a.agentId,unreadCount:0,messages:[],type:i.PRIVATE,active:!1,connectionCount:0}}function n(a){var b="",c=a.roomId.split("-");_.some(c,function(a){if(a!==e.agentSettings.agentId)return b=a,!0}),l("EXIT",{agentId:b}),delete G.chats[a.roomId]}function o(a,c){return G.chatSendDeferred=b.defer(),d.getLibraryInstance().sendChat(a,c),G.chatSendDeferred.promise}function p(){I=b.defer();var a=setTimeout(q,1e4);return d.getLibraryInstance().getSupervisors(function(b){clearTimeout(a),G.supervisors=b,I.resolve(b)},function(a){I.resolve([]),growl.error("LOGIN.ERROR_CHAT_INIT")}),I.promise}function q(){I.resolve([]),growl.error("LOGIN.ERROR_CHAT_INIT"),clearTimeout(H)}function r(){var a=b.defer();return a.resolve(G.supervisees),a.promise}function s(b){b.time=new Date;var c=G.chats[b.roomId];if(angular.isDefined(c)||b.roomType!==i.PRIVATE||(c=u(b,b.senderId.indexOf(".2")>-1)),"SYSTEM"!==b.sender?(b.roomType!==i.GROUP&&b.senderId!==e.agentSettings.agentId&&(c.roomName=w(b)),b.senderId===e.agentSettings.agentId||G.currentRoom&&G.currentRoom.roomId===b.roomId||G.currentWidgetRoom&&G.currentWidgetRoom.roomId===b.roomId||(c.unreadCount++,a.$broadcast(f.UNREAD_MESSAGES),"GROUP"===b.roomType&&G.chatOptions&&G.chatOptions.playRoom&&chatTone.play(),"PRIVATE"===b.roomType&&G.chatOptions&&G.chatOptions.playDirect&&chatTone.play())):angular.isDefined(c)&&b.roomType===i.PRIVATE&&"SYSTEM"===b.sender&&(b.message.indexOf("has left the room")>-1?c.connectionCount=c.connectionCount>0?c.connectionCount-1:0:b.message.indexOf("has entered the room")>-1&&(c.connectionCount=c.connectionCount<2?c.connectionCount+1:2),c.active=2===c.connectionCount),b.roomType===i.GROUP)c.isGroup=!0;else if(c)""===c.agentId&&v(b,b.roomId);else{var d=b.roomId.indexOf(".2")>-1;c=u(b,d)}a.$broadcast(f.CHAT_MESSAGE,b),c.messages.push(b),c.lastUpdate=new Date,G.chatSendDeferred.resolve(b)}function t(){var a=b.defer(),c=_.filter(e.chatSettings.availableChatRooms,function(a){return!1!==a.active});return _.sortBy(c,"roomName"),_.each(c,function(a){G.chats[a.roomId]||(G.chats[a.roomId]={roomId:a.roomId,roomName:a.roomName,roomDesc:a.roomDesc,unreadCount:0,messages:[],active:!0,type:i.GROUP},k("ENTER",a.roomId))}),b.all([r(),p()]).then(function(b){var c=_.chain(b).flatten().uniqBy("agentId").orderBy("firstName").value();_.each(c,function(a){m(a)}),a.resolve(G.chats)}),a.promise}function u(a,b){return G.chats[a.roomId]={agentName:a.sender,agentId:a.senderId,roomName:w(a),roomId:a.roomId,messages:[],unreadCount:0,isAdmin:b,type:i.PRIVATE,active:!0,connectionCount:0},G.chats[a.roomId]}function v(a,b){var c={agentId:a.senderId};G.chats[b]=angular.extend({},G.chats[b],c)}function w(a){return"SYSTEM"===a.sender?"":a.sender}function x(a){return G.chats[a]}function y(a){var b=e.agentSettings.agentId;return[String(a),String(b)].sort().join("-")}function z(){return A()+B()}function A(){return C(i.GROUP)}function B(){return C(i.PRIVATE)}function C(a){var b=0;return _.each(G.chats,function(c){c.type===a&&(b+=c.unreadCount)}),b}function D(a){G.chats[a].unreadCount=0}function E(a){if("PRIVATE"===G.listViewType){var b=G.chats[a.roomId];b||(m(a),b=G.chats[a.roomId]),b&&!b.active&&G.privateChatRoom("ENTER",a)}G.currentView="CHAT",G.chats[a.roomId].unreadCount=0,G.currentWidgetRoom=G.chats[a.roomId]}function F(){G.chats={},G.currentRoom=null,G.supervisors=[],G.supervisees=[],G.currentView="LIST",G.listViewType=i.GROUP,H=null}var G=this;G.chats={},G.currentRoom=null,G.currentWidgetRoom=null,G.supervisors=[],G.supervisees=[],G.chatSendDeferred=b.defer(),G.currentView="LIST",G.listViewType=i.GROUP,G.chatRoomTypes=i;var H=null,I=b.defer();return a.$on(h.AGENT_LOGIN,function(a,b){G.chatOptions=_.find(c.get("chatOptions"),function(a){return a.agentId===e.agentSettings.agentId})}),a.$on(g.AGENT,function(a,b){G.supervisees=b}),G.getChatById=x,G.getTotalUnreadMsgs=z,G.getPrivateUnreadMsgs=B,G.getGroupUnreadMsgs=A,G.chatMessageCallback=s,G.setAlias=j,G.sendChat=o,G.publicChatRoom=k,G.privateChatRoom=l,G.getSupervisors=p,G.getSupervisees=r,G.createRooms=t,G.createDirect=u,G.createPrivateChatRoom=m,G.removeDirectRoom=n,G.reset=F,G.getDirectChatId=y,G.setChatRead=D,G.goToChatRoom=E,G}a.$inject=["$rootScope","$q","localStorageService","SessionSvc","AgentSvc","growl","CF_CHAT_EVENTS","STATS_EVENTS","AGENT_EVENTS","CF_CHAT_ROOM_TYPES"],angular.module("agent_ui.service.cfChat",[]).factory("CfChatSvc",a).constant("CF_CHAT_EVENTS",{EXPANDED:"cf_chat_expanded",CHAT_MESSAGE:"cf_chat_message",UNREAD_MESSAGES:"cf_chat_unreadMessages",SUPERVISORS_UPDATED:"cf_chat_supervisorsUpdated"}).constant("CF_CHAT_ROOM_TYPES",{PRIVATE:"PRIVATE",GROUP:"GROUP"})}(),function(){"use strict";function a(a,b,c,d,e,f,g,growl,h,i,j,k,l,m,n,o,p,q,r,s){function t(a,b,c,d){d="ACCEPT"===c?"AGENT ACCEPTED CHAT":d||"AGENT REJECTED CHAT",k.getLibraryInstance().chatPresentedResponse(a,b,c,d);var e=W(a,na.chats);e&&f.cancel(e.pendingTimeout),"ACCEPT"===c?na.forwardToChat=!0:"REJECT"===c?(X(a,na.chats),aa(),na.chatCancelledCallback({uii:a})):console.error("invalid response type")}function u(b,c,d,e,f,g){e=e||!1;var h=W(b,na.chats);h.pendingDisp=!1,h.inactive=!0;var i=l.agentSettings.agentId,j=null,m=na.saveScript(h.uii);_.isEmpty(m)||(j=m.model?m.model:m),k.getLibraryInstance().chatDisposition(b,i,c.dispositionId,d,!0,j,h.sessionId),a.$emit(s.PENDING_DISP,{uii:b,isPending:!1}),ca(b)}function v(a,b,c,d){d=d||!1;var e=k.getLibraryInstance();a&&a.length>0&&c&&c.length>0&&b&&b.length>0&&(c=na.replaceMSChars(c),d?e.chatWhisper(a,b,c):e.chatMessage(a,b,c))}function w(a,b,c,d,e){var f=k.getLibraryInstance(),g=e||!1;f.chatRequeue(a,b,c,d,g)}function x(a,b){var c=k.getLibraryInstance();a&&a.length>0&&b&&b.length>0&&(b=na.replaceMSChars(b)),c.chatTyping(a,b)}function y(a,b){W(b,na.chats).agentEnded=!0,k.getLibraryInstance().chatAgentEnd(a,b)}function z(a){k.getLibraryInstance().chatList(l.agentSettings.agentId,a)}function A(a){k.getLibraryInstance().setChatState(a)}function B(a,c,d,e){return k.getLibraryInstance().sendManualOutboundSms(l.agentSettings.agentId,a,c,d,e),ma=b.defer(),ma.promise}function C(a){return W(a,na.chats)}function D(a){var b=moment().diff(moment(a),"seconds");return g("hhMmSs")(b)}function E(b){a.$emit(s.CHAT_ACTIVE,b)}function F(b){var c=W(b.uii,na.chats);if(c||(c=n.getActiveChatForAgentByUii(b.dequeueAgentId,b.uii))&&n.addInactiveChatForMonitoredAgent(b.dequeueAgentId,c),c&&!c.pendingInactive){var e="CHAT.INACTIVE_WAIT_MSG";c.agentEnded&&c.idleTimeoutHit?e="CHAT.TIMEOUT_HIT":c.agentEnded&&(e="CHAT.INACTIVE_MSG"),P(c);var g={accountId:b.accountId,uii:b.uii,from:"SYSTEM",type:"SYSTEM",chatInactiveMsg:!0,message:d.instant(e),dts:new Date};c.pendingInactive=!0,c.transcript&&(c.inactiveTimeout=f(function(){c.inactive=!0,c.pendingMessage="",c.pendingAgentMessage="",c.chatEndedDts=D(c.queueDts),c.transcript.push(g),delete c.inactiveTimeout},2e3)),c.agentEnded&&c.defaultDisp&&!c.isMonitoring&&(pa[c.uii]=window.setTimeout(Z.bind(null,c.uii),1e3*c.defaultDisp.timeout)),a.$emit(s.CHAT_INACTIVE,b)}}function G(d){var e=b.defer();if(!V(d,na.chats))if(d.dts=new Date,d.pending=!0,d.isChat=!0,d.unreadCount=0,d.agentMessage="",d.transcript=d.transcript||[],na.chats.push(d),d.allowAccept){a.$emit(s.CHAT_PRESENTED,d),d.pendingTimeout=f(function(){d.pending&&ia(d)},oa),I(d);var g=document.getElementById("chatPresentedAudio");g&&g.play(),1===na.chats.length&&(j.isChatView=!0,na.selectedChat=d,na.lastSelectedChatUii=d.uii,c.go("base.default.chat.pending",{uii:d.uii}))}else na.forwardToChat=!0,na.newChatCallback(d);return e.resolve(d),e.promise}function H(b){na.chatState={currentState:b.currentState,previousState:b.previousState},na.chatState.currentState===r.CHAT_RNA&&i.custom(null,"chat/modals/rnaModal.tpl.html","RnaStateCtrl"),a.$emit(s.CHAT_STATE_CHANGED,na.chatState)}function I(a){if(o)if("granted"===o.permission){var b,e=new o(d.instant("CHAT.PENDING.PENDING"),{body:d.instant("CHAT.PENDING.ACTION"),icon:h.getSmallAltImgUrl(),silent:!0});e.onclick=function(){parent.focus(),window.focus(),e.close.bind(e);var d=W(a.uii,na.chats);na.selectedChat=d,c.go(ba(d),{uii:d.uii}),b&&f.cancel(b)},b=f(function(){e.close.bind(e)},1e4)}else o.requestPermission(function(b){"granted"===b&&I(a)})}function J(d){var e=b.defer(),f=W(d.uii,na.chats);return f||(f=n.getActiveChatForAgentByUii(d.dequeueAgentId,d.uii)),"SYSTEM"!==d.type&&Q(f),"CLIENT"===d.type?(f.pendingMessage="",f.transcript&&f.transcript.length>0&&(f.isMonitoring||"CLIENT"===f.transcript[f.transcript.length-1].type||(f.lastMsgDts=moment()))):"AGENT"===d.type?(f.agentMessage="",f.pendingAgentMessage="",f.lastMsgDts=moment()):"MONITORING"===d.type&&(f.agentMessage=""),(-1===c.current.name.indexOf("base.default.chat")||na.selectedChat.uii!==d.uii&&na.selectedChatWidget.uii!==d.uii&&!f.isMonitoring)&&(f.unreadCount+=1),d.dts=g("serverTimeToLocal")(d.dts),a.$emit(s.CHAT_MESSAGE,d),d.message=g("toLinkPop")(d),f.transcript.push(d),e.resolve(f),e.promise}function K(b){var c=W(b.uii,na.chats);c||"CLIENT"!==b.type&&"AGENT"!==b.type||(c=n.getActiveChatForAgentByUii(b.dequeueAgentId,b.uii)),c&&("AGENT"===b.type&&c.isMonitoring?c.pendingAgentMessage=b.pendingMessage+"...":"CLIENT"===b.type&&(c.pendingMessage=b.pendingMessage+"..."),a.$emit(s.CHAT_TYPING,b))}function L(b){a.$emit(s.CHAT_LIST,b)}function M(a){var b=W(a.uii,na.chats);if(b||(b=n.getInactiveChatForAgentByUii(a.agentId,a.uii),n.addActiveChatForMonitoredAgent(a.agentId,b)),angular.isDefined(b))if(Q(b),b.inactive=!1,b.pendingInactive=!1,b.inactiveTimeout)f.cancel(b.inactiveTimeout),delete b.inactiveTimeout;else{var c=_.findLastIndex(b.transcript,function(a){return a.chatInactiveMsg});c>-1&&b.transcript.splice(c,1)}}function N(b){if(b.agentId!==l.agentSettings.agentId&&"MONITORING"===b.sessionType&&n.isAgentBeingChatMonitored(b.agentId)){var c=n.getChatMonitoredAgent(b.agentId);if(c){var d=n.getActiveChatForAgentByUii(b.agentId,b.uii);d?d.supervisorSessionId=b.sessionId:(d={transcript:b.transcript,uii:b.uii,supervisorSessionId:b.sessionId,isMonitoring:!0},c.activeChats.push(d))}}a.$emit(s.CHAT_ADD_SESSION,b)}function O(d){var f=b.defer(),h=W(d.uii,na.chats);return d.isMonitoring?(h=n.getActiveChatForAgentByUii(d.monitoredAgentId,d.uii),h?h=angular.extend(h,d):(h=angular.copy(d),n.addActiveChatForMonitoredAgent(d.monitoredAgentId,h)),h.queueDts=g("serverTimeToLocal")(h.queueDts),h.pendingMessage="",h.lastMsgDts=moment(),h.transcript=h.transcript||[],h.queueTime="-1"===h.queueTime?"0":h.queueTime,_.each(h.transcript,function(a){a.message=g("toLinkPop")(a),a.dts=g("serverTimeToLocal")(a.dts)})):(h.pending=!1,d.chatDispositions&&d.chatDispositions.length>0&&(d.pendingDisp=!0,_.some(d.chatDispositions,function(a){if(a.isDefault)return d.defaultDisp=a,!0})),""!==d.scriptId?(d.scriptPending=!0,m.getScript(d.scriptId,d.scriptVersion,"CHAT",d.uii).then(function(a){d.script=a,d.scriptPending=!1,f.resolve(d)})):f.resolve(d)),f.promise.then(function(b){if(b.appUrl&&""!==b.appUrl&&-1===b.appUrl.indexOf("parent:")){var d=e.open(b.appUrl,"_blank");try{d.focus()}catch(a){growl.error("LOGIN.POPUP_BLOCKER_MSG")}}var f=W(b.uii,na.chats);delete f.dts,delete f.message,delete f.messageId,delete f.status,f.transcript&&f.transcript.length&&(b.transcript=b.transcript||[],b.transcript=b.transcript.concat(f.transcript));var h=angular.extend(f,b);h.queueDts=g("serverTimeToLocal")(h.queueDts),h.pendingMessage="",h.lastMsgDts=moment(),h.transcript=h.transcript||[],h.queueTime="-1"===h.queueTime?"0":h.queueTime,Q(h),_.each(h.transcript,function(a){a.message=g("toLinkPop")(a),a.dts=g("serverTimeToLocal")(a.dts)}),a.$emit(s.NEW_CHAT,h),na.forwardToChat&&(delete na.forwardToChat,na.selectedChat=h,c.go("base.default.chat.detail",{uii:h.uii}))}),f.promise}function P(a){a.idleCounter&&(f.cancel(a.idleCounter),delete a.idleCounter,delete a.idleTimeoutHit)}function Q(a){a&&angular.isDefined(a.idleTimeout)&&(P(a),a.idleCounter=f(function(){y(a.agentId,a.uii),a.idleTimeoutHit=!0},60*parseInt(a.idleTimeout)*1e3))}function R(b){X(b.uii,na.chats),a.$emit(s.CHAT_CANCELLED,b.uii),na.selectedChat.uii===b.uii&&aa()}function S(b){X(b.uii,na.chats),a.$emit(s.DISP_RESPONSE,b),na.selectedChat.uii===b.uii&&aa()}function T(a){"OK"===a.status?ma.resolve(a):ma.reject(a)}function U(){var a=0;return _.each(na.chats,function(b){a+=b.unreadCount}),a}function V(a,b){var c=!1;return _.some(b,function(b){if(b.uii===a.uii&&b.chatQueueId===a.chatQueueId)return c=!0,!0}),c}function W(a,b){return _.find(b,function(b){if(b.uii===a)return b})}function X(a,b){var c=W(a,na.chats);c&&f.cancel(c.pendingTimeout);var d=_.findIndex(b,function(b){return b.uii===a});d>-1&&b.splice(d,1)}function Y(a){window.clearTimeout(pa[a]),pa[a]=null}function Z(b){var c=W(b,na.chats);if(c&&c.defaultDisp){var d={contact:c,dispositionType:p.CHAT};a.$emit(q.AUTO_DISPOSITION,d)}Y(b)}function $(a){var b=W(a,na.chats);return m.saveScriptResult(b)}function aa(){var a=W(na.lastSelectedChatUii,na.chats);a?c.go(ba(a),{uii:a.uii}):na.chats.length>0?c.go(ba(na.chats[0]),{uii:na.chats[0].uii}):(na.selectedChat={},c.go("base.default.chat"))}function ba(a){return na.selectedChat=a,"base.default.chat.".concat(a.pending?"pending":"detail")}function ca(a){na.selectedChat.uii===a&&i.close()}function da(a){a=a||na.selectedChat;var c=b.defer();return i.custom(null,"factories/dialogs/disposition/disposition.dialog.tpl.html","DispositionChatConfigCtrl",{selectedChat:function(){return a},disposition:function(){return a.disposition},dispositionList:function(){return a.chatDispositions}}).then(function(){c.resolve(!0)},function(){c.resolve(!1)}),c.promise}function ea(){return na.selectedChat&&na.selectedChat.pendingDisp&&"SUPPRESS"!==na.selectedChat.surveyPopType}function fa(){return!na.selectedChat.requeueSent&&!na.selectedChat.inactive}function ga(){return ea()&&!na.selectedChat.inactive}function ha(){return ea()&&na.selectedChat.inactive}function ia(a){var c=b.defer();return i.custom(null,"chat/modals/chatPending.tpl.html","ChatPendingModalCtrl",{chat:function(){return a}}).then(function(){c.resolve(!0)},function(){c.resolve(!1)}),c.promise}function ja(a){a&&a.stopPropagation();var c=b.defer();return i.custom(null,"chat/modals/outboundSms.tpl.html","ChatOutboundSmsModalCtrl",null).then(function(a){c.resolve(!0)},function(){c.resolve(!1)}),c.promise}function ka(a){var b=a;return b=b.replace(/[\u2018\u2019\u201A]/g,"'"),b=b.replace(/[\u201C\u201D\u201E]/g,'"'),b=b.replace(/\u2026/g,"..."),b=b.replace(/[\u2013\u2014]/g,"-"),b=b.replace(/\u02C6/g,"^"),b=b.replace(/\u2039/g,"<"),b=b.replace(/\u203A/g,">"),b=b.replace(/[\u02DC\u00A0]/g," ")}function la(){_.each(na.chats,function(a){a.pendingTimeout&&f.cancel(a.pendingTimeout),a.idleCounter&&f.cancel(a.idleCounter)}),na.selectedChat={},na.selectedChatWidget={},na.chats=[],na.chatState={currentState:"None",previousState:""},pa=[]}var ma,na=this,oa=15e3,pa=[];return na.selectedChat={},na.lastSelectedChatUii="",na.selectedChatWidget={},na.chats=[],na.chatState={currentState:"None",previousState:""},na.sendPresentedResponse=t,na.chatDisposition=u,na.sendMessage=v,na.requeue=w,na.typing=x,na.agentEndChat=y,na.getChatList=z,na.sendManualOutboundSms=B,na.setChatState=A,na.chatActiveCallback=E,na.chatCancelledCallback=R,na.chatClientReconnectCallback=M,na.chatInactiveCallback=F,na.chatListCallback=L,na.chatMessageCallback=J,na.chatPresentedCallback=G,na.chatStateCallback=H,na.chatTypingCallback=K,na.dispResponse=S,na.manualOutboundSmsResponse=T,na.newChatCallback=O,na.addChatSessionCallback=N,na.getTotalUnreadMsgs=U,na.saveScript=$,na.reset=la,na.openDispositionModal=da,na.getChatByUii=C,na.getChatDuration=D,na.allowDisposition=ea,na.allowRequeue=fa,na.activePendingDisp=ga,na.notActivePendingDisp=ha,na.openChatPendingModal=ia,na.openOutboundSmsModal=ja,na.replaceMSChars=ka,na}a.$inject=["$rootScope","$q","$state","$translate","$window","$timeout","$filter","growl","BrandingSvc","Dialog","CallSvc","SessionSvc","AgentSvc","ScriptSvc","MonitorSvc","Notification","DISPOSITION_TYPES","DISPOSITION_EVENTS","CHAT_STATES","CHAT_EVENTS"],angular.module("agent_ui.service.chat",[]).factory("ChatSvc",a).constant("CHAT_EVENTS",{CHAT_ACTIVE:"chat_active",CHAT_CANCELLED:"chat_cancelled",CHAT_INACTIVE:"chat_inactive",CHAT_MESSAGE:"chat_message",CHAT_PRESENTED:"chat_presented",CHAT_REJECTED:"chat_rejected",CHAT_ACCEPTED:"chat_accepted",CHAT_TYPING:"chat_typing",DISP_RESPONSE:"chat_dispResponse",PENDING_DISP:"chat_pendingDisp",NEW_CHAT:"chat_new",CHAT_LIST:"chat_list",CHAT_STATE_CHANGED:"chat_stateChanged",CHAT_ADD_SESSION:"chat_addSession"}).constant("CHAT_STATES",{CHAT_AVAILABLE:"CHAT-AVAILABLE",CHAT_RNA:"CHAT-RNA",CHAT_ENGAGED:"CHAT-ENGAGED",CHAT_PRESENTED:"CHAT-PRESENTED"})}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){var a=w()[b.agentSettings.agentId];x.selectedType=a&&a.defaultType||g.DAILY,x.DailyMetrics=i(),x.InboundMetrics=j(),x.OutboundMetrics=k(),x.BlendedMetrics=[],x.ChatMetrics=l()}function i(){var a={dashboardType:g.DAILY,type:e.AGENT_DAILY,order:1,detail:{disable:!0},stats:{availableData:[{key:"totalLoginSessions",type:d.NUMBER},{key:"totalCallsHandled",type:d.NUMBER},{key:"totalManualDials",type:d.NUMBER},{key:"totalRna",type:d.NUMBER},{key:"totalSuccessDispositions",type:d.NUMBER},{key:"totalLoginTime",type:d.TIME},{key:"totalOffhookTime",type:d.TIME},{key:"totalTalkTime",type:d.TIME},{key:"pendingDisp",type:d.STRING}]}},f={key:"totalPreviewDials",type:d.NUMBER};return c.applicationSettings.isTcpaSafeMode&&(f.key="totalSafeDials"),a.stats.availableData.splice(2,0,f),b.agentPermissions.allowChat&&a.stats.availableData.splice(1,0,{key:"totalChatsHandled",type:d.NUMBER}),n(a),[a]}function j(){var a={dashboardType:g.INBOUND,type:e.QUEUE,order:3,detail:{view:f.TABLE},stats:{availableData:[{key:"totals.active",type:d.NUMBER},{key:"totals.answered",type:d.NUMBER},{key:"totals.inQueue",type:d.NUMBER},{key:"totals.longCall",type:d.NUMBER},{key:"totals.shortCall",type:d.NUMBER},{key:"totals.routing",type:d.NUMBER},{key:"totals.presented",type:d.NUMBER},{key:"totals.abandoned",type:d.NUMBER},{key:"totals.shortAbandon",type:d.NUMBER},{key:"totals.deflected",type:d.NUMBER},{key:"totals.slaPass",type:d.NUMBER},{key:"totals.slaFail",type:d.NUMBER},{key:"totals.totalQueueTime",type:d.TIME},{key:"totals.avgQueueTime",type:d.TIME},{key:"totals.totalABATime",type:d.TIME},{key:"totals.avgAba",type:d.TIME},{key:"totals.totalSOA",type:d.TIME},{key:"totals.avgSOA",type:d.TIME},{key:"totals.totalTalkTime",type:d.TIME},{key:"totals.avgTalkTime",type:d.TIME}]}};return n(a),[a]}function k(){var a={dashboardType:g.OUTBOUND,type:e.CAMPAIGN,order:4,detail:{view:f.TABLE},stats:{availableData:[{key:"totals.abandon",type:d.NUMBER},{key:"totals.active",type:d.NUMBER},{key:"totals.answer",type:d.NUMBER},{key:"totals.busy",type:d.NUMBER},{key:"totals.complete",type:d.NUMBER},{key:"totals.error",type:d.NUMBER},{key:"totals.fax",type:d.NUMBER},{key:"totals.intercept",type:d.NUMBER},{key:"totals.machine",type:d.NUMBER},{key:"totals.noanswer",type:d.NUMBER},{key:"totals.pending",type:d.NUMBER},{key:"totals.ready",type:d.NUMBER},{key:"totals.totalConnects",type:d.NUMBER},{key:"totals.totalTalkTime",type:d.TIME}]}};return n(a),[a]}function l(){var a={dashboardType:g.CHAT,type:e.CHAT,order:2,detail:{view:f.TABLE},stats:{availableData:[{key:"totals.abandoned",type:d.NUMBER},{key:"totals.accepted",type:d.NUMBER},{key:"totals.active",type:d.NUMBER},{key:"totals.deflected",type:d.NUMBER},{key:"totals.inQueue",type:d.NUMBER},{key:"totals.presented",type:d.NUMBER},{key:"totals.routing",type:d.NUMBER},{key:"totals.ttotalAbandonTime",type:d.TIME},{key:"totals.ttotalAnswerTime",type:d.TIME},{key:"totals.ttotalChatTime",type:d.TIME},{key:"totals.ttotalQueueTime",type:d.TIME}]}};return n(a),[a]}function m(a){if(angular.isDefined(x[a])){var b=angular.copy(x[a][0]);_.some(x.BlendedMetrics,function(a){return a.type===b.type})||(b.detail.disable=!0,b.dashboardType=g.BLENDED,n(b),x.BlendedMetrics.push(b))}else console.warn("type "+a+" does not exist")}function n(a){var b=[],c=u(a.dashboardType);c&&c.savedMetrics&&c.savedMetrics[a.type]?_.each(c.savedMetrics[a.type],function(a){b.push(a)}):(b.push(a.stats.availableData[0].key),b.push(a.stats.availableData[1].key),b.push(a.stats.availableData[2].key),b.push(a.stats.availableData[3].key),a.type===e.AGENT_DAILY&&(b.push(a.stats.availableData[4].key),b.push(a.stats.availableData[5].key),b.push(a.stats.availableData[6].key),b.push(a.stats.availableData[7].key))),a.stats.defaults=b}function o(){v(x.selectedType,"defaultType")}function p(a){v(_.find(x[x.selectedType],function(b){return b.type===a}).stats.defaults,"savedMetrics",a)}function q(a){return _.chain(a).filter(function(a){return!a.visible}).map(function(a){return a.field}).value()}function r(a){v(q(a),"hiddenColumns")}function s(a){v(q(a),"agentTable")}function t(){return w()[b.agentSettings.agentId]}function u(a){return w()[b.agentSettings.agentId][a]}function v(c,d,e){var f=w(),g=f[b.agentSettings.agentId];switch(d){case"defaultType":g[d]=c;break;case"savedMetrics":g[x.selectedType][d]=g[x.selectedType][d]||{},g[x.selectedType][d][e]=c;break;case"hiddenColumns":g[x.selectedType][d]=c;break;case"agentTable":g[d]=g[d]||{},g[d].hiddenColumns=c}a.set("dashboards",f)}function w(){var c=a.get("dashboards")||{};return c[b.agentSettings.agentId]=c[b.agentSettings.agentId]||{},c[b.agentSettings.agentId][x.selectedType]=c[b.agentSettings.agentId][x.selectedType]||{},c}var x=this;return x.DailyMetrics=[],x.InboundMetrics=[],x.OutboundMetrics=[],x.BlendedMetrics=[],x.ChatMetrics=[],x._init=h,h(),x.addTypeToBlended=m,x.saveMetrics=p,x.saveDetails=r,x.saveAgentDetails=s,x.saveSelectedType=o,x.getSavedAgentDashboard=t,x.getSavedAgentDashboardByType=u,x}a.$inject=["localStorageService","AgentSvc","ApplicationSvc","STATS_DATA_TYPES","STATS_EVENTS","RTR_WIDGET_VIEWS","DASHBOARD_TYPES"],angular.module("agent_ui.service.dashboard",[]).service("DashboardSvc",a).constant("DASHBOARD_TYPES",{DAILY:"DailyMetrics",INBOUND:"InboundMetrics",OUTBOUND:"OutboundMetrics",BLENDED:"BlendedMetrics",CHAT:"ChatMetrics"})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(b,c,d,f,g,i,j,k){var l=a.defer();return k=k||h.CALL,c?e.handleEmailTemplate(c,{},k,b).then(function(a){m(b.uii,c,d,f,g,i,j,k),l.resolve(!0)}):(console.error("Please selected a valid disposition."),l.reject()),l.promise}function l(b,d){var e=a.defer(),f=b.defaultDisp;if(d=d||h.CALL,f){var i="",j=angular.copy(f),k=b.disposition&&b.disposition.notes||"";j.contactForwarding=!1,d===h.CALL&&c.currentCall.baggage&&c.currentCall.baggage.leadId&&c.currentCall.baggage.leadId===g.selectedPreviewLead.leadId&&(i=angular.copy(g.selectedPreviewLead.requestId),g.selectedPreviewLead.complete=!0,g.clearSelectedPreviewLead()),m(b.uii,f,k,!1,null,void 0,i,d),e.resolve(!0)}else console.error("No valid disposition for auto disposition."),e.reject()}function m(a,b,e,g,i,k,l,m){var n=angular.copy(g),o="";b.isComplete&&(n=!1),b.contactForwarding||(i=null),g&&(o=moment(k).tz("US/Eastern").format("YYYY-MM-DD HH:mm:ss")),b.uii=a,m===h.CALL?(f.updateCallHistory(j.DISPOSITION_PACKET,b),c.dispositionCall(a,b.dispositionId,e,n,o,i,l)):d.chatDisposition(a,b,e,n,o,i)}var n={sendDisposition:k,autoDisposition:l},o=b.$on(i.AUTO_DISPOSITION,function(a,b){l(b.contact,b.dispositionType)});return b.$on("$destroy",function(){o()}),n}a.$inject=["$q","$rootScope","CallSvc","ChatSvc","EmailTemplateSvc","CallHistorySvc","LeadSvc","DISPOSITION_TYPES","DISPOSITION_EVENTS","CALL_HISTORY_EVENTS"],angular.module("agent_ui.service.disposition",[]).service("DispositionSvc",a).constant("DISPOSITION_TYPES",{CALL:"CALL",CHAT:"CHAT"}).constant("DISPOSITION_EVENTS",{AUTO_DISP:"autoDisposition"})}(),function(){"use strict";function a(a){return a("/voice/api/v1/agent/:accountId/emailTemplates/:emailTemplateId",{},{get:{method:"GET"},send:{method:"POST",url:"/voice/api/v1/agent/:accountId/emailTemplates/:emailTemplateId/send"}})}function b(a){return a("/voice/api/v1/agent/:accountId/emailWithAttachments/send",{},{send:{method:"POST",headers:{"Content-Type":void 0,enctype:"multipart/form-data"}}})}function c(a,b,d,e,f,g,h,i){function j(b){return a(function(a){return c.get(b.emailTemplateId).then(function(b){a(b)})})}function k(){return a(function(a){return h.formatCallData().then(function(b){a(b)})})}function l(){return a(function(a){return h.formatChatData().then(function(b){a(b)})})}var m=b.$on("email-template-presend",function(a,b){c.preSend(b.emailObj,b.results)});return b.$on("$destroy",function(){m()}),c.get=function(b){var c=i.agentSettings,d=c.guid,f=c.accountId,g=a.defer();return e.get({accountId:f,emailTemplateId:b,guid:d},function(a){g.resolve(a)}),g.promise},c.send=function(b,c){var d=i.agentSettings,f=d.guid,g=d.accountId,h=a.defer();return e.send({accountId:g,emailTemplateId:b,guid:f},c,function(a){h.resolve(a)}),h.promise},c.buildDebugEmail=function(b){var c=i.agentSettings,e=c.guid,g=c.accountId,h=['<table width="600" border="0" cellpadding="5" cellspacing="0">','<tr valign="left">','<td colspan="2"><h2>AgentUI Support Request</h2></td>',"</tr>",'<tr valign="right">','<td align="right" width="100">Agent UI Version:</td>',"<td>TOBY-"+d.version+"</td>","</tr>",'<tr valign="right">','<td align="right" width="100">Agent Name:</td>',"<td>"+b.agentName+" (id:"+i.agentSettings.agentId+")</td>","</tr>","<tr>",'<td align="right" width="100">Agent Type:</td>',"<td>"+i.agentSettings.agentType+"</td>","</tr>","<tr>",'<td align="right" width="100">username:</td>',"<td>"+i.agentSettings.username+"</td>","</tr>","<tr>",'<td align="right" width="100">Email:</td>',"<td>"+b.emailFrom+"</td>","</tr>","<tr>",'<td align="right" width="100">Phone:</td>',"<td>"+b.dialDest+"</td>","</tr>","<tr>",'<td align="right" width="100">Account ID:</td>',"<td>"+i.agentSettings.accountId+"</td>","</tr>","</table>","<br />","<h3>Detail:</h3>",b.emailDetail,"<br />"],j={accountId:i.agentSettings.accountId,emailTo:b.emailTo||"monitoring@connectfirst.com",emailBcc:"monitoring@connectfirst.com",emailFrom:b.emailFrom,emailSubject:b.emailSubject,emailRte:h.join("")},k=new FormData;k.append("email",JSON.stringify(j)),k.append("attachments",b.screenShot),k.append("attachments",b.systemLogs),k.append("attachments",b.consoleLogs);var l=a.defer();return f.send({accountId:g,authToken:e},k,function(a){l.resolve(j)}),l.promise},c.handleEmailTemplate=function(b,d,e,f){e=e||"CALL",d=d||{};var h=a.defer();if(b&&b.emailTemplateId&&b.emailTemplateId>0){var i={emailTemplate:[j,b],leadData:function(){return d},type:function(){return e},scriptResult:function(){return f.scriptResult},scriptData:function(){return"CHAT"===e?l():k()}};g.custom($("#send-disp-btn"),"phone/modals/emailTemplate.tpl.html","EmailTemplateCtrl",i).then(function(a){c.send(a.emailTemplateId,a),h.resolve(!0)},function(){h.resolve(!0)})}else h.resolve(!0);return h.promise},c}a.$inject=["$resource"],b.$inject=["$resource"],c.$inject=["$q","$rootScope","ENV_VARS","EmailTemplateResourceFactory","GenericEmailResourceFactory","Dialog","ScriptFormatSvc","AgentSvc"],angular.module("agent_ui.service.emailTemplate",[]).factory("EmailTemplateResourceFactory",a).factory("GenericEmailResourceFactory",b).service("EmailTemplateSvc",c)}(),function(){"use strict";function a(b,c,d){function e(){if(window.indexedDB){var b=indexedDB.open("callHistoryDb",k);return b.onerror=function(a){
console.error("Error requesting DB access")},b.onupgradeneeded=function(b){if(a.callHistoryDb=b.target.result,!a.callHistoryDb.objectStoreNames.contains("callHistory")){var c=a.callHistoryDb.createObjectStore("callHistory",{autoIncrement:!0,keyPath:"callHistoryId"});c.createIndex("callHistoryId","callHistoryId",{unique:!0}),c.createIndex("agentId","agentId",{unique:!1}),c.createIndex("dts","dts",{unique:!1})}},c(function(c){b.onsuccess=function(b){return a.callHistoryDb=b.target.result,a.purgeLog(a.callHistoryDb,"callHistory"),a.callHistoryDb.onerror=function(a){console.error("CallHistoryService callHistoryDb: Database error - "+a.target.errorCode)},a.callHistoryDb.onsuccess=function(a){console.log("CallHistoryService callHistoryDb: Successful logging of record")},c()}})}return console.warn("Your browser doesn't support a stable version of IndexedDB. Call History between sessions will not be available."),c.reject()}function f(b,e){if(a.callHistoryDb){var f=a.callHistoryDb.transaction(["callHistory"],"readonly"),g=f.objectStore("callHistory"),h=g.index("agentId"),i=IDBKeyRange.only(b),k=null,l=0,m=0,n=[],o=0;e?l=d.INITIAL_LIMIT+d.INCREMENT_FACTOR*j:(l=d.INITIAL_LIMIT,j=0),j++;var p=h.count(b);return p.onsuccess=function(){o=p.result},c(function(b){h.openCursor(i,"prev").onsuccess=function(c){k=c.target.result,k&&m<l?(n.push(k.value),m++,k.continue()):(b(n),a.records=n,l<=o?a.callLimit=l:e&&j--)},h.openCursor(i,"prev").onerror=function(a){console.error("There was an error getting the records, ",a)}})}}function g(b){if(a.callHistoryDb){var d=a.callHistoryDb.transaction(["callHistory"],"readonly"),e=d.objectStore("callHistory"),f=e.index("agentId"),g=f.count(b);return c(function(a){g.onsuccess=function(){a(g.result)}})}}function h(b,c){if(a.callHistoryDb){var d=a.callHistoryDb.transaction(["callHistory"],"readwrite"),e=d.objectStore("callHistory");e.index("callHistoryId").get(b).onsuccess=function(a){var d=a.target.result;d.record=JSON.stringify(c),e.put(d).onerror=function(a){console.error("There was an error updating the callHistory Record, "+b,a)}}}}function i(a){return{record:JSON.stringify(a),callHistoryId:a.time,agentId:b.agentSettings.agentId,dts:new Date}}var j=0,k=1;return a.callHistoryDb=null,a.indexDbConstant=d,a.callLimit=d.INITIAL_LIMIT,a.getCallHistoryRecordsByAgent=f,a.getIndexDbLength=g,a.modifySingleRecord=h,a.initialize=e,a.purgeLog=function(a,b){if(a)try{var c=a.transaction([b],"readwrite"),e=c.objectStore(b),f=e.index("dts"),g=new Date;g.setDate(g.getDate()-d.RETENTION_DAYS);var h=IDBKeyRange.upperBound(g);f.openCursor(h).onsuccess=function(a){var b=a.target.result;b&&(e.delete(b.primaryKey),b.continue())}}catch(a){console.error("There was an error purging the IndexedDB logs",a)}},a.addCallHistoryRecord=function(b){if(a.callHistoryDb){a.callHistoryDb.transaction(["callHistory"],"readwrite").objectStore("callHistory").add(i(b))}},a}a.$inject=["AgentSvc","$q","INDEX_DB_CONSTANT"],angular.module("agent_ui.service.indexDbService",[]).service("IndexDbSvc",a).constant("INDEX_DB_CONSTANT",{RETENTION_DAYS:1,INITIAL_LIMIT:50,INCREMENT_FACTOR:50,MAX_LIMIT:500})}(),function(){"use strict";function a(b,c,d){return a.getList=function(a){a=a||[];var e=c("/voice/api/v1/agent/:accountId/knowledgeBaseGroups",{accountId:"@accountId"},{get:{method:"GET",isArray:!0}}),f=b.defer();return e.get({accountId:d.agentSettings.accountId,guid:d.agentSettings.guid,knowledgeBaseGroupIds:a},function(a){f.resolve(a)}),f.promise},a}a.$inject=["$q","$resource","AgentSvc"],angular.module("agent_ui.service.knowledgeBase",[]).service("KnowledgeBaseSvc",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,growl){function l(b){var c=a.defer();return e.getLibraryInstance().leadHistory(b,function(a){c.resolve(a.leadHistory)}),c.promise}function m(b){var c=a.defer();return e.getLibraryInstance().leadInsert(b,function(a){"TRUE"===a.status?c.resolve(a):(console.error("leadInsert error.",a),a.message&&a.detail?growl.error(a.message+" "+a.detail):growl.error("PHONE.LEAD_MANAGEMENT.INSERT_ERR_MSG"),c.reject(a))}),c.promise}function n(b){var c=a.defer(),f=e.getLibraryInstance(),g={};return _.each(Object.keys(b),function(a){var c=d("camelToSnake")(a);g[c]=b[a]}),f.leadUpdate(b.leadId,b.destination,g,function(a){"TRUE"===a.status?(growl.info("PHONE.LEAD_MANAGEMENT.UPDATE_LEAD.SUCCESS_MSG"),o(b),c.resolve(a)):(a.message&&a.detail&&growl.error(a.message+" "+a.detail),console.error("leadUpdate error.",a),c.reject(a))}),c.promise}function o(a){var b=_.findIndex(f.searchedLeads,function(b){return b.requestId===a.requestId});b>-1&&angular.extend(f.searchedLeads[b],a),(b=_.findIndex(f.previewLeads,function(b){return b.requestId===a.requestId}))>-1&&angular.extend(f.previewLeads[b],a)}function p(a,c,d){var e=!1,g=["PENDING","READY","CALLBACK","AGENT-CALLBACK","PENDING-CALLBACK","COMPLETE"],j=["PENDING","ACTIVE"],k=["TRANSITION","ENGAGED","RNA-STATE"],l=i.onCallOrPendingDisp(),m=h.agentPermissions.progressiveEnabled&&d,n=-1===g.indexOf(a.leadState),o=k.indexOf(h.currentAgentState.baseState)>-1,p="SEARCH"===b.params.type&&j.indexOf(a.leadState)>-1,q=f.hciEnabled();return(m||l||c&&!q||a.hciDialed||n||o||p)&&(e=!0),e}function q(a,c){var d=!1,e=["PENDING","ACTIVE","DO-NOT-CALL","EXPIRED"],f=["TRANSITION","ENGAGED","RNA-STATE"],g=i.onCallOrPendingDisp(),j=f.indexOf(h.currentAgentState.baseState)>-1,k="SEARCH"===b.params.type&&e.indexOf(a.leadState)>-1;return(g||c||j||k)&&(d=!0),d}function r(a,b){var c=!1,d=["PENDING","CALLBACK","AGENT-CALLBACK","PENDING-CALLBACK"],e=["TRANSITION","ENGAGED","RNA-STATE"],f=i.onCallOrPendingDisp(),g=-1===d.indexOf(a.leadState),j=e.indexOf(h.currentAgentState.baseState)>-1;return!b&&(f||g||j)&&(c=!0),c}function s(a){var b=["PENDING","DIALING","RINGING","NOANSWER","BUSY","MACHINE","HANGUP","INTERCEPT","DISCONNECT","ABANDON","CONGESTION","APP-DNC","OTHER"];return a&&b.indexOf(a.leadState)>-1}function t(a,c,d){var e=!1,f=["TRANSITION","ENGAGED","RNA-STATE"],g=!0,j=i.onCallOrPendingDisp(),k=s(a),l=i.onCall,m=h.agentPermissions.progressiveEnabled,n=u(a,d),o=f.indexOf(h.currentAgentState.baseState)>-1,p="SEARCH"!==b.params.type&&"INSERT"!==b.params.type&&m;return i.currentCall&&i.currentCall.baggage&&(g=a.leadId===i.currentCall.baggage.leadId),p?e=!0:!g&&(c||j||o)?e=!0:g&&(c||l||n||o)?e=!0:g||k?!g&&n&&(e=!0):e=!0,e}function u(a,b){return!(!a||!angular.isDefined(a.dialedList))&&a.dialedList.indexOf(b)>-1}function v(b,c){var d=a.defer();return f.hciEnabled()&&(b.hciDialed=!0,o(b)),f.hciEnabled()||h.isOffhook?(x(b,c),d.resolve(!0)):h.offhookInit().then(function(a){"OK"===a.status&&(x(b,c),d.resolve(!0))},function(a){a&&a.detail&&e.showOffhookError(a.detail,!1),d.resolve(!1)}),d.promise}function w(){D.selectedPreviewLead={}}function x(a,b){g.applicationSettings.isTcpaSafeMode?f.safeModeCall(a.requestId,b):f.previewDial(a.requestId,b),a.hciDialed||j.createNewCallAttempt(b||a.ani,a,k.OUTBOUND)}function y(a){var b={aux1:c.instant("GENERICS.LABELS.AUX1"),aux2:c.instant("GENERICS.LABELS.AUX2"),aux3:c.instant("GENERICS.LABELS.AUX3"),aux4:c.instant("GENERICS.LABELS.AUX4"),aux5:c.instant("GENERICS.LABELS.AUX5")},d=f.getCustomLabelsByCampaign(a);return(!d||0===d.length)&&i.currentCall&&i.currentCall.baggage&&i.currentCall.baggage.customLabels&&(d=i.currentCall.baggage.customLabels),_.each(d,function(a,c){var d=c+1,e="aux"+d,f="aux_"+d+"_label",g=a[f];g&&g.length>0&&(b[e]=g)}),b}function z(a){return a.dialedList=a.dialedList||[],a.destination&&!angular.isArray(a.destination)&&(a.destination=a.destination.split("|")),a.dialedList.length===a.destination.length}function A(){D.clearSelectedPreviewLead()}function B(){"base.default.phone.preview.detail"===b.current.name&&b.go("^")}function C(a){var b=!1;if(a&&a.destination){var c=a.destination;angular.isArray(c)?b=!0:angular.isString(c)&&c.indexOf("|")>-1&&(b=!0)}return b}var D=this;return D.selectedPreviewLead={},D.leadHistory=l,D.leadInsert=m,D.updateLead=n,D.dialLead=v,D.clearSelectedPreviewLead=w,D.leadDialDisabled=p,D.leadSearchDialDisabled=q,D.leadCancelDisabled=r,D.multiNumberLeadDialDisabled=t,D.getAuxLabels=y,D.allNumbersDialed=z,D.leadStateAvailable=s,D.goToPreviewDial=B,D.isMultiNumberLead=C,D.reset=A,D}a.$inject=["$q","$state","$translate","$filter","SessionSvc","OutboundSvc","ApplicationSvc","AgentSvc","CallSvc","CallHistorySvc","CALL_TYPES","growl"],angular.module("agent_ui.service.lead",[]).factory("LeadSvc",a)}(),function(){"use strict";function a(growl,b){return a.showLoginInvalid=function(){return growl.error("LOGIN.ERROR_INVALID")},a.showConfigInvalid=function(a){return growl.error(b.instant("LOGIN.ERROR_CONFIG",{detail:a}))},a.showLoginRequired=function(){return growl.error("LOGIN.ERROR_REQUIRED")},a}a.$inject=["growl","$translate"],angular.module("agent_ui.service.login",[]).service("LoginSvc",a).constant("LOGIN_TYPE",{EXTERNAL:"external",INTEGRATED:"integrated",EXTENSION:"extension",RC_PHONE:"RC_PHONE"})}(),function(){"use strict";function a(a,b,c,d){function e(a,b,c){x(a,b,c)}function f(){x()}function g(){null!=D.call.type&&!1===D.call.connecting&&(D.call.type=b.MONITOR)}function h(){y(),D.call.duration=0,D.call.agent&&D.call.agent.agentId&&D.call.type&&z()}function i(a){var b=p(a);b&&(A(b),B(b))}function j(a){A(p(a))}function k(b){var c=a.getLibraryInstance(),d={agentId:b,activeChats:[],inactiveChats:[]};D.chatMonitoringAgents.push(d),c.monitorAgentChats(b)}function l(a){w(a.monitoredAgentId)}function m(b){a.getLibraryInstance().stopMonitoringChatsByAgent(b)}function n(){a.getLibraryInstance().stopMonitoringAllAgentChats()}function o(a){var b=p(a);return angular.isDefined(b)}function p(a){return _.find(D.chatMonitoringAgents,function(b){return b.agentId===a})}function q(a){var b,c=p(a);return c&&(b=c.activeChats),b}function r(a){var b,c=p(a);return c&&(b=c.inactiveChats),b}function s(a,b){var c,d=p(a);return d&&(c=_.find(d.activeChats,function(a){return a.uii===b})),c}function t(a,b){var c,d=p(a);return d&&(c=_.find(d.inactiveChats,function(a){return a.uii===b})),c}function u(a,b){var c,d=p(a);if(d){c=_.find(d.activeChats,function(a){return a.uii===b.uii}),c||d.activeChats.unshift(b);var e=_.findIndex(d.inactiveChats,function(a){return a.uii===b.uii});-1!=e&&d.inactiveChats.splice(e,1)}}function v(a,b){var c,d,e=p(a);e&&(c=_.find(e.inactiveChats,function(a){return a.uii===b.uii}),c||e.inactiveChats.unshift(b),-1!=(d=_.findIndex(e.activeChats,function(a){return a.uii===b.uii}))&&e.activeChats.splice(d,1))}function w(a){var b=_.findIndex(D.chatMonitoringAgents,function(b){return b.agentId===a});-1!==b&&D.chatMonitoringAgents.splice(b,1)}function x(a,b,c){y(),D.call={agent:a||{},type:b||null,duration:0,connecting:c||!1},a&&a.agentId&&b&&z()}function y(){D.call.interval&&clearInterval(D.call.interval)}function z(){D.call.interval=setInterval(function(){D.call.duration++},1e3)}function A(a){angular.isDefined(a)&&a.timeout&&clearTimeout(a.timeout)}function B(a){a.duration=0,a.timeout=setTimeout(function(){m(a.agentId),w(a.agentId),A(a)},6e5)}function C(){D.selectedAgent={},D.monitoredAgent={},D.call={agent:{},type:null,duration:0,connecting:!1},_.each(D.chatMonitoringAgents,function(a){A(a)}),D.chatMonitoringAgents=[]}var D=this;return D.selectedAgent={},D.monitoredAgent={},D.call={agent:{},type:null,duration:0,connecting:!1},D.chatMonitoringAgents=[],D.monitorAgent=e,D.clearMonitor=f,D.setToMonitor=g,D.startTimer=h,D.startChatTimer=i,D.stopChatTimer=j,D.chatMonitor=k,D.stopMonitoringChatsByAgent=m,D.stopMonitoringAllChats=n,D.getChatMonitoredAgent=p,D.isAgentBeingChatMonitored=o,D.getActiveChatListForAgent=q,D.getInactiveChatListForAgent=r,D.getActiveChatForAgentByUii=s,D.getInactiveChatForAgentByUii=t,D.addActiveChatForMonitoredAgent=u,D.addInactiveChatForMonitoredAgent=v,D.stopAgentChatMonitorCallback=l,D.reset=C,c.$on(d.AGENT,function(a,b){var c;D.monitoredAgent.agentId&&(c=_.find(b,function(a){return a.agentId===D.monitoredAgent.agentId})),c&&(D.monitoredAgent=c)}),D}a.$inject=["SessionSvc","MONITOR_TYPES","$rootScope","STATS_EVENTS"],angular.module("agent_ui.service.monitor",[]).factory("MonitorSvc",a).constant("MONITOR_TYPES",{MONITOR:"monitor",COACH:"coach",BARGE_IN:"bargeIn"})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,growl,i,j,k){function l(a,b){b=b||"",g.returnToLeadManagerAfterCall=!0,S.pendingPreviewDial=!0,e.getLibraryInstance().previewDial(a,b)}function m(a,b){b=b||"",g.returnToLeadManagerAfterCall=!0,S.pendingPreviewDial=!0,e.getLibraryInstance().safeModeCall(a,b)}function n(b){return T=window.setTimeout(P,U),S.leadSearchLoading=!0,W=a.defer(),e.getLibraryInstance().previewFetch(b,I),W.promise}function o(b){return T=window.setTimeout(P,U),S.leadSearchLoading=!0,V=a.defer(),e.getLibraryInstance().searchLeads(b,H),V.promise}function p(b){return T=window.setTimeout(P,U),S.leadSearchLoading=!0,W=a.defer(),e.getLibraryInstance().safeModeFetch(b,I),W.promise}function q(b){return T=window.setTimeout(P,U),S.leadSearchLoading=!0,V=a.defer(),e.getLibraryInstance().safeSearchLeads(b,H),V.promise}function r(){return X=a.defer(),e.getLibraryInstance().getPendingCallbacks(f.agentSettings.agentId,s),X.promise}function s(a){return b.$emit(i.FUTURE_CALLBACKS_UPDATED,a),S.futureCallbacks=a,X.resolve(a),X.promise}function t(b){return Y=a.defer(),e.getLibraryInstance().cancelCallback(b,f.agentSettings.agentId,u),Y.promise}function u(a){if("OK"===a.message){var c=R(a.leadId);c&&("CURRENT"===c.type?S.agentCallbacks.splice(c.index,1):S.futureCallbacks.splice(c.index,1)),growl.info("PHONE.CALLBACKS.CALLBACK_CANCELED_NOTIFICATION"),b.$emit(i.CALLBACK_CANCELED,a),Y.resolve(a)}else growl.error("PHONE.CALLBACKS.CALLBACK_CANCELED_ERROR.MSG",{title:d.instant("PHONE.CALLBACKS.CALLBACK_CANCELED_ERROR.TITLE")}),Y.reject(a);return Y.promise}function v(b,c,d,f,g){var h=a.defer();return d=d||!1,e.getLibraryInstance().dispositionManualPass(b,c,d,f,g.leadId,g.requestId,g.externId),g.leadState="MANUAL_PASS",K(g),h.resolve(!0),h.promise}function w(){var a=D();return a.hciEnabled&&a.hciClicker&&a.hciType!==k.DISABLED}function x(){var a=D();return w()&&a.hciType===k.PACING}function y(){var a=D();return w()&&a.hciType===k.FETCH}function z(a){var b=A(a);return null==b?[]:b.customLabels}function A(a){var b=B();return _.find(b,function(b){return b.campaignId===a})}function B(){var a=[];return S.outboundSettings.availableCampaigns&&(a=_.orderBy(angular.copy(S.outboundSettings.availableCampaigns),function(a){return a.campaignName?a.campaignName.toString().toLowerCase():""})),a}function C(a){var b=[];return S.outboundSettings.availableOutdialGroups&&(b=_.orderBy(angular.copy(S.outboundSettings.availableOutdialGroups),function(a){return a.dialGroupName?a.dialGroupName.toString().toLowerCase():""}),a&&b.unshift({dialGroupName:d.instant("GENERICS.ACTIONS.NONE"),dialGroupId:""})),b}function D(){var a={};return S.outboundSettings.outdialGroup&&(a=angular.copy(S.outboundSettings.outdialGroup)),a}function E(){var a=[];return S.outboundSettings.insertCampaigns&&(a=angular.copy(S.outboundSettings.insertCampaigns)),a}function F(a){growl.info(d.instant("LOGIN.DIAL_GROUP_UPDATE",{dialGroupName:a.dialGroupName}))}function G(a){b.$emit(i.DIAL_GROUP_CHANGE_PENDING,a)}function H(a){return S.leadSearchLoading=!1,window.clearTimeout(T),a.leads.length>0&&!a.callbacks&&!0!==a.isInsert?S.searchedLeads=a.leads:a.leads.length>0&&!a.callbacks&&!0===a.isInsert?S.insertedLeads=a.leads:a.callbacks||(S.searchedLeads=[],growl.info("PHONE.PREVIEW.GRID.NO_RECORDS_MSG_PREVIEW")),b.$emit(i.SEARCHED_LEADS_UPDATED,a),V.resolve(a),V.promise}function I(a){return window.clearTimeout(T),S.leadSearchLoading=!1,a.callbacks?(_.each(a.leads,function(a){S.agentCallbacks.push(a)}),r(),growl.info("PHONE.CALLBACKS.CALLBACK_UPDATED_MSG",{ttl:-1}),b.$emit(i.CALLBACKS_UPDATED,S.agentCallbacks),W.resolve(a)):(a.leads=a.leads||[],_.each(a.leads,function(a){if(a.scriptId){var b=angular.copy(a);a.script={uii:b.leadId,isPreview:!0,isLeadPreview:!0,scriptResult:{call:{},model:{},lead:b}}}}),w()?S.previewLeads=S.previewLeads.concat(a.leads):S.previewLeads=a.leads,b.$emit(i.PREVIEW_LEADS_UPDATED,a),W.resolve(a)),W.promise}function J(a){K(a);var e=["ANSWER","EXPIRED","DIALING","RINGING"],k=e.indexOf(a.leadState)>-1;if(k)S.pendingPreviewDial=!1;else{"MANUAL"===a.callType.toUpperCase()||w()||growl.info(d.instant("PHONE.CALL_NOT_CONNECTED_MSG",{leadState:a.leadState})),Z.reject(a);var l=Q(S.previewLeads,a.requestId),m=l&&l.destination&&(l.destination.indexOf("|")>-1||angular.isArray(l.destination));g.returnToLeadManagerAfterCall&&!m&&l&&(g.returnToLeadManagerAfterCall=!1,l.complete=!0,c.go("base.default.phone.preview")),g.clearDialDest(),b.$emit(i.PREVIEW_LEAD_ERROR_STATE,a),h.updateCallHistory(j.ERROR_PACKET,a)}"MANUAL"===a.callType.toUpperCase()&&(S.onManualCall=!0,f.pendingOutdial=!1,k||(growl.info(d.instant("SOFTPHONE.MANUAL_OUTDIAL.NOANSWER_MSG",{leadState:a.leadState})),g.checkAndTermOffhook()))}function K(a){var b=Q(S.searchedLeads,a.requestId);b&&(b.leadState=a.leadState,b.stateChanged=!0);var c=Q(S.previewLeads,a.requestId);c&&(c.leadState=a.leadState,c.stateChanged=!0,aa());var d=Q(S.agentCallbacks,a.requestId);d&&(d.leadState=a.leadState,d.stateChanged=!0,S.agentCallbacks=_.filter(S.agentCallbacks,function(a){return"EXPIRED"!==a.leadState}))}function L(){w()&&x()&&(S.previewLeads=_.filter(S.previewLeads,function(a){return!a.stateChanged}))}function M(a,b){var c=!1;return f.agentPermissions.allowManualPass&&"DO-NOT-CALL"!==a.leadState&&"FUTURE-CALLBACK"!==b||(c=!0),c}function N(a){var b;return _.some(S.previewLeads,function(c){if(c.leadId===a)return b=c,!0}),b}function O(){S.outboundSettings={},S.previewLeads=[],S.searchedLeads=[],S.insertedLeads=[],S.agentCallbacks=[],S.futureCallbacks=[],S.leadSearchLoading=!1,S.pendingPreviewDial=!1}function P(){S.leadSearchLoading=!1}function Q(a,b){return _.find(a,function(a){return a.requestId===b})}function R(a){var b;return _.some(S.agentCallbacks,function(c,d){if(c.leadId===a)return b={lead:c,index:d,type:"CURRENT"},!0}),b||_.some(S.futureCallbacks,function(c,d){if(c.leadId===a)return b={lead:c,index:d,type:"FUTURE"},!0}),b}var S=this;S.outboundSettings={},S.agentCallbacks=[],S.futureCallbacks=[],S.previewLeads=[],S.searchedLeads=[],S.insertedLeads=[],S.leadSearchLoading=!1,S.pendingPreviewDial=!1;var T=null,U=3e4,V=a.defer(),W=a.defer(),X=a.defer(),Y=a.defer(),Z=a.defer(),$=b.$on(i.PREVIEW_DIAL_RESOLVED,function(a,b){S.pendingPreviewDial=!1,g.returnToLeadManagerAfterCall=!1,Z.resolve()});b.$on("$destroy",function(){$()}),S.getCustomLabelsByCampaign=z,S.getDialGroup=D,S.getCampaignById=A,S.getAvailableCampaigns=B,S.getAvailableDialGroups=C,S.getInsertCampaigns=E,S.previewDial=l,S.previewFetch=n,S.searchLeads=o,S.safeModeCall=m,S.safeModeSearch=q,S.safeModeFetch=p,S.getFutureCallbacks=r,S.cancelCallback=t,S.manualPass=v,S.hciEnabled=w,S.isHciFetch=y,S.isHciPacing=x,S.dialGroupChangeCallback=F,S.dialGroupChangePendingCallback=G,S.leadSearchCallback=H,S.previewFetchCallback=I,S.previewLeadStateCallback=J,S.futureCallbacksResponse=s,S.cancelCallbackResponse=u,S.manualPassDisabled=M,S.updateLeadState=K,S.findPreviewLeadById=N,S.reset=O;var aa=_.debounce(L,3e3);return S}function b(a){return function(b){var c=a.getCampaignById(b);return c&&c.campaignName||""}}a.$inject=["$q","$rootScope","$state","$translate","SessionSvc","AgentSvc","CallSvc","CallHistorySvc","growl","OUTBOUND_EVENTS","CALL_HISTORY_EVENTS","HCI_DIAL_TYPES"],b.$inject=["OutboundSvc"],angular.module("agent_ui.service.outbound",[]).factory("OutboundSvc",a).filter("campaignNameFromId",b).constant("OUTBOUND_EVENTS",{CALLBACK_CANCELED:"outbound_callbackCanceled",CALLBACKS_UPDATED:"outbound_callbacksUpdated",FUTURE_CALLBACKS_UPDATED:"outbount_futureCallbacksUpdated",DIAL_GROUP_CHANGE_PENDING:"outbound_dialGroupChangePending",PREVIEW_LEADS_UPDATED:"outbound_previewLeadsUpdated",SEARCHED_LEADS_UPDATED:"outbound_searchedLeadsUpdated",PREVIEW_LEAD_STATE:"call_previewLeadState",PREVIEW_LEAD_ERROR_STATE:"call_previewLeadErrorState",PREVIEW_DIAL_RESOLVED:"outbound_previewDialResolved"}).constant("HCI_DIAL_TYPES",{DISABLED:0,FETCH:1,PACING:2})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a){if(i.agentPermissions.progressiveEnabled){var b=e.defer();i.isAvailable()?(G&&c.cancel(G),b.resolve(!0)):G=c(function(){g.custom(null,"phone/modals/needToBeAvailableModal.tpl.html","NeedToBeAvailableCtrl").then(function(){b.resolve(!0)},function(){s(!0)})},a?0:1e3),b.promise.then(function(a){if(a){var b=e.defer();i.isOffhook?b.resolve(!0):i.offhookInit().then(function(){i.systemInitOffhook=!1,"AVAILABLE"===i.currentAgentState.baseState?b.resolve(!0):b.resolve(!1)},function(a){q.showOffhookError(a.detail),b.resolve(!1)}),b.promise.then(function(a){a?(D.progressiveDialRunning=!0,v().then(function(a){if(!0===a){var b=u();s(!1),E=c(x,b),z(b)}})):s(!0)})}else console.warn("the progressive dialer has encountered an error"),s(!0)})}}function s(a){delete D.secondsUntilNextCall,a&&(D.progressiveDialRunning=!1),c.cancel(E),E=null,d.cancel(F),F=null}function t(){s(!0)}function u(){var a=n.getDialGroup(),b=parseInt(a.progressiveCallDelay,10),c=1e3;return b>0&&(c=1e3*b),c}function v(){var b=e.defer(),c=b.promise,d=_.find(n.previewLeads,function(a){return"PENDING"===a.leadState});return n.previewLeads.length>0&&d?(p.selectedPreviewLead=d,a.go("base.default.phone.preview.detail",{leadId:d.leadId}),b.resolve(!0)):n.leadSearchLoading||(c=w()),c}function w(){n.previewLeads=[];var a;return a=k.applicationSettings.isTcpaSafeMode?n.safeModeFetch():n.previewFetch(),a.then(function(a){var b=a.leads;b&&b.length>0?r():(s(!1),E=c(function(){r()},5e3),z(5e3))}),a}function x(){"AVAILABLE"===i.currentAgentState.baseState&&i.isOffhook&&!l.onCallOrPendingDisp()&&(p.selectedPreviewLead&&"PENDING"===p.selectedPreviewLead.leadState&&(s(!1),i.isOffhook?y(p.selectedPreviewLead):i.offhookInit().then(function(a){"OK"===a.status&&y(p.selectedPreviewLead)},function(a){q.showOffhookError(a.detail)})),l.returnToLeadManagerAfterCall=!0)}function y(a){f.cancel(),k.applicationSettings.isTcpaSafeMode?n.safeModeCall(a.requestId):n.previewDial(a.requestId)}function z(a){F&&(d.cancel(F),F=null),D.secondsUntilNextCall=a/1e3,F=d(function(){!D.secondsUntilNextCall||D.secondsUntilNextCall<0?D.secondsUntilNextCall=0:D.secondsUntilNextCall--},1e3)}function A(){return D.progressiveDialRunning&&!l.onCallOrPendingDisp(!0)&&i.agentPermissions.progressiveEnabled}function B(a,b){A()&&r()}function C(a,b){A()&&"TRANSITION"!==b.baseState&&("AVAILABLE"===b.baseState?r():s(!0))}var D=this;D.progressiveDialRunning=!1,D.secondsUntilNextCall=null;var E=null,F=null;D.startProgressiveDialer=r,D.stopProgressiveDialer=s,D.reset=t,function(){b.$on("$destroy",function(){a(),c(),d(),e(),f(),s(!1)});var a=b.$on(h.STOP_DIALER,t),c=b.$on(m.PENDING_DISP,B),d=b.$on(m.END_CALL,B),e=b.$on(o.PREVIEW_LEAD_ERROR_STATE,B),f=b.$on(j.STATE_CHANGED,C)}();var G;return D}a.$inject=["$state","$rootScope","$timeout","$interval","$q","$mdDialog","Dialog","PROGRESSIVE_DIALER_REQUESTS","AgentSvc","AGENT_EVENTS","ApplicationSvc","CallSvc","CALL_EVENTS","OutboundSvc","OUTBOUND_EVENTS","LeadSvc","SessionSvc"],angular.module("agent_ui.service.progressiveDial",[]).factory("ProgressiveDialSvc",a).constant("PROGRESSIVE_DIALER_REQUESTS",{STOP_DIALER:"stop_progressiveDialer"})}(),function(){"use strict";function a(a,b){function c(c,d,e,i){d=d||null,e=e||"CALL",i=i||null;var j=a.defer();return b.getLibraryInstance().getScript(c,d,function(a){if(a.status){var b=angular.copy(a.json);try{var c={scriptId:a.scriptId,scriptName:a.scriptName,finalResult:null,navPosition:null,version:a.version};if(b){var d=JSON.parse(b);c.data=d}"CHAT"===e?h[i]=c:"PREVIEW"===e?g=c:"CALL"===e&&(f=c),j.resolve(c)}catch(a){console.error(a)}}else j.reject(a)}),j.promise}function d(a){var c=b.getLibraryInstance();if(a.script){var d=e(a.scriptResult);return c.saveScriptResult(a.uii,a.script.scriptId,d),d}}function e(a){var b=angular.copy(a||{}),c={};return _.each(b.model,function(a,b){var d=a;angular.isDefined(a.value)&&(d=a.value),c[b]={value:d,leadField:a.leadField?a.leadField:""}}),b.model=c,b}var f=null,g=null,h={};return{getScript:c,saveScriptResult:d,_formatScriptResult:e}}a.$inject=["$q","SessionSvc"],angular.module("agent_ui.service.script",[]).factory("ScriptSvc",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){var b=a.defer();return d.currentCall.outdialDispositions=d.currentCall.outdialDispositions||{},h(d.currentCall,d.currentCall.outdialDispositions.dispositions).then(function(a){if(d.returnToLeadManagerAfterCall&&a.lead.leadId){var c=_.find(e.previewLeads,function(b){return b.leadId===a.lead.leadId});if(c&&c.script&&c.script.scriptResult){var f={};_.each(c.script.scriptResult.model.model,function(a,b){f[b]=a.value}),angular.extend(a.model,f)}}b.resolve(a)}),b.promise}function g(){return h(c.selectedChat,c.selectedChat.chatDispositions)}function h(c,d){var e={},f=a.defer(),g=b.agentSettings,h="",i="",j="",k="";return c.queue&&(c.queue.isCampaign?(h=c.queue.name,i=c.queue.number):(j=c.queue.name,k=c.queue.number)),e.model=c.scriptResponse||{},e.lead=c.lead||{},e.call={uii:c.uii,ani:c.ani,dnis:c.dnis,dispositions:d,baggage:c.baggage,agentExternId:g.externalAgentId,agentFirstName:g.firstName,agentLastName:g.lastName,agentType:g.agentType,agentEmail:g.email,agentUsername:g.username,campaignName:h,campaignId:i,queueName:j,queueId:k,chatQueueName:c.chatQueueName},f.resolve(e),f.promise}return{formatCallData:f,formatChatData:g,formatData:h}}a.$inject=["$q","AgentSvc","ChatSvc","CallSvc","OutboundSvc"],angular.module("agent_ui.service.scriptFormat",[]).factory("ScriptFormatSvc",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){var a={uii:"<uii>",ani:"<ani>",dnis:"<dnis>",baggage:{externId:"<externId>",title:"<title>",firstName:"<firstName>",lastName:"<lastName>",suffix:"<suffix>",email:"<email>",address1:"<address1>",address2:"<address2>",city:"<city>",state:"<state>",zip:"<zip>",gateKeeper:"<gateKeeper>",auxPhone:"<auxPhone>",auxData1:"<auxData1>",auxData2:"<auxData2>",auxData3:"<auxData3>",auxData4:"<auxData4>",auxData5:"<auxData5>"}},b=[{disposition:"test",dispositionId:"1"}];return e.formatData(a,b)}function p(){var b=a.defer();return o().then(function(a){a.lead=h.selectedPreviewLead.script.scriptResult.lead,a.call.ani=h.selectedPreviewLead.destination,a.lead.leadPhone=a.call.ani,b.resolve(a)}),b.promise}function q(a){return angular.isDefined(a.scriptComplete)&&(f.currentCall.scriptComplete=a.scriptComplete),angular.isDefined(a.renderFormValid)&&(f.currentCall.renderFormValid=a.renderFormValid),f.currentCall.scriptResult=a,!0}function r(a){return angular.isDefined(a.scriptComplete)&&(g.selectedChat.scriptComplete=a.scriptComplete),angular.isDefined(a.renderFormValid)&&(g.selectedChat.renderFormValid=a.renderFormValid),g.selectedChat.scriptResult=a,!0}function s(a){return h.selectedPreviewLead.script.scriptResult.model=a,!0}function t(a){return f.record(a).then(function(){return a},function(){return!1})}function u(a){return f.hold(a).then(function(){return a},function(){return!1})}function v(a,b){return f.requeue(a,b,!1).then(function(){return!0},function(){return!1})}function w(a,b){return f.requeue(a,b,!0).then(function(){return!0},function(){return!1})}function x(){var b=a.defer(),c=f.getTransferSessions();return Object.keys(c).length>0?j.custom(null,"phone/modals/hangupModal.tpl.html","HangupCtrl",{transferSessions:function(){return c},isBargeInMonitor:function(){return!1}}).then(function(){b.resolve(!0)},function(){b.resolve(!1)}):(f.hangup(),b.resolve(!0)),b.promise}function y(a,b,c){return f.hold(!0).then(function(d){return f.warmXfer(a,b,c).then(function(){return!0},function(){return!1})},function(){return!1})}function z(a,b,c){return f.coldXfer(a,b,c).then(function(){return!0},function(){return!1})}function A(a,b,c,d,e,g){return a!==f.currentCall.uii&&console.error("uii does not match the selected chat uii"),k.sendDisposition(f.currentCall,b,c,d,e,g)}function B(a,b,c,d,e,f){return a!==g.selectedChat.uii&&console.error("uii does not match the selected chat uii"),k.sendDisposition(g.selectedChat,b,c,d,e,f,null,l.CHAT)}function C(a,b,c,d){var e=g.getChatByUii(a),f="SMS"===e.channelType,h=c;f&&(h=d),j.custom(null,"factories/dialogs/knowledgeBaseEdit/knowledgeBaseEditModal.tpl.html","knowledgeBaseEditCtrl",{content:function(){return h},title:function(){return b},isSms:function(){return f}}).then(function(b){g.sendMessage(a,g.selectedChat.agentId,b)})}function D(b){var c=a.defer();return b=angular.isString(b)?b:b.join(","),d.getList(b).then(function(a){c.resolve(a)}),c.promise}function E(a,d){i.getScript(d).then(function(d){f.currentCall.startingScript||(f.currentCall.startingScript={scriptId:angular.copy(f.currentCall.script.scriptId),version:angular.copy(f.currentCall.script.version)}),f.currentCall.script=d,b.$emit(m.CLEAR_SCRIPT,{uii:a}),c(function(){b.$emit(m.NEW_CALL,f.currentCall)})})}function F(a,d){var e=g.getChatByUii(a);e&&i.getScript(d).then(function(d){e.startingScript||(e.startingScript={scriptId:angular.copy(e.script.scriptId),version:angular.copy(e.script.version)}),d.scriptResult=angular.copy(e.script.scriptResult),e.script=d,b.$emit(n.DISP_RESPONSE,{uii:a}),c(function(){b.$emit(n.NEW_CHAT,e)})})}function G(){var b=a.defer();return b.resolve(!0),b.promise}return{setScriptResultCall:q,setScriptResultChat:r,setScriptResultLead:s,setRecordingState:t,setHoldState:u,requestColdRequeue:v,requestWarmRequeue:w,requestHangup:x,getCallData:e.formatCallData,getChatData:e.formatChatData,requestColdTransfer:z,requestWarmTransfer:y,requestDisposition:A,requestDispositionChat:B,sendKbArticle:C,getKnowledgeBaseArticles:D,changeCallScript:E,changeChatScript:F,getSelectedLeadData:p,getMockData:o,mockCallback:G}}a.$inject=["$q","$rootScope","$timeout","KnowledgeBaseSvc","ScriptFormatSvc","CallSvc","ChatSvc","LeadSvc","ScriptSvc","Dialog","DispositionSvc","DISPOSITION_TYPES","CALL_EVENTS","CHAT_EVENTS"],angular.module("agent_ui.service.scriptRender",[]).factory("ScriptRenderSvc",a)}(),function(){"use strict";function a(b,c,growl,d,e){var f,g=b.get("firstLogin"),h=b.get("isLoggedIn"),i=b.get("assignments")||{},j=b.get("takeCalls")||!0,k=b.get("loginType")||"integrated",l=b.get("wsPath")||null,m=b.get("chatOptions")||{},n=b.get("callOptions")||{},o={},p="",q="",r=null,s=!0,t=!1,u=!1,v=!1,w=!1,x="";return this.manualSoftphoneReconnect=!1,this.attemptingSoftphoneReconnect=!1,this.scoreboardExpanded=!1,a.getLibraryInstance=function(){return r},a.setLibraryInstance=function(a){r=a},a.getOffhookErrMsg=function(){return p},a.setOffhookErrMsg=function(a){p=a},a.getPreviousState=function(){return q},a.setPreviousState=function(a){q=a},a.getSuppressFirstStateChange=function(){return s},a.setSuppressFirstStateChange=function(a){s=a},a.getAllowAgentStats=function(){return t},a.setAllowAgentStats=function(a){t=a},a.getAllowQueueStats=function(){return u},a.setAllowQueueStats=function(a){u=a},a.getAllowCampaignStats=function(){return v},a.setAllowCampaignStats=function(a){v=a},a.getAllowChatStats=function(){return w},a.setAllowChatStats=function(a){w=a},a.getAssignments=function(){return i},a.setAssignments=function(a){i=a,b.set("assignments",i)},a.getTakeCalls=function(){return j},a.setTakeCalls=function(a){j=a,b.set("takeCalls",j)},a.getChatOptions=function(a){return m[a]},a.setChatOptions=function(a){m[a.agentId]=a,b.set("chatOptions",m)},a.getCallOptions=function(a){return n[a]},a.setCallOptions=function(a){n[a.agentId]=a,b.set("callOptions",n)},a.getLoginType=function(){return k},a.setLoginType=function(a){k=a,b.set("loginType",a)},a.getAuthCredentials=function(){return o},a.setAuthCredentials=function(a){o=a},a.getIsLoggedIn=function(){return h},a.setIsLoggedIn=function(a){h=a,b.set("isLoggedIn",a)},a.getFirstLogin=function(){return g},a.setFirstLogin=function(a){g=a,b.set("firstLogin",a)},a.getContrastModeData=function(){return b.get("contrastModeData")||[]},
a.setContrastModeData=function(a){b.set("contrastModeData",a)},a.isAuthenticated=function(){return this.getIsLoggedIn()},a.getIqUrl=function(){return f},a.setIqUrl=function(a){f=a},a.getStatusMessage=function(){return x},a.setStatusMessage=function(a){x=a},a.showOffhookError=function(b,c){if(angular.isDefined(c)||(c=!0),b=b||"",""===p&&""!==b&&(p=b),"integrated"===a.getLoginType()){a.getLibraryInstance().switchSoftphoneRegistrar(c)}else growl.error(d.instant("GENERICS.MESSAGES.OFFHOOK_ERR",{detail:p}));p=""},a.switchSipRegistrarCallback=function(b){if("UPDATE"===b.status)this.manualSoftphoneReconnect=!0,a.setStatusMessage(d.instant("GENERICS.MESSAGES.OFFHOOK_RECONNECT_FAILED_MSG"));else if("RESET"===b.status){this.attemptingSoftphoneReconnect=!0;var c=d.instant("GENERICS.MESSAGES.OFFHOOK_RECONNECT_MSG");a.setStatusMessage(d.instant("GENERICS.MESSAGES.OFFHOOK_ERR",{detail:c}))}},a.clearSession=function(){var a=angular.copy(b.get("colPreferences")),c=angular.copy(b.get("autoAnswer")),d=angular.copy(b.get("loginType")),e=angular.copy(b.get("takeCalls")),f=angular.copy(b.get("chatOptions")),j=angular.copy(b.get("dashboards")),k=angular.copy(b.get("callOptions")),m=angular.copy(b.get("USERLOC")),n=angular.copy(b.get("USERTZ")),y=angular.copy(b.get("assignments")),z=angular.copy(b.get("dialPadHidden")),A=angular.copy(b.get("contrastModeData"));b.clearAll(),b.set("colPreferences",a),b.set("autoAnswer",c),b.set("loginType",d),b.set("takeCalls",e),b.set("USERLOC",m),b.set("USERTZ",n),b.set("chatOptions",f),b.set("dashboards",j),b.set("callOptions",k),b.set("dialPadHidden",z),b.set("contrastModeData",A),h=null,g=null,A=null,o=null,r=null,l=null,s=!0,t=!1,u=!1,w=!1,v=!1,this.attemptingSoftphoneReconnect=!1,this.manualSoftphoneReconnect=!1,p="",q="",x="",y&&y.agentExt?(i={agentExt:y.agentExt},b.set("assignments",i)):i={}},a}a.$inject=["localStorageService","$rootScope","growl","$translate","ENV_VARS"],angular.module("agent_ui.service.session",[]).service("SessionSvc",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){F=j.getLibraryInstance(),F.sipInit()}function l(){F=j.getLibraryInstance(),B(),F.sipAnswer()}function m(){F=j.getLibraryInstance(),F.sipRegister()}function n(){F=j.getLibraryInstance(),F.sipHangUp(),H=!1,B(),a.$emit(e.CALL_REJECTED)}function o(){F=j.getLibraryInstance(),B(),F.sipReject(),H=!1,a.$emit(e.CALL_REJECTED)}function p(a){F=j.getLibraryInstance(),G.dtmfString+=a,F.sipSendDTMF(a)}function q(a){F=j.getLibraryInstance(),F.sipToggleMute(a)}function r(){console.info("off-hook"),h.isOffhook=!0}function s(a){h.setDialDest(a.dialDest),j.attemptingSoftphoneReconnect&&(a.autoStartOH?h.offhookInit().then(function(b){a.maintainOH&&(h.systemInitOffhook=!1)},function(b){j.showOffhookError(b.detail,a.maintainOH)}):(c(function(){h.setAgentState("AVAILABLE")},1e3),j.attemptingSoftphoneReconnect=!1,j.manualSoftphoneReconnect=!1))}function t(){console.info("on-hook"),h.isOffhook=!1}function u(){console.log("++++++++++++++++++++++++ registered"),a.$emit(e.SESSION_REGISTERED)}function v(){console.info("------------------------ unregistered")}function w(){console.error("------------------------ registration failed")}function x(a){var b=a.data.request.from.displayName;A(),C(b)}function y(){G.muteActive=!0}function z(){G.muteActive=!1}function A(){ringtone.play()}function B(){ringtone.pause()}function C(a){if(D())l();else if(!H){H=!0;var c=d.formatPhone(a),e=b.instant("SOFTPHONE.INVITE_MODAL.MSG",{number:c});g.confirm(null,"SOFTPHONE.INVITE_MODAL.TITLE",e,"SOFTPHONE.ANSWER","SOFTPHONE.REJECT").then(function(){l(),H=!1},function(){o(),H=!1})}}function D(){var a=!1;return h.agentSettings.autoAnswerCalls?a=!0:i.currentCall.isMonitoring&&(a=!0),a}function E(){G.dtmfString="",G.muteActive=!1}var F,G=this,H=!1;G.dtmfString="",G.muteActive=!1,G.microphoneAccess=!0,G.sipInit=k,G.sipAnswer=l,G.sipHangUp=n,G.sipReject=o,G.sipRegister=m,G.sipSendDTMF=p,G.sipToggleMute=q,G.sipConnectedCallback=r,G.sipDialDestChangedCallback=s,G.sipEndedCallback=t,G.sipMuteCallback=y,G.sipRegisteredCallback=u,G.sipRegistrationFailedCallback=w,G.sipRingingCallback=x,G.sipUnmuteCallback=z,G.sipUnregisteredCallback=v,G.reset=E,G._autoAnswerOffhook=D;var I=a.$on(f.END_CALL,function(a,b){G.dtmfString="",q(!1),B(),H&&(g.close(),H=!1)});return a.$on("$destroy",function(){I()}),G}a.$inject=["$rootScope","$translate","$timeout","Utils","SOFTPHONE_EVENTS","CALL_EVENTS","Dialog","AgentSvc","CallSvc","SessionSvc"],angular.module("agent_ui.service.softphone",[]).factory("SoftphoneSvc",a).constant("SOFTPHONE_EVENTS",{SESSION_REGISTERED:"sip_registered",NEW_CALL:"sip_newCall",CALL_CONNECTED:"sip_callConnected",CALL_TERMINATED:"sip_callTerminated",CALL_ANSWERED:"sip_callAnswered",CALL_REJECTED:"sip_callRejected",CALL_AUDIO_STREAM_REJECTED:"sip_audioStreamRejected",RESET_SESSION:"sip_reset",UPDATE_OFFHOOK_FLAGS:"sip_updateOffhookFlags"})}(),function(){"use strict";function a(a){return a("/voice/api/v1/agent/:accountId/agents/:agentId/agentCallTotals",{},{get:{method:"GET"}})}function b(a){return a("/voice/api/v1/agent/:accountId/chatQueues/:queueIds/loggedInAgents",{},{get:{method:"GET",isArray:!0}})}function c(a,b,c,d,e,f,g,h,i,j){function k(b){u(b),r(v.stats_agent_daily,b),a.$emit(d.AGENT_DAILY,b)}function l(b){r(v.stats_agent,b),e.setAllowAgentStats(!0),a.$emit(d.AGENT,b)}function m(b){r(v.stats_campaign,b),e.setAllowCampaignStats(!0),a.$emit(d.CAMPAIGN,b)}function n(b){s(b),r(v.stats_queue,b),e.setAllowQueueStats(!0),a.$emit(d.QUEUE,b)}function o(b){t(b),r(v.stats_chat_queue,b),e.setAllowChatStats(!0),a.$emit(d.CHAT,b)}function p(a){var b=g.agentSettings,d=b.guid,e=b.accountId,f=c.defer();return i.get({accountId:e,agentId:a,guid:d},function(a){f.resolve(a)}),f.promise}function q(a){var b=g.agentSettings,d=b.guid,e=b.accountId,f=c.defer();return j.get({accountId:e,queueIds:a,guid:d},function(a){f.resolve(a)}),f.promise}function r(a,b){b.timeStamp=(new Date).getTime(),a.unshift(b),a.length>100&&a.pop()}function s(a){var b=Math.round(100*h.divide(a.totals.totalQueueTime,a.totals.presented)/100);b<0&&(b=0);var c=Math.round(100*h.divide(a.totals.totalSOA,a.totals.answered)/100);c<0&&(c=0);var d=Math.round(100*h.divide(a.totals.totalTalkTime,a.totals.answered)/100);d<0&&(d=0);var e=Math.round(100*h.divide(a.totals.totalABATime,a.totals.abandoned)/100);e<0&&(e=0),a.totals.avgQueueTime=b,a.totals.avgSOA=c,a.totals.avgTalkTime=d,a.totals.avgAba=e}function t(a){var b=Math.round(100*h.divide(a.totals.ttotalQueueTime,a.totals.presented)/100);b<0&&(b=0);var c=Math.round(100*h.divide(a.totals.ttotalChatTime,a.totals.accepted)/100);c<0&&(c=0);var d=Math.round(100*h.divide(a.totals.ttotalAbandonTime,a.totals.abandoned)/100);d<0&&(d=0),a.totals.avgQueueTime=b,a.totals.avgCT=c,a.totals.avgAba=d}function u(a){a.pendingDisp=b("FormatBoolYesNo")(f.currentCall.pendingDisp||!1)}var v={processAgentStats:l,processCampaignStats:m,processDailyStats:k,processQueueStats:n,processChatQueueStats:o,getAgentCallTotals:p,getLoggedInAgentCountByChatQueue:q};return v.stats_agent_daily=[],v.stats_agent=[],v.stats_campaign=[],v.stats_queue=[],v.stats_chat_queue=[],v}a.$inject=["$resource"],b.$inject=["$resource"],c.$inject=["$rootScope","$filter","$q","STATS_EVENTS","SessionSvc","CallSvc","AgentSvc","Utils","StatsResourceFactory","ChatQueueAgentCountFactory"],angular.module("agent_ui.service.stats",[]).factory("StatsResourceFactory",a).factory("ChatQueueAgentCountFactory",b).service("StatsSvc",c).constant("STATS_EVENTS",{AGENT_DAILY:"stats_agent_daily",AGENT:"stats_agent",CAMPAIGN:"stats_campaign",QUEUE:"stats_queue",CHAT:"stats_chat_queue"}).constant("STATS_DATA_TYPES",{NUMBER:"number",TIME:"time",AVERAGE:"avg",STRING:"string"})}(),function(){"use strict";function a(a,b,c,d){function e(){return["all","no-stats","debug","stats","info","warn","error"]}function f(){return["LOG","INFO","WARN","ERROR"]}function g(){return{start:moment().subtract(4,"hours").toDate(),end:moment().toDate(),rows:100,level:e()[1]}}function h(c,d,e,f){c=c||"all",f=f||100;var g=a.defer();return b.getLibraryInstance().getLogRecords(c,d,e,f,function(a){g.resolve(a)}),g.promise}function i(c){var d=a.defer();return b.getLibraryInstance().getConsoleLogRecords(c,function(a){d.resolve(a)}),d.promise}function j(b,e,f,j,l,m){var n=a.defer(),o=angular.copy(d.agentSettings),p={dialDest:e||o.dialDest,agentName:f||o.firstName+" "+o.lastName,emailFrom:j||o.email,emailSubject:l||"Agent Debug",emailDetail:m};b&&(p.emailTo=b.emailTo,p.emailDetail="Requested by "+b.requestedBy);var q=g(),r=h(q.level,moment(q.start).toDate(),moment(q.end).toDate(),1e3).then(function(a){return p.systemLogs=new File([JSON.stringify(a,null,"\t")],k(p.agentName,"system.log")),!0}),s=i().then(function(a){var b=_.map(a,function(a){return a.message}).reverse().join("\n");return p.consoleLogs=new File([b],k(p.agentName,"console.log")),!0}),t=a.defer(),u=jQuery(document.body).find(".container")[0];return u?html2canvas(u).then(function(a){a.toBlob(function(a){p.screenShot=new File([a],k(p.agentName,"screenshot.png")),t.resolve(a)},"image/jpeg",.9)}):t.resolve(),a.all([r,s,t.promise]).then(function(){c.buildDebugEmail(p),n.resolve(!0)},function(){n.reject(!1)}),n.promise}function k(a,b){return[a,moment().format("M-D-YYYY-H:m"),b].join("_")}var l=this;return l.getLogSearchLevels=e,l.getConsoleLogLevels=f,l.getDefaultLogSearch=g,l.buildDebugEmail=j,l.getSystemLog=h,l.getConsoleLogs=i,l}a.$inject=["$q","SessionSvc","EmailTemplateSvc","AgentSvc"],angular.module("agent_ui.service.system",[]).factory("SystemSvc",a)}(),function(){"use strict";function a(a,b){function c(a){_.each(i.widgets,function(b){b.name!==a&&(b.visible=!1)});var b=_.find(i.widgets,{name:a});b.visible=!b.visible}function d(){var a=_.find(i.widgets,function(a){return a.visible});return a?a.name:null}function e(a){_.find(i.widgets,{name:a}).visible=!1}function f(){_.each(i.widgets,function(a){e(a.name)})}function g(d){c(b.CHAT_CONTROL);var e=a.getDirectChatId(d.agentId),f=a.getChatById(e);return f||(f={roomId:e,agentId:d.agentId,firstName:d.firstName,lastName:d.lastName}),a.listViewType="PRIVATE",a.goToChatRoom(f)}function h(){return Object.keys(a.chats).length>0}var i=this;return i.widgets=[{name:b.CHAT_CONTROL,html:"<chat-control></chat-control>",visible:!1,icon:"icon-internalchat",altIcon:!0,btnEnabled:function(){return!0},notification:function(){return a.getTotalUnreadMsgs()>0},currentView:"LIST"},{name:b.AGENT_CONTROL,html:"<agent-control></agent-control>",visible:!1,icon:"Avatar-user-circle.svg",btnEnabled:function(){return!0},notification:function(){return!1}}],i.toggleWidget=c,i.getActiveWidget=d,i.closeWidget=e,i.reset=f,i.openAgentDirectChat=g,i._isChatControlEnabled=h,i}a.$inject=["CfChatSvc","TOOLBAR_WIDGETS"],angular.module("agent_ui.service.toolbar",[]).factory("ToolbarSvc",a).constant("TOOLBAR_WIDGETS",{CHAT_CONTROL:"chatControl",CALL_CONTROL:"callControl",NOTIFICATION_CONTROL:"notifControl",AGENT_CONTROL:"agentControl"})}(),function(){"use strict";function a(a){var b="https://d2xh74wrwk.execute-api.us-west-2.amazonaws.com/:platform/:type/";return{init:function(c){return a(b,null,{getList:{url:b+"users/list",method:"GET",isArray:!1,headers:{"agent-auth-token":c}},getStatus:{url:b+"users/status",method:"GET",isArray:!1,headers:{"agent-auth-token":c}}})}}}function b(a,b,c,d,e){function f(){var b=a.defer();return c.getLibraryInstance().directAgentXferList(function(a){_.each(a.agents,function(a){a.type=o}),b.resolve(k(a.agents))}),b.promise}function g(){var b=a.defer();return m.internalTransferList?b.resolve(m.internalTransferList):(m.internalTransferList=[],e.init(d.agentSettings.guid).getList(l()).$promise.then(function(a){_.each(a.users,function(a){a.type=n,a.agentId=a.userId}),m.internalTransferList=k(a.users),b.resolve(m.internalTransferList)},function(){m.internalTransferList=[],b.resolve(m.internalTransferList)})),b.promise}function h(b){var c=_.chain(b).filter(function(a){return a.type===n}).map(function(a){return a.userId}).slice(0,20).value(),f=a.defer(),g=l();return g.userIds=c.join(","),c.length>0?e.init(d.agentSettings.guid).getStatus(g).$promise.then(function(a){f.resolve(a.users)}):f.resolve([]),f.promise}function i(){return d.agentSettings.corporateDirectory}function j(){m.internalTransferList=[]}function k(a){return _.sortBy(a,["lastName","firstName"])}function l(){var a=d.agentSettings,b="";return c.getIqUrl()&&(b=c.getIqUrl().split("-")[0]),{platform:b,type:"nextiva",accountId:a.accountId,agentId:a.agentId}}var m=this,n=b.instant("SOFTPHONE.DIRECT_AGENT_XFER.INTERNAL"),o=b.instant("SOFTPHONE.DIRECT_AGENT_XFER.AGENTS");return m.getDirectAgentTransferList=f,m.getExternalDirectTransferList=g,m.getExternalDirectTransferListStatus=h,m.getEnableCorporateDirectory=i,m.reset=j,m}b.$inject=["$q","$translate","SessionSvc","AgentSvc","TransferResourceFactory"],a.$inject=["$resource"],angular.module("agent_ui.service.transfer",[]).service("TransferSvc",b).factory("TransferResourceFactory",a)}(),angular.module("templates-app",["chat/chat.detail.tpl.html","chat/chat.list.tpl.html","chat/chat.messaging.default.tpl.html","chat/chat.messaging.tpl.html","chat/chat.pending.tpl.html","chat/modals/chatPending.tpl.html","chat/modals/outboundSms.tpl.html","chat/modals/rejectChatModal.tpl.html","chat/modals/requeueModal.tpl.html","chat/modals/rnaModal.tpl.html","configure/configure.tpl.html","configure/configureQueues.tpl.html","configure/multipleLoginModal.tpl.html","default/default.tpl.html","layout/components/fullWindow.footer.default.tpl.html","layout/components/fullWindow.header.default.tpl.html","layout/components/middle.default.tpl.html","layout/views/fullWidth.tpl.html","layout/views/fullWindow.tpl.html","layout/views/threePanel.tpl.html","layout/views/twoPanel.tpl.html","login/login.tpl.html","logs/logs.email.tpl.html","logs/logs.search.tpl.html","monitoring/agents/agentCallTotals.tpl.html","monitoring/agents/agents.tpl.html","monitoring/detail/detail.tpl.html","nav/nav.tpl.html","phone/callHistory/callHistory.tpl.html","phone/leads/leadManagement.tpl.html","phone/modals/directTransferFailed.modal.tpl.html","phone/modals/directTransferPresented.modal.tpl.html","phone/modals/emailTemplate.tpl.html","phone/modals/hangupModal.tpl.html","phone/modals/hangupOffhook.modal.tpl.html","phone/modals/holdModal.tpl.html","phone/modals/needToBeAvailableModal.tpl.html","phone/modals/requeueModal.tpl.html","phone/modals/transferModal.tpl.html","phone/phone.detail.tpl.html","phone/phone.dialPad.tpl.html","phone/phone.nav.tpl.html","phone/phone.previewLeads.tpl.html","phone/scheduledCallbacks/scheduledCallbacks.tpl.html","scoreboard/products/statList.tpl.html","scoreboard/scoreboard.tpl.html","scoreboard/shared/productDetail.tableAndChart.tpl.html","scoreboard/shared/productDetailControl.tpl.html","scripts/scripts.detail.tpl.html","scripts/scripts.list.tpl.html","stats/metrics/metrics.tpl.html","statusbar/statusbar.tpl.html","testHarness/testHarness.tpl.html","toolbar/toolbar.tpl.html","toolbar/widgets/agentControl/agentControl.tpl.html","toolbar/widgets/callControl/callControl.tpl.html","toolbar/widgets/chatControl/chatControl.tpl.html","toolbar/widgets/monitorControl/monitorControl.tpl.html","toolbar/widgets/supervisorBargeinControl/supervisorBargeinControl.tpl.html","toolbar/widgets/transferSessionsControl/transferSessionsControl.tpl.html"]),angular.module("chat/chat.detail.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/chat.detail.tpl.html",'<div class="right-view">\n\t<cf-tabs cf-selected="vm.selectedIndex"\n\t         ng-cloak\n\t         ng-if="!vm.chatService.selectedChat.pending && vm.scriptLoaded">\n\n\t\t<cf-tab label="{{::\'CHAT.DETAIL\' | translate}}">\n\t\t\t<div class="simple-group">\n\t\t\t\t<div class="heading chat-details">\n\t\t\t\t\t{{ ::\'CHAT.DETAIL.TITLE\' |translate }}\n\n\t\t\t\t\t<span class="section-right">\n\t\t\t\t\t\t{{ vm.chatService.selectedChat.channelType | FormatChatChannelType:\'fullString\' }}\n\t\t\t\t\t\t{{ vm.getChatDuration() }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="detail-list">\n\t\t\t\t\t<div class="row chat-detail-row">\n\t\t\t\t\t\t<div class="col-md-6" ng-repeat="(key, value) in vm.chatService.selectedChat.preChatData track by $index">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label>{{ key }}</label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ value }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label translate="CHAT.DETAIL.QUEUE_DTS"></label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ ::vm.chatService.selectedChat.queueDts | date:\'short\' }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label translate="CHAT.DETAIL.QUEUE_TIME"></label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ vm.chatService.selectedChat.queueTime | hhMmSs}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label translate="GENERICS.LABELS.UII"></label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ vm.chatService.selectedChat.uii }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="col-md-6" ng-if="vm.chatService.selectedChat.channelType === \'SMS\'">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label translate="CHAT.DETAIL.ANI"></label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ vm.chatService.selectedChat.ani | phoneFormat }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="col-md-6" ng-if="vm.chatService.selectedChat.channelType === \'SMS\'">\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<label translate="CHAT.DETAIL.DNIS"></label>&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-3">\n\t\t\t\t\t\t\t\t<span class="value">{{ vm.chatService.selectedChat.dnis | phoneFormat }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</cf-tab>\n\n\t\t<cf-tab ng-if="vm.chatHasScript()"\n\t\t\t\tlabel="{{::\'RIGHT_PANEL.TABS.SCRIPT\' | translate}}"\n\t\t\t\tid="scriptSection"\n\t\t\t\tclass="script-section">\n\t\t</cf-tab>\n\t</cf-tabs>\n</div>\n')}]),angular.module("chat/chat.list.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/chat.list.tpl.html",'<div class="nav-body chat-list chat-messaging-panel unselectable"\n     ng-class="{\'expanded\': vm.listExpanded}"\n     ng-click="vm.toggleExpanded()" ng-show="vm.callService.isChatView">\n\n\t\x3c!-- rna icon --\x3e\n\t<div class="rna-notification"\n\t\t ng-if="vm.chatService.chatState.currentState === \'CHAT-RNA\'"\n\t\t ng-click="vm.openChatRnaModal(); $event.stopPropagation();">\n\n\t\t<i class="material-icons">report_problem</i>\n\t\t<div ng-if="vm.listExpanded" class="rna-msg">\n\t\t\t{{ ::"CHAT.MODALS.RNA.TITLE" | translate }}\n\t\t</div>\n\t</div>\n\t<div>\n\t\t<div class="section-group"\n\t\t\t\tng-repeat="(key, value) in vm.chatQueues">\n\t\t\t<div class="group-label">\n\t\t\t\t{{ key | ChatQueueAbbr:vm.listExpanded }}\n\t\t\t</div>\n\n\t\t\t<div class="section"\n\t\t\t\tng-click="vm.openChat(chat, $event)"\n\t\t\t\tng-class="{active: chat.uii === vm.chatService.selectedChat.uii}"\n\t\t\t\tng-repeat="chat in value">\n\n\t\t\t\t<span class="notification" ng-if="chat.unreadCount > 0">\n\t\t\t\t\t{{ chat.unreadCount }}\n\t\t\t\t</span>\n\n\t\t\t\t\x3c!-- chat timer --\x3e\n\t\t\t\t<div class="timer"\n\t\t\t\t\tng-if="vm.showTimer(chat)"\n\t\t\t\t\tng-class="{\'waiting-on-agent\': vm.lastMessageFromClient(chat.transcript), \'active\': chat.uii === vm.chatService.selectedChat.uii}">\n\t\t\t\t\t{{ vm.getLastChatTime(chat.lastMsgDts) }}\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- pending disp --\x3e\n\t\t\t\t<div class="timer waiting-on-disp waiting-on-agent"\n\t\t\t\t\tng-if="vm.showPendingDisp(chat)"\n\t\t\t\t\tng-class="{active: chat.uii === vm.chatService.selectedChat.uii}">\n\t\t\t\t\t<i class="icon-disposition"></i>\n\t\t\t\t</div>\n\n\t\t\t\t\x3c!-- pending chat --\x3e\n\t\t\t\t<div ng-if="vm.showPendingChat(chat)">\n\t\t\t\t\t\t<div class="timer new-chat">\n\t\t\t\t\t\t\t\t<span translate="CHAT.PENDING.NEW"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="pending-text" ng-if="vm.listExpanded" \n\t\t\t\t\t\t\tng-class="{active: chat.uii === vm.chatService.selectedChat.uii}">\n\t\t\t\t\t\t\t<span translate="CHAT.PENDING.PENDING"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\x3c!-- message not sent --\x3e\n\t\t\t\t<div class="timer message-not-sent"\n\t\t\t\t\tng-if="vm.showMessageNotSent(chat)"\n\t\t\t\t\tng-class="{\'waiting-on-agent\': vm.lastMessageFromClient(chat.transcript)}">\n\t\t\t\t\t<i class="material-icons">create</i>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="last-msg"\n\t\t\t\t\tng-class="{\'from-client\': vm.lastMessageFromClient(chat.transcript) }"\n\t\t\t\t\tng-if="vm.listExpanded">\n\t\t\t\t\t<span ng-if="chat.transcript && chat.transcript.length > 0 && !vm.lastMessageFromClient(chat.transcript)">\n\t\t\t\t\t\tyou: &nbsp;\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-bind-html="vm.getMessage(chat.transcript)"></span>\n\n\t\t\t\t\t<span ng-if="vm.getLastMessage(chat.transcript).message.length > vm.messageLimit">\n\t\t\t\t\t\t...\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="msg-type" ng-if="vm.listExpanded">\n\t\t\t\t\t{{ chat.channelType | FormatChatChannelType}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr class="group-seprator">\n\t\t</div>\n\t</div>\n\t\n\n\t<hr class="seperator" ng-if="vm.chatService.chats.length > 0 && vm.listExpanded">\n\n\t<div class="outbound-sms" ng-if="vm.listExpanded">\n\t\t<button class="btn btn-default"\n\t\t\t\tng-click="vm.openOutboundSmsModal($event)">\n\t\t\t\t<span class="plus">+</span>\n\t\t\t\t<span translate="CHAT.OUTBOUND"></span>\n\t\t</button>\n\t</div>\n\n\t<div class="chat-section" ng-if="vm.agentService.agentPermissions.allowChat">\n\t\t<div class="chat-sub-section"\n\t\t\tuib-popover="{{::\'PHONE.TOOLTIP.VOICE\' | translate}}" \n\t\t\tpopover-trigger="\'mouseenter\'" \n\t\t\tpopover-placement= "right" \n\t\t\tpopover-class= \'custom-popover-class\' \n\t\t\tng-click="vm.switchChat()">\n\t\t\t<i class="icon-phone-switcher"> </i>\n\t\t</div>\n\t</div>\t\n</div>\n')}]),angular.module("chat/chat.messaging.default.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/chat.messaging.default.tpl.html",'<div ng-if="vm.chatService.chats.length === 0" class="chat-messaging-panel chat-default">\n\t<div class="chat-messaging">\n\t\t<h3 class="nav-title" translate="CHAT"></h3>\n\n\t\t<div class="section-padding text-center chat-panel-border" translate="CHAT.NO_ACTIVE_CHATS"></div>\n\n\t</div>\n</div>\n')}]),angular.module("chat/chat.messaging.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/chat.messaging.tpl.html",'<cf-chat-messaging chat="vm.chatService.selectedChat"></cf-chat-messaging>\n')}]),angular.module("chat/chat.pending.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/chat.pending.tpl.html",'<div class="chat-messaging pending">\n\t<h3 class="nav-title"\n\t    translate="CHAT.PENDING">\n\t</h3>\n\n\t<div class="pending-chat-padding data-groups chat-panel-border">\n\t\t<div class="pending-queue-name data-group">\n\t\t\t<span>\n\t\t\t\t{{ vm.chatService.selectedChat.chatQueueName }}\n\t\t\t</span>\n\t\t\t<span class="pull-right">\n\t\t\t\t{{ vm.chatService.selectedChat.channelType | FormatChatChannelType }}\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="pending-queue-time data-group">\n\t\t\t<span>\n\t\t\t\t{{ ::vm.chatService.selectedChat.dts  | momentDate:\'dddd, MMM. DD, YYYY\' }}\n\t\t\t</span>\t\n\t\t\t<span class="pull-right">\n\t\t\t\t{{ ::vm.chatService.selectedChat.dts  | momentDate:vm.timeFormat }}\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\n\t<div class="section-padding pending-chat-btn-padding">\n\t\t<div class="row">\n\t\t\t<div class="col-sm-3"></div>\n\t\t\t<div class="col-sm-5 full-width-btn">\n\t\t\t\t<button class="btn btn-decline"\n\t\t\t\t        ng-click="vm.rejectChat()">\n\t\t\t\t\t{{::"CHAT.PENDING.DECLINE" | translate}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="col-sm-4 full-width-btn">\n\t\t\t\t<button class="btn btn-secondary"\n\t\t\t\t        ng-click="vm.acceptChat()">\n\t\t\t\t\t{{::"CHAT.PENDING.ACCEPT" | translate}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("chat/modals/chatPending.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/modals/chatPending.tpl.html",'<md-dialog class="custom-dialog chat-pending" aria-label="Requeue Chat" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-md">\n\t\t<div class="chat-messaging pending">\n\t\t\t<h4 class="md-title" translate="CHAT.PENDING"></h4>\n\t\t\t<div class="data-group">\n\t\t\t\t<div>\n\t\t\t\t\t{{ chat.channelType | FormatChatChannelType }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{{ chat.chatQueueName }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{{ chat.dts | momentDate:\'dddd, MMM. Do, YYYY\' }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{{ chat.dts | momentDate:vm.timeFormat }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<div class="custom-btn-group">\n\t\t\t<button class="btn btn-danger-link" ng-click="decline()">\n\t\t\t\t{{::"CHAT.PENDING.DECLINE" | translate}}\n\t\t\t</button>\n\t\t\t<button class="btn btn-link"\n\t\t\t        ng-click="accept()">\n\t\t\t\t{{::"CHAT.PENDING.ACCEPT" | translate}}\n\t\t\t</button>\n\t\t\t<button class="btn btn-secondary"\n\t\t\t        ng-click="acceptGo()">\n\t\t\t\t<span>\n\t\t\t\t\t{{::"CHAT.PENDING.ACCEPT_GO" | translate}}\n\t\t\t\t</span>\n\t\t\t</button>\n\t\t</div>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("chat/modals/outboundSms.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/modals/outboundSms.tpl.html",'<md-dialog class="custom-dialog" aria-label="Reject Chat" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding" translate="CHAT.OUTBOUND"></h4>\n\t\t<form name="outboundSms" autocomplete="pleaseNo">\n\t\t\t<div class="form-group">\n\t\t\t\t<label class="title" translate="SOFTPHONE.MANUAL_OUTDIAL.DIAL_DEST"></label>\n\n\t\t\t\t<input type="text" id="dialDest" name="dialDest"\n\t\t\t\t       class="form-control"\n\t\t\t\t       ng-model="params.dialDest"\n\t\t\t\t       phone-number\n\t\t\t\t       required\n\t\t\t\t       data-pretty-print="true"\n\t\t\t\t       aria-label="Dial Destination"\n\t\t\t\t       autocomplete="pleaseNo"\n\t\t\t\t       md-autofocus />\n\t\t\t</div>\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.QUEUE"></label>\n\t\t\t\t<ui-select ng-model="params.queueId" theme="bootstrap" sortable="true" append-to-body="true" required name="queueId"\n\t\t\t\t\t\t\ton-select="updateDnisList($select.selected)">\n\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t{{$select.selected.chatQueueName}}\n\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t<ui-select-choices repeat="queue.chatQueueId as queue in availQueues | filter: $select.search">\n\t\t\t\t\t\t<div ng-bind-html="queue.chatQueueName | highlight: $select.search"></div>\n\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t{{::"SOFTPHONE.MANUAL_OUTDIAL.QUEUE_ID" | translate}}: <span ng-bind-html="\'\'+queue.chatQueueId | highlight: $select.search"></span>\n\t\t\t\t\t\t</small>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.CALLER_ID"></label>\n\t\t\t\t<ui-select ng-model="params.callerId" theme="bootstrap" sortable="true" append-to-body="true" required name="callerId">\n\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t{{$select.selected}}\n\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t<ui-select-choices repeat="dnis in dnisList | filter: $select.search">\n\t\t\t\t\t\t<div ng-bind-html="dnis | highlight: $select.search"></div>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="outboundSms.$invalid || sendPending" ng-click="send()">\n\t\t\t<span translate="CHAT.OUTBOUND.START"></span>\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("chat/modals/rejectChatModal.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/modals/rejectChatModal.tpl.html",'<md-dialog class="custom-dialog" aria-label="Reject Chat" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding">{{::"CHAT.MODALS.REJECT.TITLE" | translate}}</h4>\n\t\t<form name="rejectModal">\n\t\t\t<div class="form-group align-left">\n\t\t\t\t<label translate="CHAT.MODALS.REJECT.REASON"></label>\n\t\t\t\t<input class="form-control" md-autofocus="" ng-model="reason" required>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="vm.rejectModal.$invalid" ng-click="response()">\n\t\t\t{{ ::"GENERICS.ACTIONS.OK" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("chat/modals/requeueModal.tpl.html",[]).run(["$templateCache",function(a){
a.put("chat/modals/requeueModal.tpl.html",'<md-dialog class="custom-dialog" aria-label="Requeue Chat" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding">{{::"CHAT.REQUEUE" | translate}}</h4>\n\n\t\t<form id="requeueForm" name="requeueForm" novalidate>\n\t\t\t<div ng-if="chatService.selectedChat.chatRequeueType === \'SHORTCUT\'">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="CHAT.REQUEUE.SHORTCUTS"></label>\n\n\t\t\t\t\t<ui-select name="requeueQueueShortcut" id="requeueQueueShortcut" theme="bootstrap" ng-model="requeue.queue" required append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ $select.selected.name }}\n\t\t\t\t\t\t\t\t({{ $select.selected.loggedInAgentCount | FormatEmptyValue }}\n\t\t\t\t\t\t\t\t{{ \'CHAT.REQUEUE.AGENT_LABEL\'.concat($select.selected.loggedInAgentCount !== 1 ? \'.PLURAL\' : \'\') | translate }})\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t\t<ui-select-choices repeat="shortcut as shortcut in chatService.selectedChat.requeueShortcuts.shortcuts | orderBy:\'rank\' | filter: $select.search">\n\t\t\t\t\t\t\t<div ng-bind-html="shortcut.name | highlight: $select.search"></div>\n\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t{{ ::\'CHAT.REQUEUE.AGENT_LABEL.PLURAL\' | translate }}: {{ shortcut.loggedInAgentCount | FormatEmptyValue }}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div ng-if="chatService.selectedChat.chatRequeueType ===\'ADVANCED\'">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="CHAT.REQUEUE.REQUEUE_QUEUES"></label>\n\n\t\t\t\t\t<ui-select name="requeueQueue" id="requeueQueue" theme="bootstrap" ng-model="requeue.queue" on-select="clearSkill()" required append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ $select.selected.chatQueueName }}\n\t\t\t\t\t\t\t\t({{ $select.selected.loggedInAgentCount | FormatEmptyValue }}\n\t\t\t\t\t\t\t\t{{ \'CHAT.REQUEUE.AGENT_LABEL\'.concat($select.selected.loggedInAgentCount !== 1 ? \'.PLURAL\' : \'\') | translate }})\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t\t<ui-select-choices repeat="queue as queue in chatSettings.availableChatRequeueQueues | filter: $select.search" group-by="\'chatGroup\'">\n\t\t\t\t\t\t\t<div ng-bind-html="queue.chatQueueName | highlight: $select.search"></div>\n\t\t\t\t\t\t\t<small>\n\t\t\t\t\t\t\t\t{{ ::\'CHAT.REQUEUE.AGENT_LABEL.PLURAL\' | translate }}: {{ queue.loggedInAgentCount | FormatEmptyValue }}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="CHAT.REQUEUE.REQUEUE_SKILLS"></label>\n\n\t\t\t\t\t<ui-select name="requeueSkill" id="requeueSkill" theme="bootstrap" ng-model="requeue.skill"\n\t\t\t\t\t           ng-disabled="!requeue.queue" append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}" allow-clear="true">\n\t\t\t\t\t\t\t{{ $select.selected.skillName }}\n\t\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t\t<ui-select-choices repeat="skill.skillId as skill in requeue.queue.skills | filter: $select.search">\n\t\t\t\t\t\t\t<div ng-bind-html="skill.skillName | highlight: $select.search"></div>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="requeueForm.$invalid" ng-click="ok()">\n\t\t\t{{ ::"GENERICS.ACTIONS.OK" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("chat/modals/rnaModal.tpl.html",[]).run(["$templateCache",function(a){a.put("chat/modals/rnaModal.tpl.html",'<md-dialog class="custom-alert-dialog custom-dialog" aria-label="Chat State RNA" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding">{{::"CHAT.MODALS.RNA.TITLE" | translate}}</h4>\n\t\t<div class="text-left">\n\t\t\t{{ ::"CHAT.MODALS.RNA.MSG" | translate }}\n\t\t</div>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="close()">\n\t\t\t{{ ::"CHAT.MODALS.RNA.CLOSE" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-click="goAvailable()">\n\t\t\t{{ ::"CHAT.MODALS.RNA.GO_AVAILABLE" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("configure/configure.tpl.html",[]).run(["$templateCache",function(a){a.put("configure/configure.tpl.html",'<div class="login-wrapper" ng-cloak>\n\t<form class="form-signin" name="vm.formSignin" role="form" novalidate>\n\t\t<div class="logo" ng-if="!vm.isAuthenticated">\n\t\t\t<img ng-cloak ng-src="{{ vm.largeImg }}" alt="brand logo" />\n\t\t</div>\n\t\t<div class="form-wrapper">\n\t\t\t<div ng-if="!vm.isAuthenticated" class="login-header">\n\t\t\t\t<span class="product">{{::\'LOGIN.PRODUCT\' | translate}}</span>\n\n\t\t\t\t<span class="step">{{::\'LOGIN.STEP2\' | translate}}</span>\n\t\t\t</div>\n\t\t\t<div class="inputs config-inputs">\n\t\t\t\t<div ng-if="!vm.isAuthenticated || (vm.isAuthenticated && vm.agentPermissions.allowLoginUpdates)">\n\t\t\t\t\t<div id="inbound-queues"\n\t\t\t\t\t\t class="form-group"\n\t\t\t\t\t\t ng-if="vm.agentPermissions.allowLoginControl && vm.agentPermissions.allowInbound">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>{{ ::"CONFIG_LOGIN.INBOUND" | translate}}</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="queue-select" ng-class="{disabled: vm.availQueues.length === 0}" ng-click="vm.openQueueSelect(\'INBOUND\')">\n\t\t\t\t\t\t\t<div class="queue-chips">\n\t\t\t\t\t\t\t\t<div ng-if="!vm.allQueuesSelected" class="queue-chip" ng-repeat="queue in vm.availQueues | filter:{selected:true}">\n\t\t\t\t\t\t\t\t\t<div class="queue-name-wrapper">\n\t\t\t\t\t\t\t\t\t\t<span class="queue-name">{{queue.gateName}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div ng-if="vm.allQueuesSelected && vm.assignments.queues.length > 0" class="queue-chip">\n\t\t\t\t\t\t\t\t\t<div class="queue-name-wrapper">\n\t\t\t\t\t\t\t\t\t\t<span class="queue-name">{{::\'CONFIG_LOGIN.ALL_SELECTED\' | translate}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n                                <div class="top-margin" ng-if="vm.assignments.queues.length === 0">\n\t\t\t\t\t\t\t\t\t<span class="placeholder-txt">\n\t\t\t\t\t\t\t\t\t\t{{vm.availQueues.length > 0 ? \'CONFIG_LOGIN.NONE_SELECTED\' : \'CONFIG_LOGIN.NONE_AVAILABLE\' | translate}}\n\t\t\t\t\t\t\t\t\t</span>\n                                </div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ellipsis-group" ng-if="vm.showQueueEllipsis">\n\t\t\t\t\t\t\t\t<span class="ellipsis">{{\'...\'}}</span>\n\t\t\t\t\t\t\t\t<span class="count">{{\'+\' + vm.numQueuesHidden}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id="chat-queues"\n\t\t\t\t\t\t class="form-group"\n\t\t\t\t\t\t ng-if="vm.agentPermissions.allowLoginControl && vm.agentPermissions.allowChat">\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{{ ::"CONFIG_LOGIN.CHAT" | translate}}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<div class="queue-select" ng-class="{disabled: vm.availChatQueues.length === 0}" ng-click="vm.openQueueSelect(\'CHAT\')">\n\t\t\t\t\t\t\t<div class="queue-chips">\n\t\t\t\t\t\t\t\t<div ng-if="!vm.allChatQueuesSelected" class="queue-chip" ng-repeat="queue in vm.availChatQueues | filter:{selected:true}">\n\t\t\t\t\t\t\t\t\t<div class="queue-name-wrapper">\n\t\t\t\t\t\t\t\t\t\t<span class="queue-name">{{queue.chatQueueName}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div ng-if="vm.allChatQueuesSelected && vm.assignments.chatQueues.length > 0" class="queue-chip">\n\t\t\t\t\t\t\t\t\t<div class="queue-name-wrapper">\n\t\t\t\t\t\t\t\t\t\t<span class="queue-name">{{::\'CONFIG_LOGIN.ALL_SELECTED\' | translate}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="top-margin" ng-if="vm.assignments.chatQueues.length === 0">\n\t\t\t\t\t\t\t\t\t<span class="placeholder-txt">\n\t\t\t\t\t\t\t\t\t\t{{vm.availChatQueues.length > 0 ? \'CONFIG_LOGIN.NONE_SELECTED\' : \'CONFIG_LOGIN.NONE_AVAILABLE\' | translate}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="ellipsis-group" ng-if="vm.showChatQueueEllipsis">\n\t\t\t\t\t\t\t\t<span class="ellipsis">{{\'...\'}}</span>\n\t\t\t\t\t\t\t\t<span class="count">{{\'+\' + vm.numChatQueuesHidden}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="vm.agentPermissions.allowLoginControl && vm.availSkillProfiles.length > 0" class="form-group">\n\t\t\t\t\t\t<label translate="CONFIG_LOGIN.SKILL_PROFILES"></label>\n\t\t\t\t\t\t<ui-select class="login-select" ng-model="vm.assignments.skillProfile" theme="bootstrap" sortable="true">\n\t\t\t\t\t\t\t<ui-select-match allow-clear="false" placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t\t<span class="fix-span"\n\t\t\t\t\t\t\t\t\t  ng-if="$select.selected.profileName !== \'None\'">\n\t\t\t\t\t\t\t\t\t  {{$select.selected.profileId}} -&nbsp;\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t{{$select.selected.profileName}}\n\t\t\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t\t\t<ui-select-choices repeat="sp.profileId as sp in vm.availSkillProfiles | filter: $select.search">\n\t\t\t\t\t\t\t\t<div ng-class="{\'none-label\': sp.profileName === \'None\'}" ng-bind-html="sp.profileName | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t<small ng-if="sp.profileName !== \'None\'">\n\t\t\t\t\t\t\t\t\t{{::"CONFIG_LOGIN.SKILL_PROFILE_ID" | translate}}: <span ng-bind-html="\'\'+sp.profileId | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t\t{{::"CONFIG_LOGIN.SKILL_PROFILE_DESC" | translate}}: <span ng-bind-html="\'\'+sp.profileDesc | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="vm.agentPermissions.allowLoginControl && vm.agentPermissions.allowOutbound" class="form-group dial-group-select">\n\t\t\t\t\t\t<label translate="CONFIG_LOGIN.OUTBOUND"></label>\n\t\t\t\t\t\t<ui-select class="login-select" ng-model="vm.assignments.dialGroup" theme="bootstrap" sortable="true">\n\t\t\t\t\t\t\t<ui-select-match allow-clear="false" placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t\t<span class="fix-span"\n\t\t\t\t\t\t\t\t\t  ng-if="$select.selected.dialGroupName !== \'None\'">\n\t\t\t\t\t\t\t\t\t{{$select.selected.dialGroupId}} -&nbsp;\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t {{$select.selected.dialGroupName}}\n\t\t\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t\t\t<ui-select-choices repeat="dg.dialGroupId as dg in vm.availDialGroups | filter: $select.search">\n\t\t\t\t\t\t\t\t<div ng-class="{\'none-label\': dg.dialGroupName === \'None\'}" ng-bind-html="dg.dialGroupName | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t<small ng-if="dg.dialGroupName !== \'None\'" >\n\t\t\t\t\t\t\t\t\t{{"CONFIG_LOGIN.DIAL_GROUP_ID" | translate}}: <span ng-bind-html="\'\'+dg.dialGroupId | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t\t{{"CONFIG_LOGIN.DIAL_GROUP_DESC" | translate}}: <span ng-bind-html="\'\'+dg.dialGroupDesc | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class="form-group" ng-if="!vm.isAuthenticated">\n\t\t\t\t\t\t\t<label translate="CONFIG_LOGIN.LOGIN_TYPE"></label>\n\t\t\t\t\t\t\t<ui-select class="login-select" ng-model="vm.loginType" theme="bootstrap" sortable="true" autofocus="true" ng-change="vm.loginTypeChanged($select.selected.value)">\n\t\t\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SELECT_ALT\' | translate }}">{{$select.selected.label | translate}}</ui-select-match>\n\t\t\t\t\t\t\t\t<ui-select-choices repeat="type.value as type in vm.loginTypes | filter: $select.search">\n\t\t\t\t\t\t\t\t\t<div ng-bind-html="type.label | translate | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="!vm.isSsoLogin && vm.loginType === \'extension\'" class="form-group">\n\t\t\t\t\t\t<label translate="CONFIG_LOGIN.AGENT_EXT"></label>\n\t\t\t\t\t\t<input ng-model="vm.assignments.agentExt" id="agentExt" name="agentExt" class="form-control login-select" required/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="vm.loginType === \'external\'" class="form-group">\n\t\t\t\t\t\t<label translate="CONFIG_LOGIN.DIAL_DEST"></label>\n\t\t\t\t\t\t<div class="input-group dial-dest-input">\n\t\t\t\t\t\t\t<input ng-model="vm.assignments.dialDest" id="dialDest" name="dialDest" class="form-control login-select" required/>\n\t\t\t\t\t\t\t<div class="input-group-btn">\n\t\t\t\t\t\t\t\t<button class="btn btn-default" data-toggle="dropdown" ng-disabled="vm.loginDest.length === 0">\n\t\t\t\t\t\t\t\t\t<i class="caret"></i>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<ul class="dropdown-menu dropdown-menu-right">\n\t\t\t\t\t\t\t\t\t<li ng-repeat="dest in vm.loginDest">\n\t\t\t\t\t\t\t\t\t\t<a ng-click="vm.assignments.dialDest = dest.destination">\n\t\t\t\t\t\t\t\t\t\t\t{{ dest.destination }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="form-group form-chk">\n\t\t\t\t\t\t<md-checkbox class="md-checkbox-small md-primary" md-no-ink ng-model="vm.takeCalls" aria-label="Take Calls">\n\t\t\t\t\t\t\t{{::"CONFIG_LOGIN.TAKE_CALLS" | translate}}\n\t\t\t\t\t\t</md-checkbox>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="form-group form-chk" ng-if="vm.agentPermissions.allowAutoAnswer && !vm.callService.onCallOrPendingDisp()">\n\t\t\t\t\t\t<md-checkbox class="md-checkbox-small md-primary" md-no-ink ng-model="vm.agentService.agentSettings.autoAnswerCalls" aria-label="Toggle Auto Answer">\n\t\t\t\t\t\t\t{{ ::\'SOFTPHONE.AUTO_ANSWER\' | translate }}\n\t\t\t\t\t\t</md-checkbox>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p ng-if="vm.isAuthenticated && !vm.agentPermissions.allowLoginUpdates">\n\t\t\t\t\t{{ ::\'CONFIG_LOGIN.NO_PERMISSION\' | translate }}\n\t\t\t\t</p>\n\t\t\t\t<div class="btn-group">\n\t\t\t\t\t<div class="full-width-btn">\n\t\t\t\t\t\t<button ng-disabled="vm.pendingOffhookTerm || vm.loading || (vm.isAuthenticated && !vm.agentPermissions.allowLoginUpdates)"\n\t\t\t\t\t\t\t\ttype="submit"\n\t\t\t\t\t\t\t\tclass="btn btn-rc-brand-primary custom-disable"\n\t\t\t\t\t\t\t\tng-click="vm.configure()">\n\t\t\t\t\t        <span ng-if="vm.loading">\n\t\t\t\t\t            <i class="fa fa-spinner fa-1x fa-pulse"></i>\n\t\t\t\t\t        </span>\n\t\t\t\t\t\t\t<span ng-if="!vm.loading">\n\t\t\t\t\t            {{ vm.isAuthenticated ? \'CONFIG_LOGIN.UPDATE\' : \'CONFIG_LOGIN.CONTINUE\' | translate }}\n\t\t\t\t\t        </span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button ng-if="vm.isAuthenticated"\n\t\t\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\t\t\tclass="btn btn-link"\n\t\t\t\t\t\t\t\tng-click="vm.cancel()">\n\t\t\t\t\t\t\t{{ ::\'GENERICS.ACTIONS.CANCEL\' | translate}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n')}]),angular.module("configure/configureQueues.tpl.html",[]).run(["$templateCache",function(a){a.put("configure/configureQueues.tpl.html",'<div class="config-queues" ng-cloak>\n    <div class="search-block">\n        <div class="icon-wrapper">\n            <i class="material-icons">search</i>\n            \x3c!--<i class="icon-search"></i>--\x3e\n        </div>\n        <input ng-model="vm.searchFilter"\n               id="searchFilter"\n               name="searchFilter"\n               class="search-input"\n               ng-model="vm.searchFilter"\n               placeholder="{{::\'GENERICS.ACTIONS.SEARCH_P\' | translate }}"/>\n        <div class="list-chip-block">\n            <span class="right-border"\n                  ng-click="vm.selectedView= \'chips\'"\n                  ng-class="{selected:vm.selectedView === \'chips\'}">\n                <i class="material-icons"> apps </i>\n            </span>\n            <span ng-click="vm.selectedView= \'list\'"\n                  ng-class="{selected:vm.selectedView === \'list\'}">\n                <i class="material-icons"> format_list_bulleted </i>\n            </span>\n        </div>\n    </div>\n\n\n    <div class="scroll-section">\n        <div class="queue-content">\n            <div ng-repeat="group in vm.availQueues | filter:vm.searchFilter" ng-if="group.show !== false">\n                <md-checkbox class="md-checkbox-small md-primary group-checkbox"\n                             ng-if="group.show !== false"\n                             ng-checked="group.checked"\n                             md-indeterminate="group.indeterminate"\n                             md-no-ink\n                             ng-click="vm.toggleGroup(group)"\n                             uib-popover="{{ group.checked ? \'CONFIG_LOGIN.TOOLTIP_DESELECT\' : \'CONFIG_LOGIN.TOOLTIP_SELECT\' | translate}}"\n                             popover-trigger="\'mouseenter\'"\n                             popover-placement= "bottom"\n                             popover-class= \'menu-popover-style\'\n                             aria-label="Select all queues">\n                </md-checkbox>\n                <div class="group-label md-label" >\n                    <span class="checkbox-text">{{group.group.groupName}} ({{group.numberSelected}})</span>\n                </div>\n                <br />\n                \x3c!-- CHIPS VIEW --\x3e\n                <div ng-if="vm.selectedView === \'chips\'">\n                    <div class="queue-chips">\n                        <div class="queue-chip"\n                             ng-class="{selected: queue.selected}"\n                             ng-repeat="queue in group.queues | filter:vm.searchFilter"\n                             ng-click="vm.toggleQueue(group, queue)">\n                            <div class="queue-name-wrapper">\n                                <span class="queue-name">{{queue.name}}</span>\n                            </div>\n                            <i ng-if="queue.selected" class="material-icons"> close </i>\n                        </div>\n                    </div>\n                </div>\n\n                \x3c!-- LIST VIEW --\x3e\n                <div ng-if="vm.selectedView === \'list\'">\n                    <div class="queue-list">\n                        <div class="queue-row"\n                             ng-class="{\'last-row\':$last, \'first-row\':$first}"\n                             ng-repeat="queue in group.queues | filter:vm.searchFilter">\n                            <md-checkbox class="md-checkbox-small md-primary"\n                                         ng-click="vm.toggleQueue(group, queue)"\n                                         ng-checked="queue.selected"\n                                         md-no-ink\n                                         aria-label="Select queue">\n                                <span class="queue-name">{{queue.name}}</span>\n                            </md-checkbox>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("configure/multipleLoginModal.tpl.html",[]).run(["$templateCache",function(a){a.put("configure/multipleLoginModal.tpl.html",'<md-dialog class="custom-alert-dialog custom-dialog" aria-label="Multiple Logins Detected" role="dialog">\n    <md-dialog-content class="md-dialog-content width-sm" role="document">\n        <h4 class="md-title ng-binding">{{::"CONFIG_LOGIN.MULTIPLE_LOGINS" | translate}}</h4>\n        <div class="text-left">\n            {{ allowLogin ? "CONFIG_LOGIN.MULTIPLE_LOGINS_MSG" : "CONFIG_LOGIN.MULTIPLE_LOGINS_ENGAGED_MSG" | translate }}\n        </div>\n    </md-dialog-content>\n\n    <md-dialog-actions>\n        <button class="btn btn-link" ng-click="close()">\n            {{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n        </button>\n        <div class="custom-btn-group" ng-if="allowLogin">\n            <button class="btn btn-secondary" ng-click="loginAgain()">\n                {{ ::"CONFIG_LOGIN.CONTINUE" | translate }}\n            </button>\n        </div>\n        <div class="custom-btn-group" ng-if="!allowLogin">\n            <button class="btn btn-secondary" ng-click="backToLogin()">\n                {{ ::"CONFIG_LOGIN.BACK_TO_LOGIN" | translate }}\n            </button>\n        </div>\n    </md-dialog-actions>\n</md-dialog>\n')}]),angular.module("default/default.tpl.html",[]).run(["$templateCache",function(a){a.put("default/default.tpl.html",'<div class="main-wrapper">\n\t<div class="status-bar" ui-view="statusbar"></div>\n\t<div class="nav" ui-view="nav"></div>\n\t<div ui-view="toolbar"></div>\n\t<div class="body" ui-view="body"></div>\n\t\n\t<cf-agent-loader ng-if="agentService.styleSheetLoading === true"></cf-agent-loader>\n\t<script-frame-manager></script-frame-manager>\n\t<call-control></call-control>\n\t<monitor-control></monitor-control>\n\t<supervisor-bargein-control></supervisor-bargein-control>\n\n</div>\n')}]),angular.module("layout/components/fullWindow.footer.default.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/components/fullWindow.footer.default.tpl.html",'<div class="default-footer">\n\t<button class="btn btn-link footer-cancel" ng-click="vm.cancel()">{{vm.cancelButtonText}}</button>\n\t<button class="btn btn-primary footer-submit" ng-click="vm.submit()">{{vm.submitButtonText}}</button>\n</div>\n')}]),angular.module("layout/components/fullWindow.header.default.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/components/fullWindow.header.default.tpl.html",'<div class="default-header" ng-click="vm.cancel()">\n\t<span class="back-block" ng-if="vm.showBackBtn">\n\t\t<i class="material-icons">arrow_back</i>\n\t\t{{::\'CONFIG_LOGIN.BACK\'| translate}}\n\t</span>\n\t<span class="context-block">{{vm.contextText}}</span>\n</div>\n')}]),angular.module("layout/components/middle.default.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/components/middle.default.tpl.html",'<div class="default-page">\n\t<i class="material-icons">\n\t\t{{ vm.getIcon() }}\n\t</i>\n\t<label>\n\t\t{{ vm.getLabel() | translate }}\n\t</label>\n</div>\n')}]),angular.module("layout/views/fullWidth.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/views/fullWidth.tpl.html",'\x3c!-- config section --\x3e\n<div class="section side-nav" ui-view="nav"></div>\n<div class="section sub-side-nav" ui-view="sub_nav"></div>\n\n<div class="scroll-wrapper">\n\t<div ui-view class="container" ng-class="layoutClasses"></div>\n</div>\n')}]),angular.module("layout/views/fullWindow.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/views/fullWindow.tpl.html",'<div class="full-window-section">\n\t<div ui-view="header" class="full-header"> header block </div>\n\n\t<div class="body-wrapper">\n\t\t<div ui-view="body" class="container full-body" > body block </div>\n\t</div>\n\n\t<div ui-view="footer" class="full-footer" ng-if="vm.showFooter"> footer block </div>\n</div>\n')}]),angular.module("layout/views/threePanel.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/views/threePanel.tpl.html",'<div class="main-config">\n\t<div class="section left" ui-view="left"></div>\n\n\t<div class="section middle" ui-view="middle" ng-show="showMidPanel" ng-class="{\'chat\':isChat}"></div>\n\n\t<div class="section right" ui-view="right"></div>\n\n</div>\n')}]),angular.module("layout/views/twoPanel.tpl.html",[]).run(["$templateCache",function(a){a.put("layout/views/twoPanel.tpl.html",'<div class="main-config">\n\t<div class="section side-nav" ui-view="nav"></div>\n\t<div class="section sub-side-nav" ui-view="sub_nav"></div>\n\n\t<div class="section left" ui-view="left"></div>\n\n\t<div class="section middle" ui-view="middle" ng-class="{\'chat\':isChat}"></div>\n\n</div>\n')}]),angular.module("login/login.tpl.html",[]).run(["$templateCache",function(a){a.put("login/login.tpl.html",'<div class="login-spinner">\n    <div>\n        <i class="fa fa-spinner fa-3x fa-pulse"></i>\n    </div>\n</div>\n')}]),angular.module("logs/logs.email.tpl.html",[]).run(["$templateCache",function(a){a.put("logs/logs.email.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content width-lg">\n\t\t<h4 class="md-title" translate="TOOLS.LOG.SUBMIT_MODAL.TITLE"></h4>\n\n\t\t<div class="md-dialog-content-body">\n\t\t\t<div class="text-left"> \n\t\t\t\t{{::"TOOLS.LOG.SUBMIT_MODAL.NOTE" | translate}} \n\t\t\t</div>\n\t\t\t<form role="form" novalidate name="emailForm" id="emailForm" class="text-left">\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div agent-input class="form-group form-group-margin">\n\t\t\t\t\t\t<label translate="TOOLS.LOG.SUBMIT_MODAL.NAME"></label>\n\t\t\t\t\t\t<input ng-model="emailObj.agentName" name="name" id="name" type="text" class="form-control" autofocus/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div agent-input class="form-group form-group-margin">\n\t\t\t\t\t\t<label translate="TOOLS.LOG.SUBMIT_MODAL.EMAIL"></label>\n\t\t\t\t\t\t<input ng-model="emailObj.emailFrom" name="from" id="from" type="text" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t<div agent-input class="form-group form-group-margin">\n\t\t\t\t\t\t<label translate="TOOLS.LOG.SUBMIT_MODAL.PHONE"></label>\n\t\t\t\t\t\t<input ng-model="emailObj.dialDest" name="phone" id="phone" type="text" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t<div agent-input class="form-group form-group-margin">\n\t\t\t\t\t\t<label translate="TOOLS.LOG.SUBMIT_MODAL.EMAIL_TITLE"></label>\n\t\t\t\t\t\t<input ng-model="emailObj.emailSubject" name="title" id="title" type="text" class="form-control"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label translate="TOOLS.LOG.SUBMIT_MODAL.DETAIL"></label>\n\t\t\t\t\t\t<textarea ng-model="emailObj.emailDetail" name="description" id="description" rows="8" class="form-control"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<div class="custom-btn-group">\n\t\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t\t{{::"GENERICS.ACTIONS.CANCEL"| translate}}\n\t\t\t</button>\n\t\n\t\t\t<button class="btn btn-secondary" ng-disabled="emailForm.$invalid || loading" ng-click="send()">\n\t\t\t\t{{ ::"GENERICS.ACTIONS.SUBMIT" | translate}}\n\t\t\t</button>\n\t\t</div>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("logs/logs.search.tpl.html",[]).run(["$templateCache",function(a){
a.put("logs/logs.search.tpl.html",'<div class="card-wrapper-config">\n\t<div class="lead-management">\n\t\t<div class="lead-search-wrapper">\n\t\t\t<div class="lead-search card-wrapper">\n\t\t\t\t<div class="title" translate="TOOLS.LOG"></div>\n\n\t\t\t\t<md-card>\n\t\t\t\t\t\t<md-card-content>\n\t\t\t\t\t\t\t<form name="logForm" novalidate autocomplete="off">\n\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-md-6 form-group">\n\t\t\t\t\t\t\t\t\t\t<label translate="TOOLS.LOG.LEVEL"></label>\t\t\n\t\t\t\t\t\t\t\t\t\t<ui-select class="login-select" ng-model="vm.logLevel" theme="bootstrap" sortable="true" autofocus="true" append-to-body="true">\n\t\t\t\t\t\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SELECT_ALT\' | translate }}">{{\'TOOLS.LOG.LEVEL.\'.concat($select.selected) | uppercase | translate}}</ui-select-match>\n\t\t\t\t\t\t\t\t\t\t\t<ui-select-choices repeat="level in vm.logLevels | filter: $select.search">\n\t\t\t\t\t\t\t\t\t\t\t\t<div ng-bind-html="\'TOOLS.LOG.LEVEL.\'.concat(level) | uppercase | translate | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="col-md-6 form-group" agent-input>\n\t\t\t\t\t\t\t\t\t\t<label translate="TOOLS.LOG.MAX_ROWS"></label>\n\t\t\t\t\t\t\t\t\t\t<input class="form-control" type="number" name="rows" ng-model="vm.rows" min="1" max="500" required />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="row">\t\n\t\t\t\t\t\t\t\t\t<div class="col-md-6 form-group">\n\t\t\t\t\t\t\t\t\t\t<label translate="TOOLS.LOG.START"></label>\n\t\t\t\t\t\t\t\t\t\t<cf-date-time-picker ng-model="vm.startDate"\n\t\t\t\t\t\t\t\t\t\t                     max-date="vm.endDate"\n\t\t\t\t\t\t\t\t\t\t                     required="true"\n\t\t\t\t\t\t\t\t\t\t                     name="startDate"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t format="{{ vm.dateFormat }}">\n\t\t\t\t\t\t\t\t\t\t</cf-date-time-picker>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="col-md-6 form-group">\n\t\t\t\t\t\t\t\t\t\t<label translate="TOOLS.LOG.END"></label>\n\t\t\t\t\t\t\t\t\t\t<cf-date-time-picker ng-model="vm.endDate"\n\t\t\t\t\t\t\t\t\t\t                     min-date="vm.startDate"\n\t\t\t\t\t\t\t\t\t\t                     required="true"\n\t\t\t\t\t\t\t\t\t\t                     name="endDate"\n\t\t\t\t\t\t\t\t\t\t                     format="{{ vm.dateFormat }}">\n\t\t\t\t\t\t\t\t\t\t</cf-date-time-picker>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-sm-12">&nbsp;</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t<div class="col-sm-6 col-md-3 full-width-btn">\n\t\t\t\t\t\t\t\t\t\t<button type="submit" ng-disabled="logForm.$invalid"\n\t\t\t\t\t\t\t\t\t\t        ng-click="vm.submit()" class="btn btn-secondary" translate="TOOLS.LOG.GET_RESULTS"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class="col-sm-6 col-md-3 full-width-btn">\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-default"\n\t\t\t\t\t\t\t\t\t\t        ng-click="vm.email($event)" translate="TOOLS.LOG.SUBMIT_LOG"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</md-card-content>\n\t\t\t\t\t</md-card>\n\n\t\t\t\t<div class="card-wrapper">\n\t\t\t\t\t<div class="title" translate="TOOLS.LOG.GRID"></div>\n\t\t\t\t\t<md-card data-html2canvas-ignore>\n\t\t\t\t\t\t<md-card-content>\n\t\t\t\t\t\t\t<table st-table="vm.logResults" class="table table-striped log-table"\n\t\t\t\t\t\t\t       ng-show="!vm.loading && vm.logResults.length > 0">\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th translate="TOOLS.LOG.GRID.LOG_LEVEL"></th>\n\t\t\t\t\t\t\t\t\t<th translate="TOOLS.LOG.GRID.DTS"></th>\n\t\t\t\t\t\t\t\t\t<th translate="TOOLS.LOG.GRID.MESSAGE"></th>\n\t\t\t\t\t\t\t\t\t<th translate="TOOLS.LOG.GRID.DETAIL"></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr class="animate-fade-fast" ng-repeat="item in vm.logResults">\n\t\t\t\t\t\t\t\t\t<td>{{ ::item.logLevel }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ ::item.dts | date:\'short\' }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ ::item.message }}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<pre>{{ ::item.data | json }}</pre>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t<h4 ng-show="!vm.loading && vm.logResults.length === 0">\n\t\t\t\t\t\t\t\t{{ ::\'TOOLS.LOG.NO_RESULTS_MSG\' | translate }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<h4 ng-show="vm.loading">\n\t\t\t\t\t\t\t\t{{ ::\'TOOLS.LOG.LOADING_MSG\' | translate }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</md-card-content>\n\t\t\t\t\t</md-card>\n\t\t\t\t</div>\n\t\t\t\t<div class="scroll-to-top" ng-click="vm.scrollToTop()">\n\t\t\t\t\t<i class="material-icons">keyboard_arrow_up</i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("monitoring/agents/agentCallTotals.tpl.html",[]).run(["$templateCache",function(a){a.put("monitoring/agents/agentCallTotals.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content width-sm">\n\t\t<h4 class="md-title" translate="DASHBOARD.AGENTS.CALL_TOTALS.CALL_TOTALS"></h4>\n\n\t\t<div class="md-dialog-content-body text-left">\n\t\t\t<span translate="DASHBOARD.AGENTS.CALL_TOTALS.TITLE_HELP_TEXT"></span>\n\t\t\t<div style="padding-top: 20px; font-weight: 500;">\n\t\t\t\t<div>\n\t\t\t\t\t<span translate="DASHBOARD.AGENTS.CALL_TOTALS.OUTBOUND"></span>\n\t\t\t\t\t<span>-</span>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ outboundCount }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div>\n\t\t\t\t\t<span translate="DASHBOARD.AGENTS.CALL_TOTALS.INBOUND"></span>\n\t\t\t\t\t<span>-</span>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ inboundCount }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\n\t\t\t\t<div>\n\t\t\t\t\t<span translate="DASHBOARD.AGENTS.CALL_TOTALS.TOTAL"></span>\n\t\t\t\t\t<span>-</span>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ inboundCount + outboundCount }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-secondary" ng-click="close()">\n\t\t\t{{ ::\'GENERICS.ACTIONS.CLOSE\' | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("monitoring/agents/agents.tpl.html",[]).run(["$templateCache",function(a){a.put("monitoring/agents/agents.tpl.html",'<div ng-if="!vm.allowAgentStats" class="no-stats-splash">\n\t<div>\n\t\t<div class="default-page">\n\t\t\t<i class="material-icons">equalizer</i>\n\t\t</div>\n\t\t<div>\n\t\t\t<div class="no-stats-header" translate="MONITORING.AGENT_STATS.NO_STATS"></div>\n\t\t\t<div class="no-stats-msg" translate="MONITORING.AGENT_STATS.NO_STATS_HELP"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="card-wrapper-config agent-list" ng-if="vm.allowAgentStats">\n\t<div class="card-wrapper"\n\t     ng-mouseleave="vm.showOptions = false;"\n\t     ng-mouseover="vm.showOptions = true;">\n\n\t\t<div class="title">\n\t\t\t<div class="btn-group" role="group" ng-class="{\'show-options\': vm.showOptions}">\n\t\t\t\t<button type="button" class="btn btn-default" md-ink-ripple\n\t\t\t\t        ng-click="vm.showTableConfig($event);" >\n\t\t\t\t\t<i class="material-icons">{{ \'settings\' }}</i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<table st-table="vm.latestData" st-safe-src="vm.statsService[vm.agentEvent][0]" class="table">\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th class="table-padding-column"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[0].visible === false" st-sort="lastName" translate="DASHBOARD.AGENTS.GRID.AGENT"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[1].visible === false" st-sort="skillProfileName" translate="DASHBOARD.AGENTS.GRID.SKILL"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[2].visible === false" st-sort="agentState" translate="DASHBOARD.AGENTS.GRID.STATE"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[3].visible === false" st-sort="stateDuration" translate="DASHBOARD.AGENTS.GRID.STATE.DURATION"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[4].visible === false" st-sort="pendingDispTime" translate="DASHBOARD.AGENTS.GRID.PENDING_DISP_TIME"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[5].visible === false" st-sort="loginDuration" translate="DASHBOARD.AGENTS.GRID.LOGIN"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[6].visible === false" st-sort="calls" translate="DASHBOARD.AGENTS.GRID.CALLS"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[7].visible === false" st-sort="totalTalkTime" translate="DASHBOARD.AGENTS.GRID.TALK_TIME"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[8].visible === false" st-sort="avgTalkTime" translate="DASHBOARD.AGENTS.GRID.TALK_TIME.AVERAGE"></th>\n\t\t\t\t<th ng-hide="vm.tableDefs[9].visible === false" st-sort="utilization" translate="DASHBOARD.AGENTS.GRID.UTILIZATION"></th>\n\t\t\t\t<th class="table-padding-column"></th>\n\t\t\t</tr>\n\t\t\t</thead>\n\n\t\t\t<tbody>\n\t\t\t<tr ng-repeat="agent in vm.latestData track by $index"\n\t\t\t    ng-click="vm.selectAgent(agent)"\n\t\t\t    ng-class="{\'selected\': vm.monitorService.selectedAgent.agentId === agent.agentId, \'no-pointer\' : !vm.monitorEnabled, \'dselected\': vm.agentService.agentSettings.agentId === agent.agentId}">\n\t\t\t\t<td></td>\n\t\t\t\t<td ng-hide="vm.tableDefs[0].visible === false">{{ agent.firstName + \' \' + agent.lastName }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[1].visible === false">{{ agent.skillProfileName | nullSafe }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[2].visible === false">{{ agent.agentState | nullSafe }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[3].visible === false">{{ agent.stateDuration | hhMmSs }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[4].visible === false">{{ agent.pendingDispTime | hhMmSs }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[5].visible === false">{{ agent.loginDuration | hhMmSs }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[6].visible === false" ng-click="vm.openCallTotals($event, agent.agentId);">\n\t\t\t\t\t<md-tooltip>\n\t\t\t\t\t\t{{ vm.callTotalsLoading ? \'GENERICS.MESSAGES.LOADING\' : \'DASHBOARD.AGENTS.CALL_TOTALS.HELP\' | translate }}\n\t\t\t\t\t</md-tooltip>\n\t\t\t\t\t{{ agent.calls | nullSafe }}\n\t\t\t\t</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[7].visible === false">{{ agent.totalTalkTime | hhMmSs }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[8].visible === false">{{ agent.avgTalkTime | hhMmSs }}</td>\n\t\t\t\t<td ng-hide="vm.tableDefs[9].visible === false">{{ agent.utilization | rtrPercent:2 }}</td>\n\t\t\t\t<td></td>\n\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</div>\n')}]),angular.module("monitoring/detail/detail.tpl.html",[]).run(["$templateCache",function(a){a.put("monitoring/detail/detail.tpl.html",'<div class="agent-detail">\n\t<md-card class="details monitor-card">\n\t\t<md-card-title>\n\t\t\t<md-card-title-text class="name">\n\t\t\t\t{{ vm.monitorService.selectedAgent.firstName + \' \' + vm.monitorService.selectedAgent.lastName }}\n\t\t\t\t<span class="md-subhead" ng-if="vm.monitorService.selectedAgent.online === false">\n\t\t\t\t\t{{ ::\'AGENT_MONITOR.OFFLINE\' | translate }}\n\t\t\t\t</span>\n\t\t\t</md-card-title-text>\n\n\t\t\t<md-menu md-position-mode="target-right target">\n\t\t\t\t<md-button\n\t\t\t\t\t\tng-click="$mdMenu.open($event)"\n\t\t\t\t\t\tclass="md-icon-button"\n\t\t\t\t\t\tng-disabled="vm.monitorService.selectedAgent.online === false"\n\t\t\t\t\t\tng-class="vm.monitorService.selectedAgent.online === false ? \'menu-disabled\' : \'\' ">\n\t\t\t\t\t<i class="material-icons">more_vert</i>\n\t\t\t\t</md-button>\n\n\t\t\t\t<md-menu-content width="3">\n\t\t\t\t\t<md-menu-item>\n\t\t\t\t\t\t<md-button ng-click="vm.chatAgent()" class="md-btn-secondary">\n\t\t\t\t\t\t\t{{ ::\'MONITORING.AGENT_OPTIONS.CHAT\' | translate }}\n\t\t\t\t\t\t</md-button>\n\t\t\t\t\t</md-menu-item>\n\t\t\t\t\t<md-menu-divider ng-if="vm.monitorEnabled"></md-menu-divider>\n\t\t\t\t\t<md-menu-item ng-if="vm.monitorEnabled">\n\t\t\t\t\t\t<md-button ng-click="vm.logoutAgent()" class="md-btn-danger">\n\t\t\t\t\t\t\t{{ ::\'MONITORING.AGENT_OPTIONS.LOGOUT\' | translate }}\n\t\t\t\t\t\t</md-button>\n\t\t\t\t\t</md-menu-item>\n\t\t\t\t</md-menu-content>\n\t\t\t</md-menu>\n\t\t</md-card-title>\n\n\t\t<md-card-content class="stats inline">\n\t\t\t<div class="stat">\n\t\t\t\t<label translate="MONITORING.AGENT_STATS.STATE"></label>\n\t\t\t\t<span class="value">\n\t\t\t\t\t{{ vm.monitorService.selectedAgent.agentState }}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class="stat">\n\t\t\t\t<label translate="MONITORING.AGENT_STATS.STATE_DUR"></label>\n\t\t\t\t<span class="value">\n\t\t\t\t\t{{ vm.monitorService.selectedAgent.stateDuration | hhMmSs }}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class="stat">\n\t\t\t\t<label translate="MONITORING.AGENT_STATS.AVG_TALK_TIME"></label>\n\t\t\t\t<span class="value">\n\t\t\t\t\t{{ vm.monitorService.selectedAgent.avgTalkTime | hhMmSs }}\n\t\t\t\t</span>\n\t\t\t</div>\n\n\t\t\t<div class="stat">\n\t\t\t\t<label translate="MONITORING.AGENT_STATS.TOTAL_TALK_TIME"></label>\n\t\t\t\t<span class="value">\n\t\t\t\t\t{{ vm.monitorService.selectedAgent.totalTalkTime | hhMmSs }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</md-card-content>\n\t</md-card>\n\n\t<div class="agent-body" ng-if="vm.monitorEnabled">\n\t\t<div>\n\t\t\t<label translate="AGENT_MONITOR.CALL" class="section-label"></label>\n\n\t\t\t<div class="card-wrapper">\n\t\t\t\t<monitor-detail-card class="detail-card"\n\t\t\t\t                     type="{{ vm.detailCardTypes.CALL }}"\n\t\t\t\t                     agent="vm.monitorService.selectedAgent"\n\t\t\t\t                     uii="vm.monitorService.selectedAgent.uii">\n\t\t\t\t</monitor-detail-card>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-show="vm.monitorService.getChatMonitoredAgent(vm.monitorService.selectedAgent.agentId)">\n\t\t\t<label translate="AGENT_MONITOR.CHAT.ACTIVE_CHATS" class="section-label"></label>\n\t\t\t<div ng-show="vm.monitorService.getActiveChatListForAgent(vm.monitorService.selectedAgent.agentId).length > 0" class="card-wrapper chat-card-wrapper">\n\t\t\t\t<monitor-chat-detail-card\n\t\t\t\t\t\tng-repeat="chat in vm.monitorService.getActiveChatListForAgent(vm.monitorService.selectedAgent.agentId)"\n\t\t\t\t\t\tclass="detail-card"\n\t\t\t\t\t\tchat="chat"\n\t\t\t\t\t\tagent="vm.monitorService.selectedAgent"\n\t\t\t\t\t\tuii="chat.uii">\n\t\t\t\t</monitor-chat-detail-card>\n\t\t\t</div>\n\t\t\t<div ng-if="vm.monitorService.getActiveChatListForAgent(vm.monitorService.selectedAgent.agentId).length === 0">\n\t\t\t\t<h4 class="no-margin" translate="AGENT_MONITOR.CHAT.NO_CHATS"></h4>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-show="vm.monitorService.getChatMonitoredAgent(vm.monitorService.selectedAgent.agentId)" class="inactive-chats">\n\t\t\t<label translate="AGENT_MONITOR.CHAT.INACTIVE_CHATS" class="section-label"></label>\n\t\t\t<div ng-show="vm.monitorService.getInactiveChatListForAgent(vm.monitorService.selectedAgent.agentId).length > 0" class="card-wrapper chat-card-wrapper">\n\t\t\t\t<monitor-chat-detail-card\n\t\t\t\t\t\tng-repeat="chat in vm.monitorService.getInactiveChatListForAgent(vm.monitorService.selectedAgent.agentId)"\n\t\t\t\t\t\tclass="detail-card"\n\t\t\t\t\t\tchat="chat"\n\t\t\t\t\t\tagent="vm.monitorService.selectedAgent"\n\t\t\t\t\t\tuii="chat.uii">\n\t\t\t\t</monitor-chat-detail-card>\n\t\t\t</div>\n\t\t\t<div ng-if="vm.monitorService.getInactiveChatListForAgent(vm.monitorService.selectedAgent.agentId).length === 0">\n\t\t\t\t<h4 class="no-margin" translate="AGENT_MONITOR.CHAT.NO_INACTIVE_CHATS"></h4>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("nav/nav.tpl.html",[]).run(["$templateCache",function(a){a.put("nav/nav.tpl.html",'<nav class="navbar unselectable">\n\t<div class="container-fluid">\n\t\t<div class="navbar-header">\n\t\t\t<div class="hamburger-menu" ng-if="!vm.callService.isChatView" ng-class="{\'active\': vm.agentService.openMenuState}" ng-click="vm.hamburgerMenuToggle()">\n\t\t\t\t<i class="icon-hamburger "></i>\n\t\t\t</div>\n\t\t\t<div class="hamburger-menu" ng-if="vm.callService.isChatView" ng-class="{\'active\': vm.agentService.openChatMenuState}" ng-click="vm.hamburgerMenuToggle()">\n\t\t\t\t<i class="icon-hamburger "></i>\n\t\t\t</div>\n\t\t\t<a class="navbar-brand">\n\t\t\t\t<img ng-src="{{ vm.smallImg }}" alt="brand">\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n\t\t\t<ul class="nav navbar-nav navbar-right">\n\t\t\t\t<li class="dropdown agent-state-dropdown">\n\t\t\t\t\t<button class="btn available agent-state dropdown-toggle no-animate"\n\t\t\t\t\t        data-toggle="dropdown" role="button">\n\t\t\t\t\t\t<div class="state-color" ng-style="{\'background-color\': vm.agentService.agentColor}"></div>\n\t\t\t\t\t\t<div class="state">{{ vm.agentService.currentAgentState | FormatStateLabel }}</div>\n\t\t\t\t\t\t<div ng-if="!vm.showBreakTimer" class="timer">\n\t\t\t\t\t\t\t<timer interval="1000" language="en">{{millis / 1000 | hhMmSs}}</timer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="vm.showBreakTimer && !vm.breakTimeExpired" class="timer">\n\t\t\t\t\t\t\t<timer countdown="vm.breakWaitTime" max-time-unit="\'hour\'" interval="1000" finish-callback="vm.breakOver()" >{{millis / 1000 | hhMmSs}}</timer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div ng-if="vm.showBreakTimer && vm.breakTimeExpired" class="timer">\n\t\t\t\t\t\t\t<timer interval="1000" language="en">-{{millis / 1000 | hhMmSs}}</timer>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</button>\n\t\t\t\t\t\n\t\t\t\t\t<ul class="dropdown-menu scrollable-menu" roll="menu">\n\t\t\t\t\t\t\x3c!-- commenting the search for now --\x3e\n\t\t\t\t\t\t\x3c!-- <li><input class="search" ng-model="searchStr" placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate}}"></li> --\x3e\n\t\t\t\t\t\t<li ng-repeat="state in vm.availableStates | filter:searchStr">\n\t\t\t\t\t\t\t<div class="circle" ng-style="{\'background-color\': state.color}"></div>\n\t\t\t\t\t\t\t<a class="clickable" ng-click="vm.agentService.setAgentState(state.value, state.label, state.color)">\n\t\t\t\t\t\t\t\t{{ ::state.label }}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\n\t\t\t\t\t<li class="widget-control">\n\t\t\t\t\t\t<md-button class="nav-btn md-icon-button"\n\t\t\t\t\t\t\t\t   aria-label="{{widget.name==\'chatControl\' ? \'Internal Chat\' : \'Agent Session Menu\'}}"\n\t\t\t\t\t\t\t\t   ng-if="vm.checkSupervisor(widget.name)"\n\t\t\t\t\t\t\t\t   ng-repeat="widget in vm.toolbarService.widgets | filter:{hide: \'!\'}"\n\t\t\t\t\t\t\t\t   ng-click="vm.toolbarService.toggleWidget(widget.name)"\n\t\t\t\t\t\t\t\t   ng-class="{\'chat-button\': widget.name==\'chatControl\', \'agent-button\': widget.name==\'agentControl\', \'active\': vm.toolbarService.getActiveWidget() === widget.name}"\n\t\t\t\t\t\t\t\t   uib-popover="{{\'WIDGETS.CHAT_CONTROL.TOOLTIP\' | translate}}"\n\t\t\t\t\t\t\t\t   popover-trigger="\'mouseenter\'"\n\t\t\t\t\t\t\t\t   popover-placement="bottom"\n\t\t\t\t\t\t\t\t   popover-class= \'menu-popover-style\'\n\t\t\t\t\t\t\t\t   popover-enable= "{{widget.name==\'chatControl\'}}">\n\t\t\t\t\t\t\t<span ng-if="vm.initials && widget.name!=\'chatControl\'" class="avatar">{{vm.initials}}</span>\n\t\t\t\t\t\t\t<i ng-if="widget.altIcon" class="icon-internalchat"></i>\n\t\t\t\t\t\t\t<div md-ink-ripple="#ffffff" class="notification" ng-if="widget.notification()"></div>\n\t\t\t\t\t\t\t<img ng-if="!vm.initials && widget.name==\'agentControl\'"  ng-src="assets/images/{{::widget.icon}}"/>\n\t\t\t\t\t\t</md-button>\n\t\t\t\t\t</li>\n\t\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</nav>\n')}]),angular.module("phone/callHistory/callHistory.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/callHistory/callHistory.tpl.html",'<div class="phone-left">\n    <h3 class="nav-title" translate="PHONE.CALL_HISTORY"></h3>\n\n    <div class="scrollable-wrapper list-padding">\n        <div class="card-container">\n            <div class="card-block">\n                <div ng-repeat="call in vm.callHistory | orderBy:\'-time\' | limitTo: vm.limit"\n                     class="card-wrapper"\n                     ng-class="call.selected ? \'lead-selected\' : \'\'">\n\n                    <call-history-card call="call"\n                                       ng-click="vm.goToCall(call)">\n                    </call-history-card>\n                </div>\n            </div>\n        </div>\n\n\n        <div class="action-btn full-width-btn">\n\t\t        <div ng-if="vm.isListExist" class="text-center call-history-error-message">\n\t\t\t          {{ ::\'PHONE.CALL_HISTORY.CALL_LOADED\' | translate }}\n\t\t        </div>\n\t\t        <div ng-if="vm.maxCallHistory()" class="text-center call-history-error-message">\n\t\t\t          {{ ::\'PHONE.CALL_HISTORY.LOADED_MAX_MESSAGE\' | translate }}\n                </div>\n                <div class="text-center">\n                    <button class="btn btn-secondary custom btn-light call-history-load-more-button"\n                        ng-click="vm.loadMoreCallHistory()"\n                        ng-disabled="vm.maxCallHistory() || vm.isListExist">\n                        <span ng-if="vm.loading">\n                            <i class="fa fa-circle-o-notch fa-1x fa-pulse"></i>\n                        </span>\n                        <span ng-if="!vm.loading">\n                                {{ ::\'PHONE.CALL_HISTORY.LOAD_MORE\' | translate }}\n                        </span>\n                    </button>\n                </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("phone/leads/leadManagement.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/leads/leadManagement.tpl.html",'<div class="card-wrapper-config">\n    <md-tabs class="md-primary" md-selected="vm.selectedIndex">\n        <md-tab ng-disabled="!vm.agentPermissions.allowLeadSearch">\n            <md-tab-label>\n                <span class="tab-link" ui-sref="base.default.phone.leads.leadManagement({type:\'SEARCH\'})">\n                    {{::\'PHONE.PREVIEW.TITLE_SEARCH\' | translate}}\n                </span>\n            </md-tab-label>\n        </md-tab>\n        <md-tab ng-disabled="!vm.agentPermissions.allowLeadInserts">\n            <md-tab-label>\n                <span class="tab-link" ui-sref="base.default.phone.leads.leadManagement({type:\'INSERT\'})">\n                    {{::\'PHONE.LEAD_MANAGEMENT.INSERT.TITLE_ALT\' | translate}}\n                </span>\n            </md-tab-label>\n        </md-tab>\n    </md-tabs>\n\n    <div class="lead-search-wrapper" ui-view>\n        <lead-search type="{{vm.action}}"></lead-search>\n    </div>\n</div>\n')}]),angular.module("phone/modals/directTransferFailed.modal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/directTransferFailed.modal.tpl.html",'<md-dialog class="custom-alert-dialog custom-dialog" aria-label="Direct Transfer Failed" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<div class="close-button" ng-click="cancel()"> <i class="icon-close"></i></div>\n\t\t<h4 class="md-title ng-binding">{{::"PHONE.MODALS.DIRECT_XFER.TITLE" | translate}}</h4>\n\t\t<p class="text-left no-margin">\n\t\t\t{{ msg }}\n\t\t</p>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<div class="custom-btn-group">\n\t\t\t<button class="btn btn-link" ng-click="tryAnotherAgent()">\n\t\t\t\t{{ ::"PHONE.MODALS.DIRECT_XFER.TRY_ANOTHER" | translate }}\n\t\t\t</button>\n\t\t\t<button class="btn btn-secondary" ng-click="sendToVoicemail()">\n\t\t\t\t{{ ::"PHONE.MODALS.DIRECT_XFER.SEND_TO_VM" | translate }}\n\t\t\t</button>\n\t\t</div>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/directTransferPresented.modal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/directTransferPresented.modal.tpl.html",'<md-dialog class="custom-alert-dialog custom-dialog" aria-label="Direct Transfer Presented" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding" translate="PHONE.MODALS.DIRECT_XFER.PRESENTED.TITLE"></h4>\n\n\t\t<div class="text-center">\n\t\t\t{{ ::"PHONE.MODALS.DIRECT_XFER.PRESENTED.MSG" | translate }}\n\t\t</div>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button class="btn btn-danger-link" ng-click="ignore()">\n\t\t\t{{ ::"PHONE.MODALS.DIRECT_XFER.PRESENTED.IGNORE" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-click="accept()">\n\t\t\t{{ ::"PHONE.MODALS.DIRECT_XFER.PRESENTED.ACCEPT" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/emailTemplate.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/emailTemplate.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content width-lg">\n\t\t<h4 class="md-title" translate="DISPOSITIONS.EMAIL_TEMPLATE.TITLE"></h4>\n\n\t\t<div class="md-dialog-content-body">\n\t\t\t<div class="bs-callout bs-callout-primary">\n\t\t\t\t<h4 translate="DISPOSITIONS.EMAIL_TEMPLATE.CONFIRM_TITLE"></h4>\n\t\t\t\t<span translate="DISPOSITIONS.EMAIL_TEMPLATE.CONFIRM_MSG"></span>\n\t\t\t</div>\n\t\t\t<form role="form" novalidate name="emailTemplateEdit" id="emailTemplateEdit">\n\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="form-group align-left">\n\t\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.FROM"></label>\n\t\t\t\t\t\t\t<input ng-disabled="!emailTemplate.allowFromChange" type="text" ng-model="emailTemplate.emailFrom" class="form-control" name="emailFrom">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="form-group align-left">\n\t\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.TO"></label>\n\t\t\t\t\t\t\t<input ng-disabled="!emailTemplate.allowToChange" type="text" ng-model="emailTemplate.emailTo" name="emailTo" class="form-control">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="form-group align-left">\n\t\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.CC"></label>\n\t\t\t\t\t\t\t<input ng-disabled="!emailTemplate.allowCcChange" type="text" ng-model="emailTemplate.emailCc" name="emailCc" class="form-control">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="form-group align-left">\n\t\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.BCC"></label>\n\t\t\t\t\t\t\t<input ng-disabled="!emailTemplate.allowBccChange" type="text" class="form-control" ng-model="emailTemplate.emailBcc" name="emailBcc">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-12">\n\t\t\t\t\t\t<div class="form-group align-left">\n\t\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.SUBJECT"></label>\n\t\t\t\t\t\t\t<input ng-disabled="!emailTemplate.allowSubjectChange" type="text" ng-model="emailTemplate.emailSubject" name="emailSubject" class="form-control">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-12 align-left">\n\t\t\t\t\t\t<label translate="DISPOSITIONS.EMAIL_TEMPLATE.EMAIL_TEMPLATE"></label>\n\t\t\t\t\t\t<text-editor editor-disabled="!emailTemplate.allowBodyChange" ng-model="emailTemplate.emailRte"></text-editor>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="confirmCancel()">\n\t\t\t{{ ::\'DISPOSITIONS.EMAIL_TEMPLATE.DISCARD\' | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="emailTemplateEdit.$invalid" ng-click="save()">\n\t\t\t{{ ::\'DISPOSITIONS.EMAIL_TEMPLATE.SEND\' | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/hangupModal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/hangupModal.tpl.html",'<md-dialog class="custom-dialog hangup" aria-label="Hangup Call" role="dialog" id="hangUpCall">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding" translate="SOFTPHONE.HANGUP.TITLE"></h4>\n\n\t\t<form name="hangupForm" class="" role="form" novalidate>\n\t\t\t<md-radio-group ng-model="data.hangup" class="md-primary">\n\t\t\t\t<md-radio-button value="1" ng-if="allowEndForAll">\n\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.ALL\' | translate }}\n\t\t\t\t</md-radio-button>\n\t\t\t\t<md-radio-button value="{{ callService.currentCall.sessionId }}">\n\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.ME\' | translate }}\n\t\t\t\t</md-radio-button>\n\t\t\t\t<md-radio-button ng-repeat="dest in transferSessions" value="{{ dest.sessionId }}">\n\t\t\t\t\t<span ng-if="callService.currentCall.isMonitoring">\n\t\t\t\t\t\t{{ dest.destination | phoneFormat }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-if="!callService.currentCall.isMonitoring && !dest.isCorpExtension">\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.XFER\' | translate:{destination: (dest.destination | phoneFormat)} }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-if="!callService.currentCall.isMonitoring && dest.isCorpExtension">\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.XFER\' | translate }}  {{dest.extension | translate}}\n\t\t\t\t\t</span>\n\t\t\t\t</md-radio-button>\n\n\t\t\t</md-radio-group>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{::"GENERICS.ACTIONS.CANCEL" | translate}}\n\t\t</button>\n\n\t\t<button class="btn btn-danger" ng-click="hangup()">\n\t\t\t{{::"SOFTPHONE.HANGUP" | translate}}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n\n')}]);angular.module("phone/modals/hangupOffhook.modal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/hangupOffhook.modal.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content">\n\t\t<h4 class="md-title" translate="SOFTPHONE.OFF_HOOK.CONFIRM.TITLE"></h4>\n\n\t\t<div class="mg-dialog-content-body">\n\t\t\t<p translate="SOFTPHONE.OFF_HOOK.CONFIRM.MSG"></p>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button ng-click="closeError()" class="btn btn-link">\n\t\t\t{{ ::\'GENERICS.ACTIONS.NO\' | translate }}\n\t\t</button>\n\t\t<button ng-click="closeSuccess()" class="btn btn-danger">\n\t\t\t{{ ::\'SOFTPHONE.OFF_HOOK.CONFIRM.YES\' | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/holdModal.tpl.html",[]).run(["$templateCache",function(a){
a.put("phone/modals/holdModal.tpl.html",'<md-dialog class="custom-dialog" aria-label="Transfer Destination" role="dialog" id="holdModal">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding" translate="SOFTPHONE.HOLD_TITLE"></h4>\n\n\t\t<form name="modalForm" ng-cloak>\n\t\t\t<div>\n\t\t\t\t<md-checkbox class="md-primary" ng-model="currentCall.onHold" aria-label="Hold session">\n\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.CALLER\'| translate:{destination: (currentCall.ani | phoneFormat) } }}\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\n\t\t\t<div ng-repeat="(key, value) in updateSessions(transferSessions)">\n\t\t\t\t<md-checkbox class="md-primary" ng-model="value.onHold" aria-label="Hold session">\n\t\t\t\t\t<span ng-if="!value.isCorpExtension">\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.XFER\'| translate:{destination: (value.destination | phoneFormat) } }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-if="value.isCorpExtension">\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP.XFER\'| translate }}  {{value.extension | translate}}\n\t\t\t\t\t</span>\n\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="modalForm.$invalid" ng-click="ok()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CONFIRM" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/needToBeAvailableModal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/needToBeAvailableModal.tpl.html",'<md-dialog class="custom-alert-dialog custom-dialog" aria-label="Required State Change" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<h4 class="md-title ng-binding">{{::"PHONE.MODALS.NOT_AVAILABLE.TITLE" | translate}}</h4>\n\t\t<div class="text-left">\n\t\t\t{{ ::"PHONE.MODALS.NOT_AVAILABLE.MSG" | translate }}\n\t\t</div>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="close()">\n\t\t\t{{ ::"GENERICS.ACTIONS.DISMISS" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-click="goAvailable()">\n\t\t\t{{ ::"PHONE.MODALS.NOT_AVAILABLE.OK" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/requeueModal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/requeueModal.tpl.html",'<md-dialog class="custom-dialog hangup" aria-label="Hangup Call" role="dialog" id="requeueModal">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\t\t<div class="close-button" ng-click="cancel()"> <i class="icon-close"></i></div>\n\t\t<h4 class="md-title ng-binding" translate="SOFTPHONE.REQUEUE.TITLE"></h4>\n\n\t\t<form name="requeueForm" role="form" novalidate>\n\t\t\t<div ng-if="callSvc.currentCall.requeueType === \'ADVANCED\' ">\n\n\t\t\t\t<div ng-if="allowCrossQueueRequeue" class="form-group align-left">\n\t\t\t\t\t<label translate="SOFTPHONE.REQUEUE.QUEUE"></label>\n\t\t\t\t\t<ui-select name="requeueQueue" id="requeueQueue" theme="bootstrap" ng-model="props.queue" on-select="clearSkill()" required append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ $select.selected.gateName }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t\t<ui-select-choices repeat="queue as queue in requeueQueues | filter: $select.search" group-by="\'groupName\'">\n\t\t\t\t\t\t\t<div ng-bind-html="queue.gateName | highlight: $select.search"></div>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if="props.queue && props.queue.groupSkills" class="form-group">\n\t\t\t\t\t<label translate="SOFTPHONE.REQUEUE.SKILL"></label>\n\t\t\t\t\t<ui-select name="requeueSkill" id="requeueSkill" theme="bootstrap" ng-model="props.skillId"\n\t\t\t\t\t           ng-disabled="!props.queue" append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}" allow-clear="true">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ $select.selected.skillName }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t\t<ui-select-choices repeat="skill.skillId as skill in props.queue.groupSkills | filter: $select.search">\n\t\t\t\t\t\t\t<div ng-bind-html="skill.skillName | highlight: $select.search"></div>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div ng-if="callSvc.currentCall.requeueType !== \'ADVANCED\'" class="form-group">\n\t\t\t\t<label translate="SOFTPHONE.REQUEUE.SHORTCUT"></label>\n\n\t\t\t\t<ui-select name="requeueQueueShortcut" id="requeueQueueShortcut" theme="bootstrap" ng-model="props.shortcut" required append-to-body="true">\n\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ $select.selected.name }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t<ui-select-choices repeat="shortcut as shortcut in callSvc.currentCall.requeueShortcuts | orderBy:\'rank\' | filter: $select.search">\n\t\t\t\t\t\t<div ng-bind-html="shortcut.name | highlight: $select.search"></div>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<md-checkbox class="md-primary" ng-model="props.stayOnCall" aria-label="Stay on Call">\n\t\t\t\t\t{{ ::\'SOFTPHONE.REQUEUE.STAY_ON_CALL\' | translate }}\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<div class="custom-btn-group">\n\t\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t\t</button>\n\t\t\t<button class="btn btn-secondary" ng-disabled="requeueForm.$invalid" ng-click="requeue()">\n\t\t\t\t{{ ::"SOFTPHONE.REQUEUE" | translate }}\n\t\t\t</button>\n\t\t</div>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/modals/transferModal.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/modals/transferModal.tpl.html",'<md-dialog class="custom-dialog" aria-label="Transfer Destination" role="dialog" id="transferModal">\n\t<md-dialog-content class="md-dialog-content width-lg" role="document">\n\t\t<div class="close-button" ng-click="cancel(result)"> <i class="icon-close"></i></div>\n\t\t<h4 class="md-title ng-binding" translate="SOFTPHONE.XFER_DEST_TITLE"></h4>\n\t\t\n\t\t<form name="transferForm" ng-cloak>\n\t\t\t<div class="custom-tabs centered">\n\t\t\t\t<div class="tab"\n\t\t\t\t\tng-if="callService.currentCall.allowDirectAgentTransfer !== \'0\'"\n\t\t\t\t\tng-click="loadAgentsAndSelectInternal();" ng-class="{selected: tabSelected === 3}">\n\t\t\t\t   {{ ::\'SOFTPHONE.DIRECT_AGENT_XFER.INTERNAL\' | translate }}\n\t\t\t   </div>\n\t\t\t   <div class="tab corpDirectory"\n\t\t\t\t\tng-if="allowCorpDirectory === true"\n\t\t\t\t\tng-click="loadCorporateDirectory()" \n\t\t\t\t\tng-class="{selected: tabSelected === 4}">\n\t\t\t\t\t{{ ::\'SOFTPHONE.XFER_CORPORATE_DIR\' | translate }}\n\t\t\t\t</div>\n\t\t\t\t<div class="tab" ng-click="tabSelected = 1" ng-class="{selected: tabSelected === 1}">\n\t\t\t\t\t{{ ::\'SOFTPHONE.XFER_PHONEBOOK\' | translate }}\n\t\t\t\t</div>\n\t\t\t\t<div class="tab" ng-click="tabSelected = 2" ng-class="{selected: tabSelected === 2}">\n\t\t\t\t\t{{ ::\'SOFTPHONE.DEST\' | translate }}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="form-group" ng-if="tabSelected === 3 && callService.currentCall.allowDirectAgentTransfer">\n\t\t\t\t<ui-select name="agentList" id="agentList" theme="bootstrap" class="internal-xfer-select"\n\t\t\t\t           ng-model="result.directAgent" append-to-body="true" required>\n\t\t\t\t\t<ui-select-match placeholder="{{::\'SOFTPHONE.DIRECT_AGENT_XFER.SELECT\' | translate }}" allow-clear="true">\n\t\t\t\t\t\t<span class="selected-agent">\n\t\t\t\t\t\t\t<span class="status" ng-class="{available: $select.selected.available}"></span>\n\t\t\t\t\t\t\t<span class="name">\n\t\t\t\t\t\t\t\t{{ $select.selected.firstName + \' \' + $select.selected.lastName }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="state">\n\t\t\t\t\t\t\t\t{{ $select.selected.available ? \'SOFTPHONE.XFER_INTERNAL.AVAILABLE\' : \'SOFTPHONE.XFER_INTERNAL.UNAVAILABLE\' | translate }}\n\n\t\t\t\t\t\t\t\t<span class="state-detail" ng-if="!$select.selected.available && agent.type === \'Agents\' && !agent.pendingDisp">\n\t\t\t\t\t\t\t\t\t({{ $select.selected.agentState }})\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t<ui-select-choices repeat="agent as agent in availableAgents | filter: $select.search | limitTo: 100"\n\t\t\t\t\t                   group-by="\'type\'"\n\t\t\t\t\t                   refresh="loadAvailableAgents()"\n\t\t\t\t\t                   refresh-delay="5000">\n\t\t\t\t\t\t<div class="status" ng-class="{available: agent.available}"></div>\n\t\t\t\t\t\t<div class="name" ng-bind-html="agent.firstName.concat(\' \').concat(agent.lastName) | highlight: $select.search"></div>\n\t\t\t\t\t\t<div class="state">\n\t\t\t\t\t\t\t{{ agent.available ? \'SOFTPHONE.XFER_INTERNAL.AVAILABLE\' : \'SOFTPHONE.XFER_INTERNAL.UNAVAILABLE\' | translate }}\n\n\t\t\t\t\t\t\t<span class="state-detail" ng-if="!agent.available && agent.type === \'Agents\' && !agent.pendingDisp">\n\t\t\t\t\t\t\t\t({{ agent.agentState }})\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ui-select-choices>\n\n\t\t\t\t\t<ui-select-no-choice>\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.DIRECT_AGENT_XFER.NOT_AVAILABLE\' | translate }}\n\t\t\t\t\t</ui-select-no-choice>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\n\t\t\t<div class="form-group" ng-if="tabSelected === 4">\n\t\t\t\t<ui-select name="directoryList" id="directoryList" theme="bootstrap" class="internal-xfer-select" \n\t\t\t\t\tng-model="corporateDirectory" append-to-body="true" required on-select="onCorporateDirSelect($select.selected, $model)"\n\t\t\t\t\tng-disabled="previousValue == null">\n\t\t\t\t\t<ui-select-match placeholder="{{::\'SOFTPHONE.DIRECT_AGENT_XFER.SELECT\' | translate }}" allow-clear="true">\n\t\t\t\t\t\t<span class="selected-agent">\n\t\t\t\t\t\t\t<span class="status" ng-class="{available: $select.selected.presenceStatus == \'Available\'}"></span>\n\t\t\t\t\t\t\t<span class="name">\n\t\t\t\t\t\t\t\t{{ $select.selected.firstName + \' \' + $select.selected.lastName }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="state">\n\t\t\t\t\t\t\t\t{{ ::\'SOFTPHONE.XFER_CORP_DIRECTORY.EXT\' | translate }} {{ $select.selected.extensionNumber }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</ui-select-match>\n\t\t\t\t\t<ui-select-choices \n\t\t\t\t\t\trepeat="agent as agent in availableAgentsCorpDirectory | limitTo: 10"\n\t\t\t\t\t\tgroup-by="\'type\'" \n\t\t\t\t\t\trefresh="loadAvailableAgentsFromDirectory($select.search)" \n\t\t\t\t\t\trefresh-delay="1000">\n\t\t\t\t\t\t<div class="status" ng-class="{available: agent.presenceStatus == \'Available\'}"></div>\n\t\t\t\t\t\t<div class="name" ng-bind-html="agent.firstName.concat(\' \').concat(agent.lastName)"></div>\n\t\t\t\t\t\t<div class="state">\n\t\t\t\t\t\t\t{{ ::\'SOFTPHONE.XFER_CORP_DIRECTORY.EXT\' | translate }} {{ agent.extensionNumber }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\n\t\t\t<div class="form-group" ng-if="tabSelected === 1">\n\t\t\t\t<ui-select name="phonebook" id="phonebook" theme="bootstrap"\n\t\t\t\t           ng-model="result.phonebook" append-to-body="true" required>\n\t\t\t\t\t<ui-select-match placeholder="{{::\'SOFTPHONE.XFER_PHONEBOOK.SELECT\' | translate }}" allow-clear="true">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ getDecoratedName($select.selected) }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t</ui-select-match>\n\n\t\t\t\t\t<ui-select-choices repeat="book in callService.currentCall.transferPhoneBook | filter: $select.search">\n\t\t\t\t\t\t<div ng-bind-html="getDecoratedName(book) | highlight: $select.search"></div>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\n\t\t\t<div class="form-group" ng-if="tabSelected === 2" ng-class="{ \'with-country\': allowManualIntlTransfer }">\n\t\t\t\t<div ng-if="allowManualIntlTransfer">\n\t\t\t\t\t<ui-select ng-model="result.countryId" theme="bootstrap" sortable="true" append-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">{{$select.selected.countryName}} ({{$select.selected.countryId}})</ui-select-match>\n\t\t\t\t\t\t<ui-select-choices repeat="c.countryId as c in availCountries | filter: $select.search">\n\t\t\t\t\t\t\t<div ng-bind-html="c.countryName | highlight: $select.search"></div>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t\t<input class="form-control"\n\t\t\t\t       phone-number\n\t\t\t\t       ng-required="tabSelected === 2"\n\t\t\t\t       allow-sip="true"\n\t\t\t\t       pretty-print="true"\n\t\t\t\t       md-autofocus=""\n\t\t\t\t       ng-model="result.destination"\n\t\t\t\t       placeholder="555-555-5555" />\n\t\t\t</div>\n\n\t\t\t<div class="text-left">\n\t\t\t\t<md-checkbox class="md-primary" ng-model="stayOnCall" aria-label="Stay on Call">\n\t\t\t\t\t{{ ::\'SOFTPHONE.REQUEUE.STAY_ON_CALL\' | translate }}\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<div class="custom-btn-group">\n\t\t\t<button class="btn btn-link"\n\t\t\t        ng-if="tabSelected === 3 && callService.currentCall.allowDirectAgentTransfer"\n\t\t\t        ng-disabled="(transferForm.$invalid || stayOnCall) || (result.directAgent && result.directAgent.type !== agentString)"\n\t\t\t        ng-click="sendToVoicemail()">\n\t\t\t\t{{ ::"SOFTPHONE.REQUEUE.SEND_TO_VM" | translate }}\n\t\t\t</button>\n\t\t\t<button class="btn btn-secondary" ng-disabled="transferForm.$invalid" ng-click="ok()">\n\t\t\t\t{{ ::"SOFTPHONE.XFER_TRANSFER" | translate }}\n\t\t\t</button>\n\t\t</div>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("phone/phone.detail.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/phone.detail.tpl.html",'<div class="right-view">\n\t<cf-tabs cf-selected="selectedIndex">\n\t\t<cf-tab label="{{::\'RIGHT_PANEL.TABS.DETAIL\' | translate}}" class="detail">\n\t\t\t<div class="simple-group lead-info-title row">\n\t\t\t\t<span translate="LEAD_INFO"></span>\n\t\t\t</div>\n\t\t\t<hr class="custom-hr">\n\t\t\t<div class="simple-group row top-space">\n\t\t\t\t<div class="heading">\n\t\t\t\t\t<button class="dial dial-button"\n\t\t\t\t\t\t\tng-if="!vm.isHistoryView && (vm.lead.firstName || vm.lead.midName || vm.lead.lastName)"\n\t\t\t\t\t\t\tng-click="vm.findAndDialDestination()"\n\t\t\t\t\t\t\tng-disabled="vm.callService.onCall || vm.agentService.currentAgentState.baseState === \'TRANSITION\' || (multiNumber ? vm.leadService.allNumbersDialed(vm.leadService.selectedPreviewLead) : vm.leadService.leadDialDisabled(vm.lead, vm.outboundService.pendingPreviewDial))">\n\t\t\t\t\t\t<i class="dial-icon material-icons">local_phone</i>\n\t\t\t\t\t</button>\t\t\t\t\t\t\n\t\t\t\t\t<span >\n\t\t\t\t\t\t{{ vm.lead.firstName }} {{ vm.lead.midName }} {{ vm.lead.lastName }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-if="!vm.isHistoryView && vm.allowManualPass()">\n\t\t\t\t\t\t<button class="btn btn-link manual-pass"\n\t\t\t\t\t\t\t\tng-disabled="vm.callService.onCall || vm.agentService.currentAgentState.baseState === \'TRANSITION\'"\n\t\t\t\t\t\t\t\tng-click="vm.manualPass()">\n\t\t\t\t\t\t\t{{ ::"LEAD_DETAIL.MODAL.MANUAL_PASS" | translate }}\n\t\t\t\t\t\t\t<div class="close"></div>\n\t\t\t\t\t\t\t<i class="manual-pass-icon material-icons">local_phone</i>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="source" ng-if="vm.lead.campaignId && vm.lead.sourceType !== \'INBOUND\'"> \x3c!-- used if we have lead info --\x3e\n\t\t\t\t\t{{ vm.lead.campaignId | FormatEmptyValue | campaignNameFromId }}\n\t\t\t\t</div>\n\t\t\t\t<div class="source" ng-if="!vm.lead.campaignId || (vm.lead.campaignId && vm.lead.sourceType === \'INBOUND\')"> \x3c!--used when no lead info--\x3e\n\t\t\t\t\t{{ vm.lead.sourceName }}\n\t\t\t\t</div>\n\n\t\t\t\t<div class="app-url" ng-if="vm.appUrl" ng-class="{\'app-url-history\': (vm.isHistoryView && !vm.lead.firstName && !vm.lead.campaignId), \'app-url-except-history\': !vm.isHistoryView}">\n\t\t\t\t\t<cf-hostname-link destination="vm.appUrl"></cf-hostname-link>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if="multiNumber && !vm.isHistoryView">\n\t\t\t\t\t<div class="phone" ng-repeat="phone in vm.lead.destination track by $index" ng-class="{\'phone-alignment\': vm.isDialPadView}">\n\t\t\t\t\t\t<button ng-class="{\'manual-pass-not-allowed\': !vm.allowManualPass()}"\n\t\t\t\t\t\t\t\tclass="btn btn-link"\n\t\t\t\t\t\t\t\tng-click="vm.dial(phone, $event)"\n\t\t\t\t\t\t\t\tng-disabled="vm.leadService.multiNumberLeadDialDisabled(vm.leadService.selectedPreviewLead, vm.outboundService.pendingPreviewDial, phone)">\n\t\t\t\t\t\t\t{{ phone | FormatEmptyValue | phoneFormat }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="phone" ng-if="!multiNumber && !vm.isHistoryView" ng-class="{\'phone-alignment\': vm.isDialPadView}">\n\t\t\t\t\t<button ng-class="{\'manual-pass-not-allowed\': !vm.allowManualPass()}"\n\t\t\t\t\t\t\tclass="btn btn-link"\n\t\t\t\t\t\t\tng-click="vm.dial(vm.lead.destination, $event)"\n\t\t\t\t\t\t\tng-disabled="vm.leadService.leadDialDisabled(vm.lead, vm.outboundService.pendingPreviewDial)">\n\t\t\t\t\t\t{{ vm.lead.destination | FormatEmptyValue | phoneFormat}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="phone" ng-if="vm.isHistoryView">\n\t\t\t\t\t<button class="btn btn-link call-history"\n\t\t\t\t\t\t\tng-click="vm.manualOutDial(vm.callHistoryObj.destination, $event)"\n\t\t\t\t\t\t\tng-disabled="vm.manualOutDialDisabled(vm.outboundService.pendingPreviewDial) || !vm.agentPermissions.allowHistoricalDialing"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{{ vm.callHistoryObj.destination | FormatEmptyValue | phoneFormat}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="simple-group row" ng-if="vm.showCallInfo()">\n\t\t\t\t<div class="heading">\n\t\t\t\t\t<span translate="CURRENT_CALL.CALL_INFO"></span>\n\t\t\t\t\t<span class="section-right call-type-block" ng-class="{outbound: vm.callInfo.callType !== \'INBOUND\', inbound: vm.callInfo.callType === \'INBOUND\'}">\n\t\t\t\t\t\t<i class="material-icons call-icon">call</i>\n\t\t\t\t\t\t<i class="material-icons call-arrow-icon">{{ vm.callInfo.callType !== \'INBOUND\' ? \'call_made\' : \'call_received\' }}</i>\n\t\t\t\t\t\t<span class="call-type">\n\t\t\t\t\t\t\t{{ vm.callInfo.callType }}\n\t\t\t\t\t\t\t{{ vm.callInfo.duration | hhMmSs }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<hr class="hr-heading-margin">\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-list">\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.callState)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.CALL_STATE"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ vm.callInfo.callState }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.dnis)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.DNIS"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ vm.callInfo.dnis | phoneFormat }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.uii)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.CALL_ID"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ vm.callInfo.uii }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.queueDts)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.CALL_TIME"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ ::vm.callInfo.queueDts | serverTimeToLocal | momentDate:vm.passDtsDateFormat}}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.termParty)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.TERM_PARTY"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ vm.callInfo.termParty }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.termReason)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.REASON"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">{{ vm.callInfo.termReason }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group" ng-if="vm.showValue(vm.callInfo.voicemailUrl)">\n\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.VOICEMAIL_URL"></label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span class="value">\n\t\t\t\t\t\t\t\t<audio-player src="vm.callInfo.voicemailUrl"></audio-player>\n\t\t\t\t\t\t\t</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="simple-group row" ng-if="vm.lead.leadId">\n\t\t\t\t<div class="heading">\n\t\t\t\t\t<span translate="LEAD_DETAIL.TITLE"></span>\n\t\t\t\t\t\t<span ng-if="!vm.editLeadDisabled()">\n\t\t\t\t\t\t\t<button class="btn btn-link" ng-click="vm.editLead()">\n\t\t\t\t\t\t\t\t<i class="material-icons edit-lead">edit</i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<hr class="hr-heading-margin">\n\t\t\t\t</div>\n\n\t\t\t\t<div class="detail-list">\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group aux" ng-class="{\'recording-height\': list.isRecording === true}" ng-if="list.showValue" ng-repeat="list in vm.left">\n\t\t\t\t\t\t\t<div class="col-md-4"><label>{{ list.label }}</label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span ng-if="list.isRecording" class="value">\n\t\t\t\t\t\t\t\t\t<audio-player src="list.value"></audio-player>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="!list.isRecording" class="value">{{ list.value }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<div class="detail-group aux" ng-if="list.showValue" ng-repeat="list in vm.right">\n\t\t\t\t\t\t\t<div class="col-md-4"><label>{{ list.label }}</label></div>\n\t\t\t\t\t\t\t<div class="col-md-8"><span ng-if="list.isRecording" class="value">\n\t\t\t\t\t\t\t\t\t<audio-player src="list.value"></audio-player>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="!list.isRecording" class="value">{{ list.value }}</span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="simple-group row" ng-if="vm.agentPermissions.showLeadHistory && vm.lead.leadId">\n\t\t\t\t<div class="heading">\n\t\t\t\t\t<span translate="CURRENT_CALL.HISTORY.TITLE"></span>\n\t\t\t\t\t<button class="btn btn-link history-btn" ng-click="vm.getHistory()">\n\t\t\t\t\t\t{{ vm.leadHistory.length > 0 ? "CURRENT_CALL.HISTORY.REFRESH" : "CURRENT_CALL.HISTORY.SHOW_HISTORY" | translate }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<hr class="hr-heading-margin">\n\t\t\t\t</div>\n\t\t\t\t\t<div class="history-wrapper" ng-repeat="history in vm.leadHistory" ng-if="vm.leadHistory.length > 0">\n\t\t\t\t\t\t<div class="detail-list">\n\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.PASS_NUM"></label></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.passNumber }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.passNumber ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.DATE"></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.passDts | serverTimeToLocal | momentDate:vm.passDtsDateFormat }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.passDts ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.AGENT"></label></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.agentName }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.agentName ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.AGENT_DISP"></label></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.agentDisposition }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.agentDisposition ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.AGENT_NOTES"></label></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.agentNotes }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.agentNotes ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-md-6 extra-margin-bottom">\n\t\t\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t\t\t<div class="col-md-4"><label translate="CURRENT_CALL.HISTORY.SYSTEM_DISP"></label></div>\n\t\t\t\t\t\t\t\t\t<div class="col-md-8">\n\t\t\t\t\t\t\t\t\t\t<span class="value">{{ ::history.passDisposition }}</span>\n\t\t\t\t\t\t\t\t\t\t<span class="value" ng-if="history.passDisposition ===\'\'">-</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<hr class="no-margin custom-history-hr">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t</cf-tab>\n\n\t\t<cf-tab label="{{::\'RIGHT_PANEL.TABS.SCRIPT\' | translate}}"\n\t\t\t\ttab-content="script"\n\t\t\t\tng-if="vm.showCallScriptTab()"\n\t\t\t\tid="scriptSection"\n\t\t\t\tclass="script-section">\n\t\t</cf-tab>\n\n\t\t<cf-tab label="{{::\'RIGHT_PANEL.TABS.SCRIPT\' | translate}}"\n\t\t\t\ttab-content="script"\n\t\t\t\tng-if="vm.showPreviewScriptTab()"\n\t\t\t\tclass="script-section lead-preview-script">\n\n\t\t\t\t<cf-agent-script ng-if="vm.lead.script.script"\n\t\t\t\t\tdata-contact-source="vm.lead.script">\n\t\t\t\t</cf-agent-script>\n\t\t\t</cf-tab>\n\t\t</cf-tabs>\n\t</div>\n</div>\n')}]),angular.module("phone/phone.dialPad.tpl.html",[]).run(["$templateCache",function(a){
a.put("phone/phone.dialPad.tpl.html",'<div class="phone-left phone-left-bg" ng-show="!vm.callService.dialPadHidden">\n\t<h3 class="nav-title title-padding" translate="NAV.PHONE.DIAL"></h3>\n\n\t<div class="scrollable-wrapper dialpad-wrapper-view">\n\t\t<div class="switch-wrapper"\n\t\tng-click="vm.toggleOffHook()"\n\t\tng-if="!vm.callService.onCallOrPendingDisp()">\n\n\t\t\t<span class="title">\n\t\t\t\t<span ng-if="vm.agentService.offhookStatus === \'init\'">{{ ::\'SOFTPHONE.CONNECT\' | translate }}</span>\n\t\t\t\t<span ng-if="vm.agentService.offhookStatus === \'connecting\'">\n\t\t\t\t\t{{ ::\'SOFTPHONE.OFFHOOK_CONNECTING\' | translate }}\n\t\t\t\t\t<span class="loader-icon"><i class="fa fa-circle-o-notch fa-1x fa-pulse loader-icon"></i></span>\n\t\t\t\t</span>\n\t\t\t\t<span ng-if="vm.agentService.offhookStatus === \'connected\'">{{ ::\'SOFTPHONE.CONNECTED\' | translate }}</span>\n\t\t\t\t<span ng-if="vm.agentService.offhookStatus === \'disconnected\'">{{ ::\'SOFTPHONE.DISCONNECTED\' | translate }}</span>\n\t\t\t</span>\n\n\t\t\t<md-switch ng-model="vm.agentService.isOffhook"\n\t\t\taria-label="Toggle Offhook"\n\t\t\tdisabled\n\t\t\tclass="md-primary md-block switch-sm custom-switch"\n\t\t\tng-class="{\'off\':!vm.agentService.isOffhook, \'pending\': vm.agentService.pendingOffhook}">\n\t\t\t</md-switch>\n\t\t</div>\n\n\t\t<div id="accordin-dialpad">\n\t\t\t<div class=\'dialpad-container\'\n\t\t\t\tng-class="{\'hidden\': !(vm.callService.onCallOrPendingDisp() && !vm.callService.agentMonitoring())}">\n\t\t\t\t<div class="phone-detail">\n\t\t\t\t\t<div class="phone-id">{{vm.getLeadName()}}</div>\n\t\t\t\t\t<input type="text" class="phone-number-input"\n\t\t\t\t\t\tng-model="vm.callService.currentCall.lead.leadPhone" phone-number data-pretty-print="true"\n\t\t\t\t\t\taria-label="Dial Destination" readonly />\n\t\t\t\t</div>\n\n\t\t\t\t<div class="dial-icon-wrapper">\n\t\t\t\t\t<div class="dial-icon"\n\t\t\t\t\t\t ng-class="{\'dial-active\': vm.dialButtonState === true}"\n\t\t\t\t\t\t data-toggle="collapse" data-target="#dialPadContainer" aria-expanded="true"\n\t\t\t\t\t\t aria-controls="dialPadContainer" ng-click="vm.dialButtonClick()">\n\t\t\t\t\t\t<i class="icon-dialpad icon-resize-dialpad"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div id="dialPadContainer" class="collapse"\n\t\t\t\tng-class="{\'show-collapseble\': !(vm.callService.onCallOrPendingDisp() && !vm.callService.agentMonitoring())}">\n\t\t\t\t<div class="dial-dest"\n\t\t\t\t\tng-if="vm.agentPermissions.allowManualCalls && !vm.callService.onCallOrPendingDisp()"\n\t\t\t\t\tng-class="{ \'dial-dest-set\': vm.callService.dialPad.dialDest }">\n\t\t\t\t\t<form name="dialDestInput" ng-submit="vm.dialOptions()" autocomplete="off">\n\t\t\t\t\t\t<input type="text" id="dialDest" class="form-control" ng-model="vm.callService.dialPad.dialDest"\n\t\t\t\t\t\t\tphone-number data-pretty-print="true" aria-label="Dial Destination"\n\t\t\t\t\t\t\tplaceholder="{{\'SOFTPHONE.MANUAL_OUTDIAL.DIAL_DEST\' | translate}}" md-autofocus />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if="vm.callService.onCallOrPendingDisp()" class="dial-dest">\n\t\t\t\t\t<form name="dtmfForm" autocomplete="off">\n\t\t\t\t\t\t<input type="text" id="dtmf" class="form-control" ng-model="vm.softphoneService.dtmfString"\n\t\t\t\t\t\t\treadonly data-pretty-print="true" aria-label="Touchtones" placeholder="{{\'SOFTPHONE.MANUAL_OUTDIAL.DTMF_INPUT\' | translate}}"\n\t\t\t\t\t\t\tmd-autofocus />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="dialpad">\n\t\t\t\t\t<div class="keypad"\n\t\t\t\t\t\tng-if="(vm.agentPermissions.allowManualCalls || vm.callService.onCallOrPendingDisp())">\n\t\t\t\t\t\t<div class="keys">\n\t\t\t\t\t\t\t<div class="key-row">\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'1\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">1</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text btn-no-text">&nbsp;</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'2\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">2</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">ABC</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'3\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">3</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">DEF</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="key-row">\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'4\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">4</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">GHI</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'5\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">5</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">JKL</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'6\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">6</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">MNO</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="key-row">\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'7\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">7</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">PQRS</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'8\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">8</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">TUV</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'9\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">9</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text">WXYZ</div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="key-row">\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'*\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num asterisk">*</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text"></div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'0\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">0</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text"></div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="key">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn" ng-click="vm.keypadClick(\'#\')">\n\t\t\t\t\t\t\t\t\t\t<div class="btn-num">#</div>\n\t\t\t\t\t\t\t\t\t\t<div class="btn-text"></div>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="notes" ng-if="vm.callService.allowDisposition()">\n\t\t\t<div class="form-group">\n\t\t\t\t<textarea name="agentNotes" class="form-control" rows="5"\n\t\t\t\t\tplaceholder="{{ ::\'DISPOSITIONS.NOTES_PLACEHOLDER\' | translate }}"\n\t\t\t\t\tng-model="vm.callService.currentCall.disposition.notes"></textarea>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="call-controls" ng-if="vm.callService.onCallOrPendingDisp() && !vm.callService.agentMonitoring()">\n\t\t\t<div class="control align-left" ng-class="{\'active\': vm.requeueOpen, \'disabled\': !(vm.allowRequeue() && vm.onCall())}">\n\t\t\t\t<button class="control-action" ng-disabled="!(vm.allowRequeue() && vm.onCall())"\n\t\t\t\t\tng-click="vm.openRequeue()">\n\t\t\t\t\t<i class="icon-requeue"></i>\n\t\t\t\t</button>\n\t\t\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.REQUEUE"></label>\n\t\t\t</div>\n\n\t\t\t<div class="control" ng-if="!vm.callService.currentCall.xferDest && !vm.callService.currentCall.xferActive"\n\t\t\t\tng-class="{\'active\': vm.transferOpen, \'disabled\': !(vm.allowTransfer() && vm.onCall())}">\n\t\t\t\t<button class="control-action" ng-disabled="!(vm.allowTransfer() && vm.onCall())"\n\t\t\t\t\tng-click="vm.openTransfer()">\n\t\t\t\t\t<i class="icon-transfer"></i>\n\t\t\t\t</button>\n\t\t\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.TRANSFER"></label>\n\t\t\t</div>\n\n\t\t\t<div class="control active" ng-if="vm.callService.currentCall.xferDest">\n\t\t\t\t<div class="circular-progress">\n\t\t\t\t\t<md-progress-circular md-mode="indeterminate" class="md-accent md-hue-1" md-diameter="40">\n\t\t\t\t\t</md-progress-circular>\n\t\t\t\t</div>\n\t\t\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.TRANSFER.DIALING"></label>\n\t\t\t</div>\n\n\t\t\t<div class="control active"\n\t\t\t\tng-if="!vm.callService.currentCall.xferDest && vm.callService.currentCall.xferActive">\n\t\t\t\t<button class="control-action" ng-click="vm.openTransfer()">\n\t\t\t\t\t<i class="cf-icon cf-icon-connected-transfer"></i>\n\t\t\t\t</button>\n\t\t\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.TRANSFER.CONNECTED"></label>\n\t\t\t</div>\n\n\t\t\t<div class="control align-right"\n\t\t\t\tng-class="{\'active\': vm.callService.dispositionOpen, \'disabled\': !vm.callService.allowDisposition()}">\n\t\t\t\t<button class="control-action no-right-padding" ng-disabled="!vm.callService.allowDisposition()"\n\t\t\t\t\tng-click="vm.callService.openDispositionModal()">\n\t\t\t\t\t<i class="icon-disposition"></i>\n\t\t\t\t</button>\n\t\t\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.DISPOSITION"></label>\n\t\t\t</div>\n\n\t\t\t<div class="control align-left"\n\t\t\t\tng-class="{\'active\': vm.callService.currentCall.onHold || vm.transferSessionOnHold(), \'disabled\': !(vm.allowHold() && vm.onCall())}">\n\t\t\t\t<button class="control-action" ng-disabled="!(vm.allowHold() && vm.onCall())"\n\t\t\t\t\tng-click="vm.toggleHoldOrOpenHoldModal()">\n\t\t\t\t\t<i class="icon-hold"></i>\n\t\t\t\t</button>\n\t\t\t\t<label>\n\t\t\t\t\t{{ vm.callService.currentCall.onHold ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD_RESUME\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD\' | translate }}\n\t\t\t\t</label>\n\t\t\t</div>\n\n\t\t\t<div class="control"\n\t\t\t\tng-class="{\'active\': vm.softphoneService.muteActive, \'disabled\': !(vm.isIntegratedSoftphone && vm.allowMute() && vm.onCall())}">\n\t\t\t\t<button class="control-action"\n\t\t\t\t\tng-disabled="!(vm.isIntegratedSoftphone && vm.allowMute() && vm.onCall())"\n\t\t\t\t\tng-click="vm.softphoneService.sipToggleMute()">\n\t\t\t\t\t\x3c!-- <i ng-if="vm.softphoneService.muteActive === false" class="material-icons">mic</i>\n\t\t\t\t\t<i ng-if="vm.softphoneService.muteActive" class="material-icons">mic_off</i> --\x3e\n\t\t\t\t\t<i class="icon-mute"></i>\n\t\t\t\t</button>\n\t\t\t\t<label>\n\t\t\t\t\t{{ vm.softphoneService.muteActive ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_MUTE_OFF\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_MUTE\' | translate }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="control align-right"\n\t\t\t\tng-class="{\'active\': vm.callService.currentCall.isRecording, \'disabled\': !(vm.allowRecord() && vm.onCall()), \'pause\': vm.callService.currentCall.recordingPaused}">\n\t\t\t\t<button class="control-action" ng-disabled="!(vm.allowRecord() && vm.onCall())"\n\t\t\t\t\tng-click="vm.toggleRecord()"\n\t\t\t\t\tuib-popover="{{vm.setToolTip()}}" \n\t\t\t\t\tpopover-trigger="\'mouseenter\'" \n\t\t\t\t\tpopover-append-to-body=\'true\'\n\t\t\t\t\tpopover-placement= "right" \n\t\t\t\t\tpopover-enable = "{{vm.callService.currentCall.agentRecording.pause !== \'\'}}"\n\t\t\t\t\tpopover-class= \'custom-popover-class\'>\n\t\t\t\t\t<i ng-show="!vm.callService.currentCall.recordingPaused" class="icon-record"></i>\n\t\t\t\t\t<label ng-show="vm.callService.currentCall.recordingPaused"> {{vm.callService.pauseDisplay}} </label>\n\t\t\t\t</button>\n\n\t\t\t\t<label>\n\t\t\t\t\t\t{{ vm.callService.currentCall.recordingPaused ? \'SOFTPHONE.CALL_CONTROL_HELP.PAUSED\'\n\t\t\t\t\t\t\t: (vm.callService.currentCall.isRecording ? \'SOFTPHONE.CALL_CONTROL_HELP.RECORDING\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_RECORDING\') | translate  }}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="action-btn full-width-btn" ng-if="vm.agentPermissions.allowManualCalls || vm.callService.onCall === true">\n\t\t\t<button class="btn btn-lg custom dial-button" ng-class="vm.getDialClass()" ng-disabled="vm.dialDisabled()"\n\t\t\t\tng-class= "{\'icon-rotation\': vm.callService.onCall === true}"\n\t\t\t\tng-click="vm.dialOptions()">\n\t\t\t\t<i class="material-icons">phone</i>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class="manual-setting-wrapper" ng-if="!vm.agentService.manualDialButtonState">\n\t\t\t<div id="manual-setting-accordian"\n\t\t\t\tng-if="!vm.callService.onCallOrPendingDisp() && vm.agentPermissions.allowManualCalls">\n\t\t\t\t<div class="manual-setting-button msb-up-btn" ng-click="vm.manualDialClick()">\n\t\t\t\t\t{{::"SOFTPHONE.MANUAL_OUTDIAL.MANUAL_DIAL_SETTING" | translate}}\n\t\t\t\t</div>\n\t\t\t\t<div class="manual-setting-form">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.CALLER_ID"></label>\n\t\t\t\t\t\t<ui-select ng-model="vm.callService.dialPad.callerId" theme="bootstrap" sortable="true"\n\t\t\t\t\t\t\tappend-to-body="true">\n\t\t\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t\t{{$select.selected.description}}</ui-select-match>\n\t\t\t\t\t\t\t<ui-select-choices repeat="id.number as id in vm.callerIds | filter: $select.search">\n\t\t\t\t\t\t\t\t<div ng-bind-html="id.description | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t<small ng-if="id.description != \'Default\'">\n\t\t\t\t\t\t\t\t\t{{::"SOFTPHONE.MANUAL_OUTDIAL.NUMBER" | translate}}: <span\n\t\t\t\t\t\t\t\t\t\tng-bind-html="\'\'+id.number | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="form-group" ng-if="vm.agentPermissions.allowManualOutboundGates">\n\t\t\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.QUEUE"></label>\n\t\t\t\t\t\t<ui-select ng-model="vm.callService.dialPad.queueId" theme="bootstrap" sortable="true"\n\t\t\t\t\t\t\tappend-to-body="true">\n\t\t\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t\t{{$select.selected.gateName}}</ui-select-match>\n\t\t\t\t\t\t\t<ui-select-choices repeat="queue.gateId as queue in vm.availQueues | filter: $select.search">\n\t\t\t\t\t\t\t\t<div ng-bind-html="queue.gateName | highlight: $select.search"></div>\n\t\t\t\t\t\t\t\t<small ng-if="queue.gateName != \'Default\'">\n\t\t\t\t\t\t\t\t\t{{::"SOFTPHONE.MANUAL_OUTDIAL.QUEUE_ID" | translate}}: <span\n\t\t\t\t\t\t\t\t\t\tng-bind-html="\'\'+queue.gateId | highlight: $select.search"></span>\n\t\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="form-group" ng-if="vm.agentPermissions.allowManualIntlCalls">\n\t\t\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.COUNTRY"></label>\n\t\t\t\t\t\t<ui-select ng-model="vm.callService.dialPad.countryId" theme="bootstrap" sortable="true"\n\t\t\t\t\t\t\tappend-to-body="true">\n\t\t\t\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t\t\t\t\t\t\t{{$select.selected.countryName}} ({{$select.selected.countryId}})</ui-select-match>\n\t\t\t\t\t\t\t<ui-select-choices repeat="c.countryId as c in vm.availCountries | filter: $select.search">\n\t\t\t\t\t\t\t\t<div ng-bind-html="c.countryName | highlight: $select.search"></div>\n\t\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t\t</ui-select>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label translate="SOFTPHONE.MANUAL_OUTDIAL.RING_TIME"></label>\n\t\t\t\t\t\t<input type="number" class="form-control" ng-model="vm.callService.dialPad.ringTime" min="20"\n\t\t\t\t\t\t\tmax="120" required />\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n\n\t<div class="manual-setting-button"\n\t\tng-if="vm.agentPermissions.allowManualCalls"\n\t\tng-class="{\'hidden-div\': vm.agentService.manualDialButtonState === false || (vm.callService.onCallOrPendingDisp() && !vm.callService.agentMonitoring())}"\n\t\tng-click="vm.manualDialClick()">\n\t\t{{::"SOFTPHONE.MANUAL_OUTDIAL.MANUAL_DIAL_SETTING" | translate}}\n\t</div>\n\n\t<transfer-sessions-control></transfer-sessions-control>\n</div>\n')}]),angular.module("phone/phone.nav.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/phone.nav.tpl.html",'<div class="nav-body" ng-hide="vm.callService.isChatView">\n\t<div class="menu-state nav-body-show-hide unselectable" ng-show="vm.agentService.openMenuState">\n\t\t\x3c!-- Default buttons --\x3e\t\n\t\t<div class="section"\n\t\t\t\tng-repeat="section in ::vm.navSections">\n\t\t\t<div ng-class="{\'active-sub-section\' : vm.agentService.openMenuState}" class="sub-section" ng-click="vm.toggleSection(section.url)" \n\t\t\t\t\tui-sref="{{ ::section.url }}" \n\t\t\t\t\tui-sref-active="active" uib-popover="{{ ::section.tooltip }}" popover-trigger="\'mouseenter\'" popover-placement= "right"\n\t\t\t\t\t\tpopover-class= \'custom-popover-class\' popover-enable= "{{!vm.agentService.openMenuState || section.alwaysShowTooltip}}">\n\t\t\t\t<i ng-if="!section.altIcon" class="material-icons">\n\t\t\t\t\t{{ ::section.icon }}\n\t\t\t\t</i>\n\t\t\n\t\t\t\t<i ng-if="section.altIcon" class="{{ ::section.icon }}"></i>\n\t\t\t\t<span class="menu-label" ng-if="vm.agentService.openMenuState">{{ ::section.label }}</span>\n\t\t\t</div>\n\t\t</div>\n\t\t\x3c!-- More buttons Accordian --\x3e\t\n\t\t<div id="accordion-elem">\n\t\t\t<div id="buttonContainer" class="collapse" ng-class="{\'in\': vm.agentService.moreButtonState}">\n\t\t\t\t<div class="section" ng-repeat="section in ::vm.navMoreSections">\n\t\t\t\t\t<div class="sub-section" ng-class="{\'active-sub-section\' : vm.agentService.openMenuState}" ng-click="vm.toggleSection(section.url)" \n\t\t\t\t\t\t\tui-sref="{{ ::section.url }}" \n\t\t\t\t\t\t\tui-sref-active="active" uib-popover="{{ ::section.tooltip }}" popover-trigger="\'mouseenter\'" popover-placement= "right"\n\t\t\t\t\t\t\t\tpopover-class= \'custom-popover-class\' popover-enable= "{{!vm.agentService.openMenuState || section.alwaysShowTooltip}}">\n\t\t\t\t\t\t<i ng-if="!section.altIcon" class="material-icons">\n\t\t\t\t\t\t\t{{ ::section.icon }}\n\t\t\t\t\t\t</i>\n\t\t\t\t\n\t\t\t\t\t\t<i ng-if="section.altIcon" class="{{ ::section.icon }} "></i>\n\t\t\t\t\t\t<span class="menu-label" ng-if="vm.agentService.openMenuState">{{ ::section.label }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="section">\n\t\t\t\t<div class="sub-section" ng-class="{\'active-sub-section\' : vm.agentService.openMenuState}"\n\t\t\t\t\tdata-toggle="collapse" data-target="#buttonContainer" aria-expanded="true" aria-controls="buttonContainer" ng-click="vm.moreButtonClick()"\n\t\t\t\t\tuib-popover="{{vm.moreButtonTooltip}}" popover-trigger="\'mouseenter\'" popover-placement= "right" popover-class= \'custom-popover-class\' popover-enable= "{{!vm.agentService.openMenuState || section.alwaysShowTooltip}}">\n\t\t\t\t\t<i ng-class="vm.buttonIcon"></i>\n\t\t\t\t\t<span class="menu-label" ng-if="vm.agentService.openMenuState">{{ vm.morebuttonLabel }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t</div>\n\t\n\t\t\x3c!-- Button Break --\x3e\n\t\t<div class="menu-button-seperator" ng-if="vm.agentService.isSupervisor()"></div>\n\t\n\t\t\x3c!-- Supervisor Menu Button --\x3e\n\t\t<div class="section" ng-if="vm.agentService.isSupervisor()">\n\t\t\t<div class="sub-section" ng-class="{\'active-sub-section\' : vm.agentService.openMenuState, active: vm.state.current.url.indexOf(\'agents\') !== -1}"\n\t\t\t\t ng-click="vm.toggleSection(\'base.default.monitoring\')"\n\t\t\t\t ui-sref="base.default.monitoring"\n\t\t\t\t uib-popover="{{::\'PHONE.TOOLTIP.SUPERVISOR\' | translate}}"\n\t\t\t\t popover-trigger="\'mouseenter\'"\n\t\t\t\t popover-placement= "right"\n\t\t\t\t popover-class= \'custom-popover-class\'\n\t\t\t\t popover-enable= "{{!vm.agentService.openMenuState || section.alwaysShowTooltip}}">\n\t\t\t\t<i class="icon-supervisor"></i>\n\t\t\t\t<span class="menu-label" ng-if="vm.agentService.openMenuState">{{::\'PHONE.MENU_BUTTON_LABEL.SUPERVISOR\' | translate}}</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- Agent stat detail button --\x3e\n\t\t<div class="section" ng-if="vm.agentService.isSupervisor()">\n\t\t\t<div class="sub-section"\n\t\t\t\t ng-if="vm.monitorService.selectedAgent.agentId"\n\t\t\t\t ng-click="vm.toggleSection(\'base.default.monitoring.agent\')"\n\t\t\t\t ui-sref="base.default.monitoring.agent({agentId: vm.monitorService.selectedAgent.agentId})"\n\t\t\t\t ng-class="{\'active-sub-section\' : vm.agentService.openMenuState, active: vm.state.current.url.indexOf(\'agentId\') !== -1}"\n\t\t\t\t uib-popover="{{ ::\'PHONE.TOOLTIP.AGENT_DETAILS\' | translate }}"\n\t\t\t\t popover-trigger="\'mouseenter\'"\n\t\t\t\t popover-placement= "right"\n\t\t\t\t popover-class= \'custom-popover-class\'\n\t\t\t\t popover-enable= "{{!vm.agentService.openMenuState || section.alwaysShowTooltip}}">\n\t\t\t\t<i class="icon-information"></i>\n\t\t\t\t<span class="menu-label" ng-if="vm.agentService.openMenuState">{{::\'PHONE.MENU_BUTTON_LABEL.AGENT_DETAILS\' | translate}}</span>\n\t\t\t</div>\n\t\t</div>\n\t\n\t\t\x3c!-- Chat Menu Button --\x3e\n\t\t<div class="chat-section" ng-if="vm.agentService.agentPermissions.allowChat">\n\t\t\t<div class="chat-sub-section" \n\t\t\t\tng-click="vm.switchChat()" \n\t\t\t\tui-sref="base.default.chat" \n\t\t\t\tui-sref-active="active"\n\t\t\t\tuib-popover="{{::\'PHONE.TOOLTIP.CHAT\' | translate}}" \n\t\t\t\tpopover-trigger="\'mouseenter\'" \n\t\t\t\tpopover-placement= "right" \n\t\t\t\tpopover-class= \'custom-popover-class\'>\n\n\t\t\t\t<span class="badge info" ng-if="vm.chatService.getTotalUnreadMsgs() > 0;">{{ vm.chatService.getTotalUnreadMsgs() }}</span>\n\t\t\t\t<i class="icon-chat-switcher"> </i>\n\t\t\t</div>\n\t\t</div>\n\t\n\t</div>\n</div>\n')}]),angular.module("phone/phone.previewLeads.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/phone.previewLeads.tpl.html",'<div class="lead-preview-wrapper"\n     ng-class="{\'pacing\': outboundService.isHciPacing()}">\n\n\t<form name="searchForm" role="form" class="lead-filter-form">\n\t\t\n\n\t\t<div class="scrollable-wrapper list-padding">\n\t\t\t<div class="lead-button filter-padding underline"\n\t\t\t\t ng-if="agentPermissions.allowPreviewLeadFilters && !outboundService.isHciPacing() && !agentPermissions.progressiveEnabled"\n\t\t\t\t ng-click="toggleSearchFields()">\n\t\t\t\t<span class="filter-label">{{ showSearchFields() ? \'PHONE.PREVIEW.HIDE_FILTERS\' : \'PHONE.PREVIEW.SHOW_FILTERS\' | translate }}</span>\n\t\t\t\t<div class="filter-button">\n\t\t\t\t\t<i class="filter-arrow material-icons">unfold_more</i>\n\t\t\t\t</div>\n\t\t\t\t<div class="clear"></div>\n\t\t\t</div>\n\t\t\t<div class="filter-pill-padding" ng-if="!isEmpty(searchFields)">\n\t\t\t\t<div class="filter-display">\n\t\t\t\t\t<div class="filter-pill" ng-repeat="(key, value) in searchFields" ng-if="value != \'\'" ng-click="toggleSearchFields()">\n\t\t\t\t\t\t{{ value }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="mcontainer">\n\t\t\t\t<search-fields class="search-field-padding"></search-fields>\n\t\t\t\t<div ng-if="showSearchFields()" class="lead-button full-width-btn section-padding">\n\t\t\t\t\t<button class="btn btn-link" type="button" ng-click="clearFilters()">\n\t\t\t\t\t\t{{ ::\'PHONE.PREVIEW.RESET_FORM\' | translate}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<h4 class="fetch-msg no-margin" ng-if="getNoLeadsMsg()!==\'\'">\n\t\t\t\t\t{{ getNoLeadsMsg() | translate}}\n\t\t\t\t</h4>\n\t\n\t\t\t\t<lead-list></lead-list>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="btn-container">\n\t\t\t<div ng-if="!agentPermissions.progressiveEnabled && !outboundService.isHciPacing()" class="full-width-btn">\n\t\t\t\t<button ng-disabled="searchForm.$invalid || fetchDisabled()"\n\t\t\t\t\t\tclass="btn btn-secondary btn-lg custom fetch-button"\n\t\t\t\t\t\ttype="submit" ng-click="fetchLeads()">\n\t\t\t\t\t{{ fetchBtnLabel | translate }}\n\t\t\t\t</button>\n\t\t\t </div>\n\t\t\t \n\t\t\t <div ng-if="agentPermissions.progressiveEnabled">\n\t\t\t\t<div class="dialer-container">\n\t\t\t\t\t<button ng-disabled="disableProgressiveButton()"\n\t\t\t\t\t\tclass="btn btn-lg custom start-dail-button"\n\t\t\t\t\t\tng-class="{\'btn-danger\': progressiveDialService.progressiveDialRunning, \'btn-secondary\': !progressiveDialService.progressiveDialRunning}"\n\t\t\t\t\t\tng-click="toggleProgressive()">\n\t\t\t\t\t\t\t{{ progressiveDialService.progressiveDialRunning ? \'PHONE.PREVIEW.STOP_PROGRESSIVE\' : \'PHONE.PREVIEW.START_PROGRESSIVE\' | translate}}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div  class="timer-container">\n\t\t\t\t\t<button class="btn-timer timer" ng-class="{\'running\': progressiveDialService.secondsUntilNextCall > 0}">\n\t\t\t\t\t\t<span> {{ progressiveDialService.secondsUntilNextCall }} </span>\n\t\t\t\t\t\t<i ng-if="progressiveDialService.secondsUntilNextCall == null" class="material-icons">timer</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t </div>\n\t\t\t \t\n\t\t\t<div class="keyboard-shortcut">\n\t\t\t\t<button class="btn btn-link keyboard-shortcut"\n\t\t\t\t\t\tuib-popover="{{\'PHONE.PREVIEW.KEYBOARD_SHORTCUT\' | translate}}"\n\t\t\t\t\t\tpopover-trigger="\'mouseenter\'"\n\t\t\t\t\t\tng-click="toggleCheatSheet()">\n\t\t\t\t\t<span translate="PHONE.PREVIEW.KEYBOARD_SHORTCUT.LABEL"></span>\n\t\t\t\t</button>\n\t\n\t\t\t\t<div class="clear"></div>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>\n\n')}]),angular.module("phone/scheduledCallbacks/scheduledCallbacks.tpl.html",[]).run(["$templateCache",function(a){a.put("phone/scheduledCallbacks/scheduledCallbacks.tpl.html",'<div class="card-wrapper-config">\n\t<div class="lead-management">\n\t    <div class="lead-search-wrapper">\n\t        <div class="lead-search container">\n\t\t        <div class="card-wrapper">\n\t\t            <div class="title" translate="PHONE.CALLBACKS.CURRENT_TITLE"></div>\n\t\t\t        <md-card>\n\t\t\t\t        <md-card-content>\n\t\t\t\t            <callbacks-table callbacks="outboundService.agentCallbacks" data-type="CURRENT-CALLBACK"></callbacks-table>\n\t\t\t\t        </md-card-content>\n\t\t\t        </md-card>\n\t\t        </div>\n\n\t\t        <div class="card-wrapper">\n\t                <div class="title" translate="PHONE.CALLBACKS.FUTURE_TITLE"></div>\n\t\t\t        <md-card>\n\t\t\t\t        <md-card-content>\n                            <callbacks-table callbacks="outboundService.futureCallbacks" data-type="FUTURE-CALLBACK"></callbacks-table>\n\t\t\t\t        </md-card-content>\n\t\t\t        </md-card>\n\t\t        </div>\n\t\t    </div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("scoreboard/products/statList.tpl.html",[]).run(["$templateCache",function(a){a.put("scoreboard/products/statList.tpl.html",'<div class="scores">\n\t<div class="score" ng-repeat="(key, value) in scores">\n'+"\t\t<label>{{ ::'STATS.' + type + '.' + key | uppercase | translate }}</label>\n\t\t<span>{{ value }}</span>\n\t</div>\n</div>\n")}]),angular.module("scoreboard/scoreboard.tpl.html",[]).run(["$templateCache",function(a){a.put("scoreboard/scoreboard.tpl.html",'<div class="scoreboard-row">\n\t<div class="stats-menu"\n\t\t ng-class="{dropup: !vm.sessionService.scoreboardExpanded, \'dropdown\': vm.sessionService.scoreboardExpanded}">\n\t\t<button class="btn dropdown-toggle" type="button" data-toggle="dropdown">\n\t\t\t<span>\n\t\t\t\t{{\'STATS.\' + vm.selectedType.toUpperCase() | translate }}\n\t\t\t</span>\n\t\t\t<i class="material-icons">{{ vm.sessionService.scoreboardExpanded ? \'keyboard_arrow_down\' : \'keyboard_arrow_up\' }}</i>\n\t\t</button>\n\t\t<ul class="dropdown-menu">\n\t\t\t<li ng-repeat="product in vm.products | orderBy:product">\n\t\t\t\t<a class="clickable"\n\t\t\t\t   id="{{product}}"\n\t\t\t\t   ng-click="vm.selectedType = product">{{\'STATS.\' + product.toUpperCase() | translate}}</a>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n\t<div class="scores">\n\t\t<div class="product-scores" ng-if="!vm.sessionService.scoreboardExpanded">\n\t\t\t<div class="product" ng-if="vm.selectedType == \'stats_queue\' && vm.allowQueueStats">\n\t\t\t\t<inbound-stats></inbound-stats>\n\t\t\t</div>\n\t\t\t<div class="product" ng-if="vm.selectedType == \'stats_campaign\' && vm.allowCampaignStats">\n\t\t\t\t<outbound-stats></outbound-stats>\n\t\t\t</div>\n\t\t\t<div class="product" ng-if="vm.selectedType == \'stats_chat_queue\' && vm.allowChatStats">\n\t\t\t\t<chat-stats></chat-stats>\n\t\t\t</div>\n\t\t\t<div class="product" ng-if="vm.selectedType == \'stats_agent\' && vm.allowAgentStats">\n\t\t\t\t<agent-stats></agent-stats>\n\t\t\t</div>\n\t\t\t<div class="product" ng-if="vm.selectedType == \'stats_agent_daily\'">\n\t\t\t\t<agent-daily-stats></agent-daily-stats>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div ng-if="vm.sessionService.scoreboardExpanded">\n\t\t\t<div></div>\n\t\t</div>\n\t</div>\n\n\t<div class="configure">\n\t\t<div class="btn-group">\n\t\t\t<button md-ink-ripple class="btn btn-default" ng-click="vm.isPaused = !vm.isPaused" ng-if="vm.sessionService.scoreboardExpanded">\n\t\t\t\t<i class="material-icons btn-icon">\n\t\t\t\t\t{{ vm.isPaused ? \'play_arrow\' : \'pause\' }}\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t\t<button md-ink-ripple class="btn btn-default" ng-click="vm.toggleView()" ng-if="vm.sessionService.scoreboardExpanded && !vm.hideChart()">\n\t\t\t\t<i class="material-icons btn-icon">\n\t\t\t\t\t{{ vm.isTableView() ? \'timeline\' : \'view_module\' }}\n\t\t\t\t</i>\n\t\t\t</button>\n\t\t\t<button md-ink-ripple class="btn btn-default"\n\t\t\t        ng-click="vm.sessionService.scoreboardExpanded = !vm.sessionService.scoreboardExpanded"\n\t\t\t        ng-disabled="vm.statsTypeDisabled();">\n\n\t\t\t\t<i class="material-icons btn-icon">{{ vm.sessionService.scoreboardExpanded ? \'close\': \'toc\' }}</i>\n\t\t\t\t{{ vm.sessionService.scoreboardExpanded ? \'STATS.METRICS.CLOSE\' : \'STATS.METRICS.OPEN\'  | translate }}\n\t\t\t</button>\n\t\t</div>\n\n\t</div>\n</div>\n\n<div ng-if="vm.sessionService.scoreboardExpanded">\n\t<product-detail-control stat-type="vm.selectedType" paused="vm.isPaused" widget-view="vm.widgetView"></product-detail-control>\n</div>\n')}]),angular.module("scoreboard/shared/productDetail.tableAndChart.tpl.html",[]).run(["$templateCache",function(a){a.put("scoreboard/shared/productDetail.tableAndChart.tpl.html",'<div class="rtr-wrapper">\n\t<div ng-if="isTableView()" ui-grid="gridOptions" ui-grid-resize-columns ui-grid-pinning class="grid"></div>\n\t<div ng-if="isLineChartView()">\n\t\t<line-chart></line-chart>\n\t</div>\n</div>\n')}]),angular.module("scoreboard/shared/productDetailControl.tpl.html",[]).run(["$templateCache",function(a){a.put("scoreboard/shared/productDetailControl.tpl.html",'<div class="product-detail-control">\n\t\x3c!-- stats ng-switch appended here --\x3e\n</div>\n')}]),angular.module("scripts/scripts.detail.tpl.html",[]).run(["$templateCache",function(a){a.put("scripts/scripts.detail.tpl.html",'<div class="script-preview" ng-if="vm.previewContact">\n\t<cf-agent-script data-contact-source="vm.previewContact"></cf-agent-script>\n</div>\n')}]),
angular.module("scripts/scripts.list.tpl.html",[]).run(["$templateCache",function(a){a.put("scripts/scripts.list.tpl.html",'<div class="cf-scripts-left">\n\t<div id="scriptLeftMenu">\n\t\t<h3 class="nav-title" translate="SCRIPT.TITLE"></h3>\n\t\t<div class="script-block">\n\t\t\t<div class="internal-block">\n\t\t\t\t<div class="md-1-line script-item"\n\t\t\t\t              ui-sref="base.default.scripts.detail({scriptId:\'{{script.scriptId}}\'})"\n\t\t\t\t              ui-sref-active="active"\n\t\t\t\t              ng-repeat="script in vm.scripts"\n\t\t\t\t\t\t\t  ng-class="{\'script-selected\': vm.selectedScript.scriptId === script.scriptId }"\n\t\t\t\t\t\t\t  ng-click= "vm.selectedScript = script">\n\t\t\t\t\t<div class="md-list-item-text" >\n\t\t\t\t\t\t<div class="script-title">\n\t\t\t\t\t\t\t{{ script.scriptName }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-if= "vm.scripts.length === 0"\n\t\t\t\t\tclass="no-scripts"\n\t\t\t\t\ttranslate="SCRIPT.NO_ACTIVE_SCRIPTS">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("stats/metrics/metrics.tpl.html",[]).run(["$templateCache",function(a){a.put("stats/metrics/metrics.tpl.html",'<div class="dashboard-wrapper card-wrapper-config">\n\t<ui-select ng-model="vm.dashboardService.selectedType" theme="bootstrap" title="Select a dashboard type" class="dashboard-type-selector" on-select="vm.updateMetrics()">\n\t\t<ui-select-match placeholder="">\n\t\t\t{{ \'DASHBOARD.TYPES.\' + $select.selected | uppercase | translate  }}\n\t\t</ui-select-match>\n\t\t<ui-select-choices repeat="type in vm.dashboardTypes | orderBy:type | filter: $select.search">\n\t\t\t<div ng-bind-html="(\'DASHBOARD.TYPES.\' + type) | uppercase | translate | highlight: $select.search"></div>\n\t\t</ui-select-choices>\n\t</ui-select>\n\t<div class="clear"></div>\n\n\t<div ng-repeat="metric in vm.metrics track by $index | orderBy:\'order\'" class="card-wrapper stat-wrapper">\n\t\t<div class="title">\n\t\t\t<span>\n\t\t\t\t{{ vm.metrics.length > 1 ? \'DASHBOARD.TYPES.STATS.\' + metric.type : \'DASHBOARD.TYPES.STATS\' | uppercase | translate }}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="stats">\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[0]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[1]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[2]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[3]"></big-number>\n\t\t</div>\n\n\t\t<div ng-if="metric.type === vm.statsEvents.AGENT_DAILY" class="stats">\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[4]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[5]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[6]"></big-number>\n\t\t\t<big-number source="metric.type" options="metric.stats.availableData" selected="metric.stats.defaults[7]"></big-number>\n\t\t</div>\n\t</div>\n\n\t<div ng-repeat="metric in vm.metrics track by $index | orderBy:\'order\'" class="card-wrapper details"\n\t     ng-if="!metric.detail.disable"\n\t     ng-mouseleave="metric.detail.showOptions = false;"\n\t     ng-mouseover="metric.detail.showOptions = true;">\n\t\t<div class="title">\n\t\t\t<span>\n\t\t\t\t{{ \'DASHBOARD.TYPES.STATS.\' + metric.type + \'.DETAIL\' | uppercase | translate }}\n\t\t\t</span>\n\n\t\t\t<div class="btn-group" role="group" ng-class="{\'show-options\': metric.detail.showOptions}">\n\t\t\t\t\x3c!--\n\t\t\t\t<button type="button" class="btn btn-default" md-ink-ripple\n\t\t\t\t        ng-click="vm.pauseDetail($event, metric);" >\n\t\t\t\t\t<i class="material-icons">{{ metric.detail.paused ? \'play_arrow\' : \'pause\' }}</i>\n\t\t\t\t</button>\n\t\t\t\t--\x3e\n\t\t\t\t<button type="button" class="btn btn-default" md-ink-ripple\n\t\t\t\t        ng-click="vm.changeDetailView($event, metric);">\n\t\t\t\t\t<i class="material-icons">{{ metric.detail.view === vm.rtrWidgetViews.TABLE ? \'show_chart\' : \'view_module\' }}</i>\n\t\t\t\t</button>\n\n\t\t\t\t<button type="button" class="btn btn-default" md-ink-ripple\n\t\t\t\t        ng-if="metric.detail.view === vm.rtrWidgetViews.TABLE"\n\t\t\t\t        ng-click="vm.showMetricConfig($event, metric);" >\n\t\t\t\t\t<i class="material-icons">{{ \'settings\' }}</i>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<md-card class="no-margin">\n\t\t\t<md-card-content>\n\t\t\t\t<product-detail-control\n\t\t\t\t\t\tstat-type="metric.type"\n\t\t\t\t\t\tpaused="metric.detail.paused"\n\t\t\t\t\t\twidget-view="metric.detail.view">\n\t\t\t\t</product-detail-control>\n\t\t\t</md-card-content>\n\t\t</md-card>\n\t</div>\n</div>\n')}]),angular.module("statusbar/statusbar.tpl.html",[]).run(["$templateCache",function(a){a.put("statusbar/statusbar.tpl.html",'<div class="statusbar unselectable" ng-if="vm.sessionService.attemptingSoftphoneReconnect"> \x3c!--&& vm.softphoneService.autoStartOH--\x3e\n\t<div class="status-msg">\n\t\t{{vm.sessionService.getStatusMessage()}}\n\n\t\t<a class="status-link"\n\t\t   ng-if="vm.sessionService.manualSoftphoneReconnect"\n\t\t   ng-click="vm.tryReconnect()">\n\t\t\t{{ ::"GENERICS.MESSAGES.OFFHOOK_RECONNECT_TRY_AGAIN_MSG" | translate }}\n\t\t</a>\n\t</div>\n</div>\n')}]),angular.module("testHarness/testHarness.tpl.html",[]).run(["$templateCache",function(a){a.put("testHarness/testHarness.tpl.html",'<div class="container">\n    <form name="testHarness" id="testHarness" role="form" novalidate>\n        <div class="form-group row">\n            <label class="col-md-2 col-form-label" for="authDest">Engage-Auth Destination:</label>\n            <div class="col-md-8">\n                <input class="form-control" id="authDest" ng-model="vm.props.authDest">\n            </div>\n            <div class="col-md-2">\n                <button class="btn btn-success" ng-click="vm.initializeLibrary()">Initialize AgentSDK</button>\n            </div>\n        </div>\n\n        <div class="form-group">\n            <md-checkbox class="md-primary" ng-model="vm.props.isSecureSocket" aria-label="Secure Socket?">\n                Use Secure Socket (wss://)?\n            </md-checkbox>\n        </div>\n\n        <div ng-if="isInitialized">\n            <div class="form-group row">\n                <label class="col-md-2 col-form-label">Library Method: </label>\n                <div class="col-md-8">\n                    <select class="form-control" ng-model="vm.methodType" class="form-control" >\n                        <option ng-repeat="item in vm.methodTypes" value="{{item.value}}">{{item.label}}</option>\n                    </select>\n                </div>\n            </div>\n\n            \x3c!------------------------------------\x3e\n            \x3c!-- INPUT FOR VARIOUS METHOD CALLS --\x3e\n            \x3c!------------------------------------\x3e\n            \x3c!-- authenticate --\x3e\n            <div ng-if="vm.methodType == \'authenticateAgentWithUsernamePassword\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Username*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.username" required>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Password*</label>\n                    <div class="col-md-8">\n                        <input type="password" class="form-control" ng-model="vm.props.password" required>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">PlatformId*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.platformId" placeholder="d02" required>\n                    </div>\n                </div>\n            </div>\n            <div ng-if="vm.methodType == \'authenticateAgentWithRcAccessToken\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">RC Access Token*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.rcAccessToken" required>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">tokenType*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.tokenType" placeholder="BEARER" required>\n                    </div>\n                </div>\n            </div>\n            <div ng-if="vm.methodType == \'authenticateAgentWithEngageAccessToken\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Engage Access Token*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.engageAccessToken" required>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- logout --\x3e\n            <div ng-if="vm.methodType == \'logoutAgent\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">AgentId*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.agentId" required>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- open socket --\x3e\n            <div ng-if="vm.methodType == \'openSocket\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">AgentId*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.agentId" required>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- login --\x3e\n            <div ng-if="vm.methodType == \'loginAgent\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">gateIds</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.gateIdsStr" placeholder="comma separated values">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">chatIds</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.chatIdsStr"  placeholder="comma separated values">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">skillProfileId</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.skillProfileId">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">dialGroupId</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.outdialGroupId">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">dialDest</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.dialDest">\n                    </div>\n                </div>\n            </div>\n            \x3c!-- manual outdial --\x3e\n            <div ng-if="vm.methodType == \'manualOutdial\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Destination*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.destination" required>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Ring Time (default 60)</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.ringTime">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Caller Id*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.callerId" required>\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Country Id (default USA)</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.countryId">\n                    </div>\n                </div>\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Gate Id</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.gateId">\n                    </div>\n                </div>\n            </div>\n            \x3c!-- manual outdial cancel --\x3e\n            <div ng-if="vm.methodType == \'cancelManualOutdial\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">UII*</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.uii" required>\n                    </div>\n                </div>\n            </div>\n            \x3c!-- hangup --\x3e\n            <div ng-if="vm.methodType == \'hangup\'">\n                <div class="form-group row">\n                    <label class="col-md-2 col-form-label">Session Id</label>\n                    <div class="col-md-8">\n                        <input class="form-control" ng-model="vm.props.sessionId">\n                    </div>\n                </div>\n            </div>\n\n\n            <div class="form-group row btn-row">\n                <div class="col-md-6">\n                    <button class="btn btn-primary" ng-disabled="testHarness.$invalid"  ng-click="vm.sendMessage()">send message</button>\n                    <button class="btn btn-warning" ng-click="vm.props.showStats = !vm.props.showStats">{{vm.props.showStats == true ? \'freeze stats\' : \'unfreeze stats\'}}</button>\n                    <button class="btn btn-danger" ng-click="vm.closeSocket()">close socket</button>\n                </div>\n            </div>\n\n            <h3>\n                Response:\n            </h3>\n            <div class="col-md-12">\n                <textarea class="response-area" ng-model="vm.socketResponse"></textarea>\n            </div>\n        </div>\n\n    </form>\n</div>\n\n')}]),angular.module("toolbar/toolbar.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/toolbar.tpl.html",'<aside class="cf-toolbar-container">\n\t<div class="widget" ng-repeat="widget in toolbarSvc.widgets">\n\t    <div widget="widget" ng-if="widget.visible"></div>\n\t</div>\n</aside>\n')}]),angular.module("toolbar/widgets/agentControl/agentControl.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/widgets/agentControl/agentControl.tpl.html",'<div class="agent-control-widget">\n\t<div class="agent-widget-title">\n\t\t<div>{{ ::agent.firstName }} {{ ::agent.lastName }}</div>\n\t\t<span> {{ ::agent.username}}</span>\n\t\t<hr class="widget-hr-line">\n\t</div>\n\t\n\t\n\t<div class="agent-widget-body">\n\t\t<div class="session">\t  \n\t\t\t<md-button class="info-btn"\n\t\t\t\t\t   aria-label="Session Info"\n\t\t\t\t\t   ng-mouseenter="toggleSubMenu(true)"\n\t\t\t\t\t   ng-mouseleave="toggleSubMenu(false)">\n\t\t\t\t<label translate="NAV.AGENT_MENU.SESSION_INFO" class="label-color info-label"></label>\n\t\t\t\t<i ng-if="showCaret" class="fa fa-caret-right arrow" ></i>\n\t\t\t</md-button>\n\t\t\t<div class="session-content"\n\t\t\t\t ng-if="showCaret"\n\t\t\t\t ng-mouseenter="toggleSubMenu(true)"\n\t\t\t\t ng-mouseleave="toggleSubMenu(false)">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<label translate="NAV.USER.PHONE"></label>\n\t\t\t\t\t<span>{{ ::agent.dialDest }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if="agent.phoneLoginPin" class="row">\n\t\t\t\t\t<label translate="NAV.USER.LOGIN_PIN"></label>\n\t\t\t\t\t<span>{{ ::agent.phoneLoginPin }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<label translate="NAV.USER.LOGIN_TYPE"></label>\n\t\t\t\t\t<span>{{ ::agent.loginType }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<label translate="NAV.USER.LOGIN_DTS"></label>\n\t\t\t\t\t<span>{{ ::agent.loginDTS | date:\'short\' }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<label translate="NAV.USER.SKILL_PROFILE"></label>\n\t\t\t\t\t<span>{{ ::profileName }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<label translate="NAV.USER.DIAL_GROUP"></label>\n\t\t\t\t\t<span>{{ ::dialGroupName }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if="chatService.chatState.currentState !== \'None\'" class="row">\n\t\t\t\t\t<label translate="NAV.USER.CHAT_STATE"></label>\n\t\t\t\t\t<span>{{ ::chatService.chatState.currentState }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<hr>\n\t\t\t\t</div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<md-menu-content class="update-session">\n\t\t\t\t\t\t<md-menu-item>\n\t\t\t\t\t\t\t<md-button\n\t\t\t\t\t\t\t\tng-click="updateLogin()"\n\t\t\t\t\t\t\t\tng-if="agentPermissions.allowLoginUpdates"\n\t\t\t\t\t\t\t\tng-disabled="callService.onCallOrPendingDisp()"\n\t\t\t\t\t\t\t\tclass="md-btn-secondary no-hover-btn">\n\t\t\t\t\t\t\t\t{{ ::\'NAV.UPDATE_SESSION\'| translate }}\n\t\t\t\t\t\t\t</md-button>\n\t\t\t\t\t\t</md-menu-item>\n\t\t\t\t\t</md-menu-content>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<md-menu-item ng-if="!isSupervisor">\n\t\t\t<md-button ng-click="toolbarService.toggleWidget(\'chatControl\')">\n\t\t\t\t<label translate="NAV.AGENT_MENU.CHAT" class="label-color"></label>\n\t\t\t</md-button>\n\t\t</md-menu-item>\n\t\t\n\t\t<md-menu-item class="contrast">\n\t\t\t<label translate="NAV.AGENT_MENU.MODE" class="contrast-label label-color"></label>\n\t\t\t<md-switch class="md-primary md-block switch-sm custom-switch"\n\t\t\t    aria-label="Toggle Contrast Mode"\n\t\t\t\tng-model="agentService.contrastMode" \n\t\t\t\tng-change="onSwitchContrastMode()" \n\t\t\t\tng-class="{\'off\':!agentService.contrastMode}"></md-switch>\n\t\t</md-menu-item>\n\t\t<hr class="custom no-margin">\n\t\t<md-menu-content class="sign-out">\n\t\t\t\t<md-menu-item>\n\t\t\t\t\t<md-button ng-click="logOut()" class="md-btn-secondary no-hover-btn">\n\t\t\t\t\t\t\t{{ ::\'NAV.SIGN_OUT\' | translate }}\n\t\t\t\t\t</md-button>\n\t\t\t\t</md-menu-item>\n\t\t</md-menu-content>\n\t</div>\n</div>\n\t')}]),angular.module("toolbar/widgets/callControl/callControl.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/widgets/callControl/callControl.tpl.html",'<div class="cf-toolbar-container" ng-show="visible">\n\t<div class="widget">\n\t\t<div class="wrapper">\n\t\t\t<div class="call-control-widget call-controls">\n\t\t\t\t<div class="control"\n\t\t\t\t     ng-class="{\'active\': vm.callService.currentCall.onHold || vm.transferSessionOnHold(), \'disabled\': !(vm.allowHold() && vm.onCall())}">\n\t\t\t\t\t<button class="control-action"\n\t\t\t\t\t        ng-disabled="!(vm.allowHold() && vm.onCall())"\n\t\t\t\t\t        ng-click="vm.toggleHoldOrOpenHoldModal()">\n\t\t\t\t\t\t<i class="icon-hold"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t{{ vm.callService.currentCall.onHold ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD_RESUME\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD\' | translate }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="control"\n\t\t\t\t     ng-class="{\'active\': vm.softphoneService.muteActive, \'disabled\': !(vm.isIntegratedSoftphone && vm.allowMute() && vm.onCall())}">\n\t\t\t\t\t<button class="control-action"\n\t\t\t\t\t        ng-disabled="!(vm.isIntegratedSoftphone && vm.allowMute() && vm.onCall())"\n\t\t\t\t\t        ng-click="vm.softphoneService.sipToggleMute()">\n\t\t\t\t\t\t<i class="icon-mute"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<label>\n\t\t\t\t\t\t{{ vm.softphoneService.muteActive ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_MUTE_OFF\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_MUTE\' | translate }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="control"\n\t\t\t\t     ng-class="{\'active\': vm.callService.currentCall.isRecording, \'disabled\': !(vm.allowRecord() && vm.onCall()), \'pause\': vm.callService.currentCall.recordingPaused}">\n\t\t\t\t\t<button class="control-action record"\n\t\t\t\t\t        ng-disabled="!(vm.allowRecord() && vm.onCall())"\n\t\t\t\t\t\t\tng-click="vm.toggleRecord()"\n\t\t\t\t\t\t\tuib-popover="{{vm.setToolTip()}}" \n\t\t\t\t\t\t\tpopover-trigger="\'mouseenter\'" \n\t\t\t\t\t\t\tpopover-placement= "right" \n\t\t\t\t\t\t\tpopover-enable = "{{vm.callService.currentCall.agentRecording.pause !== \'\'}}"\n\t\t\t\t\t\t\tpopover-class= \'custom-popover-class\'>\n\t\t\t\t\t\t\t<i ng-show="!vm.callService.currentCall.recordingPaused" class="icon-record"></i>\n\t\t\t\t\t\t\t<label ng-show="vm.callService.currentCall.recordingPaused"> {{vm.callService.pauseDisplay}} </label>\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{{ vm.callService.currentCall.recordingPaused ? \'SOFTPHONE.CALL_CONTROL_HELP.PAUSED\'\n\t\t\t\t\t\t\t: (vm.callService.currentCall.isRecording ? \'SOFTPHONE.CALL_CONTROL_HELP.RECORDING\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_RECORDING\') | translate  }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="control action-btn full-width-btn" ng-class="{\'disabled\': vm.dialDisabled()}">\n\t\t\t\t\t<button class="btn btn-lg custom hangup-button"\n\t\t\t\t\t        ng-class="vm.getDialClass()"\n\t\t\t\t\t        ng-disabled="vm.dialDisabled()"\n\t\t\t\t\t        ng-click="vm.dialOptions()">\n\t\t\t\t\t\t\t<i class="material-icons">phone</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("toolbar/widgets/chatControl/chatControl.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/widgets/chatControl/chatControl.tpl.html",'<div class="chat-control-widget">\n\t<div class="widget-title">\n\t\t<h4 translate="WIDGETS.CHAT_CONTROL"></h4>\n\n\t\t<i class="material-icons" ng-if="cfChatService.currentView !== \'LIST\'"\n\t\t   ng-click="goToListView()">keyboard_backspace</i>\n\t\t<i class="material-icons"\n\t\t   ng-if="cfChatService.currentView === \'LIST\'"\n\t\t   ng-click="goToConfigChat()">settings</i>\n\t</div>\n\n\t<div class="widget-view">\n\t\t<div ng-if="cfChatService.currentView === \'LIST\'" class="list-view-toggle">\n\t\t\t<a ng-click="goToListType(cfChatService.chatRoomTypes.GROUP)"\n\t\t\t     ng-class="{ active: cfChatService.listViewType === cfChatService.chatRoomTypes.GROUP}">\n\t\t\t\t<span class="view-type">\n\t\t\t\t\t{{ ::\'WIDGETS.CHAT_CONTROL.ROOMS\' | translate | uppercase }}\n\t\t\t\t</span>\n\t\t\t\t<span class="badge info" ng-if="cfChatService.getGroupUnreadMsgs() > 0">\n\t\t\t\t\t{{ cfChatService.getGroupUnreadMsgs() }}\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t\t<a ng-click="goToListType(\'PRIVATE\')"\n\t\t        ng-class="{ active: cfChatService.listViewType === cfChatService.chatRoomTypes.PRIVATE }">\n\t\t\t\t<span class="view-type">\n\t\t\t\t\t{{ ::\'WIDGETS.CHAT_CONTROL.DIRECT\' | translate | uppercase }}\n\t\t\t\t</span>\n\n\t\t\t\t<span class="badge info" ng-if="cfChatService.getPrivateUnreadMsgs() > 0">\n\t\t\t\t\t{{ cfChatService.getPrivateUnreadMsgs() }}\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div ng-show="cfChatService.currentView === \'LIST\' && cfChatService.listViewType === cfChatService.chatRoomTypes.PRIVATE" class="list-view-search">\n\t\t\t<input class="form-control private-list-filter"\n\t\t\t       ng-model="privateListSearch"\n\t\t\t       placeholder="{{ \'GENERICS.ACTIONS.SEARCH\' | translate }}">\n\t\t</div>\n\t</div>\n\n\t<div class="widget-body">\n\t\t<div ng-if="cfChatService.currentView === \'LIST\'" class="chat-list-view">\n\t\t\t<md-list>\n\t\t\t\t<md-list-item class="md-1-line"\n\t\t\t\t\t\t\t  ng-click="goToRoom(room)"\n\t\t\t\t\t\t\t  ng-repeat="(id, room) in cfChatService.chats | chatRoomType:cfChatService.listViewType:privateListSearch"\n\t\t\t\t\t\t\t  ng-class="{\'last-item\':$last}">\n\t\t\t\t\t<span class="badge" ng-class="{\'info\': room.unreadCount > 0, \'none\': room.unreadCount === 0}">\n\t\t\t\t\t\t{{ room.unreadCount === 0 ? \'&nbsp;\' : room.unreadCount }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class="md-list-item-text">\n\t\t\t\t\t\t<div class="chat-title">\n\t\t\t\t\t\t\t{{room.roomName}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{{room.messages[room.messages.length -1][\'message\'] | FilterLength:\'30\'}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</md-list-item>\n\t\t\t</md-list>\n\n\t\t\t<div ng-if="(cfChatService.chats | chatRoomType:cfChatService.listViewType:privateListSearch).length === 0">\n\t\t\t\t<h4 class="text-center" translate="CHAT.NO_CHATS"></h4>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="cfChatService.currentView === \'CONFIG\'" class="chat-config-view content">\n\t\t\t<form class="chat-config-options">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="CHAT.ALIAS"></label>\n\t\t\t\t\t<input ng-model="cfChatService.chatOptions.alias" id="alias" type="text" class="form-control" ng-model-options="{updateOn: \'blur\'}" />\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<md-checkbox class="md-primary" ng-model="cfChatService.chatOptions.playRoom" aria-label="play room sound">\n\t\t\t\t\t\t{{::\'CHAT.CHAT_ROOMS.PLAY_SOUND_ROOM\' | translate}}\n\t\t\t\t\t</md-checkbox>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<md-checkbox class="md-primary" ng-model="cfChatService.chatOptions.playDirect" aria-label="play direct sound">\n\t\t\t\t\t\t{{::\'CHAT.CHAT_ROOMS.PLAY_SOUND_DIRECT\' | translate}}\n\t\t\t\t\t</md-checkbox>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t\t<div ng-if="cfChatService.currentView === \'CHAT\'" class="chat-content-view chat-display">\n\t\t\t<div class="room-wrapper">\n\t\t\t\t<h4 class="room-name content" ng-if="cfChatService.currentWidgetRoom">{{ cfChatService.currentWidgetRoom.roomName }}</h4>\n\n\t\t\t\t<div class="chat-messages content">\n\t\t\t\t\t<div class="message-wrapper"\n\t\t\t\t\t\t ng-repeat="message in cfChatService.chats[cfChatService.currentWidgetRoom.roomId].messages track by $index">\n\t\t\t\t\t\t<div class="msg-meta" ng-class="internalMsgDecorator(message)" ng-if="message.sender !== \'SYSTEM\'">\n\t\t\t\t\t\t\t<span class="sender">\n\t\t\t\t\t\t\t\t{{message.sender}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="dts">\n\t\t\t\t\t\t\t\t{{message.time | date:\'shortTime\'}}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="msg-content" ng-class="internalMsgDecorator(message)">\n\t\t\t\t\t\t\t<span class="message"\n\t\t\t\t\t\t\t\t  ng-class="{\'system-msg\':message.sender === \'SYSTEM\'}"\n\t\t\t\t\t\t\t\t  ng-bind-html="message.message">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="send-block">\n\t\t\t\t<form name="sendMsg" id="sendMsg" novalidate autocomplete="off">\n\t\t\t\t\t<div class="input-group phone-input">\n\t\t\t\t\t\t<input type="text"\n\t\t\t\t\t\t\t   id="agentMsg"\n\t\t\t\t\t\t\t   class="form-control"\n\t\t\t\t\t\t\t   ng-model="cfChatService.chats[cfChatService.currentWidgetRoom.roomId].agentMessage"\n\t\t\t\t\t\t\t   aria-label="Agent Message"\n\t\t\t\t\t\t\t   ng-disabled="!cfChatService.chats[cfChatService.currentWidgetRoom.roomId].active"\n\t\t\t\t\t\t\t   placeholder="{{::\'CHAT.SEND_MSG\'| translate}}"\n\t\t\t\t\t\t\t   spellcheck="true"\n\t\t\t\t\t\t\t   required/>\n\t\t\t\t\t<span class="input-group-btn">\n\t\t\t\t\t\t<button class="btn btn-secondary send-btn"\n\t\t\t\t\t\t\t\ttype="submit" ng-disabled="sendMsg.$invalid"\n\t\t\t\t\t\t\t\tng-click="sendChat()">\n\t\t\t\t\t\t\t{{::\'CHAT.SEND\' | translate}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("toolbar/widgets/monitorControl/monitorControl.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/widgets/monitorControl/monitorControl.tpl.html",'<div class="cf-toolbar-container" ng-show="visible">\n\t<div class="widget">\n\t\t<div class="monitor-control-widget">\n\t\t\t<md-card class="monitor-card">\n\t\t\t\t<md-card-content>\n\t\t\t\t\t<div class="widget">\n\t\t\t\t        <span class="agent-name btn btn-link" ng-click="goToAgent()">\n\t\t\t\t          {{ monitorService.monitoredAgent.firstName + \' \' + monitorService.monitoredAgent.lastName | FormatEmptyValue }}\n\t\t\t\t        </span>\n\t\t\t\t\t\t<span class="counter">\n\t\t\t\t\t\t\t{{ monitorService.call.duration | hhMmSs }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="btn-group">\n\t\t\t\t\t\t\t<button type="button"\n\t\t\t\t\t\t\t\t\tclass="btn-monitor btn"\n\t\t\t\t\t\t\t\t\tng-disabled="monitorService.call.connecting"\n\t\t\t\t\t\t\t\t\tng-click="toggleMonitor(monitorService.call.type || monitorTypes.MONITOR)"\n\t\t\t\t\t\t\t\t\tng-class="getMainButtonClass()">\n\t\t\t\t\t\t\t\t{{getMonitorButtonLabel() | translate}}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button type="button"  class="btn dropdown-toggle dropdown-toggle-split"\n\t\t\t\t\t\t\t\t\tng-disabled="MonitorSvc.call.connecting"\n\t\t\t\t\t\t\t\t\tng-class="getMainButtonClass()"\n\t\t\t\t\t\t\t\t\tdata-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t\t\t<md-icon>\n\t\t\t\t\t\t\t\t\t<i class="material-icons">expand_more</i>\n\t\t\t\t\t\t\t\t</md-icon>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t\t\t\t<div class="dropdown-item"\n\t\t\t\t\t\t\t\t\t ng-click="toggleMonitor(monitorTypes.COACH)"\n\t\t\t\t\t\t\t\t\t ng-class="getMonitorButtonClass(monitorTypes.COACH)">\n\t\t\t\t\t\t\t\t\t{{ \'AGENT_MONITOR.ACTIONS.COACH.\' + (monitorService.call.type === monitorTypes.COACH ? \'STOP\' : \'START\') | translate }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="dropdown-divider"></div>\n\t\t\t\t\t\t\t\t<div class="dropdown-item"\n\t\t\t\t\t\t\t\t\t ng-click="toggleMonitor(monitorTypes.BARGE_IN)"\n\t\t\t\t\t\t\t\t\t ng-class="getMonitorButtonClass(monitorTypes.BARGE_IN)">\n'+"\t\t\t\t\t\t\t\t\t{{ 'AGENT_MONITOR.ACTIONS.BARGEIN.' + (monitorService.call.type === monitorTypes.BARGE_IN ? 'STOP' : 'START') | translate }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</md-card-content>\n\t\t\t</md-card>\n\t\t</div>\n\t</div>\n</div>\n")}]),angular.module("toolbar/widgets/supervisorBargeinControl/supervisorBargeinControl.tpl.html",[]).run(["$templateCache",function(a){
a.put("toolbar/widgets/supervisorBargeinControl/supervisorBargeinControl.tpl.html",'<div class="cf-toolbar-container" ng-show="visible">\n\t<div class="monitor-control-widget supervisor-bargein-widget">\n\t\t<md-card class="monitor-card">\n\t\t\t<md-card-content>\n\t\t\t\t<div class="widget">\n\t\t\t\t\t<span class="agent-name btn btn-link" ng-click="goToAgent()">\n\t\t                {{ monitorService.monitoredAgent.firstName + \' \' + monitorService.monitoredAgent.lastName | FormatEmptyValue }}\n\t\t\t        </span>\n\t\t\t\t\t<span class="counter">\n\t\t\t\t\t\t{{ monitorService.call.duration | hhMmSs }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="full-width-btn">\n\t\t\t\t\t<button class="btn btn-danger"\n\t\t\t\t\t        ng-click="callService.hangupOrPromptForSession()">\n\t\t\t\t\t\t{{ ::\'SOFTPHONE.HANGUP\' | translate }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="transfer-sessions-widget">\n\t\t\t\t\t<div class="sessions">\n\t\t\t\t\t\t<div class="session">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ \'SOFTPHONE.HANGUP.CALLER\'| translate:{destination: (callService.currentCall.ani | phoneFormat) } }}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<div class="transfer-controls">\n\t\t\t\t\t\t\t\t<div class="control pause" ng-click="hold(callService.currentCall.onHold, 1)" ng-class="{active: callService.currentCall.onHold}">\n\t\t\t\t\t\t\t\t\t<i class="material-icons">pause</i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="session" ng-repeat="(key, value) in sessions">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t{{ value.destination }}\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<div class="transfer-controls">\n\t\t\t\t\t\t\t\t<div class="control pause" ng-click="hold(value.onHold, value.sessionId)" ng-class="{active: value.onHold}">\n\t\t\t\t\t\t\t\t\t<i class="material-icons">pause</i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</md-card-content>\n\t\t</md-card>\n\t</div>\n</div>\n')}]),angular.module("toolbar/widgets/transferSessionsControl/transferSessionsControl.tpl.html",[]).run(["$templateCache",function(a){a.put("toolbar/widgets/transferSessionsControl/transferSessionsControl.tpl.html",'<div class="cf-toolbar-container" ng-show="visible">\n\t<div class="widget">\n\t\t<div class="tranfer-widget wrapper">\n\t\t\t<div class="transfer-sessions-widget">\n\t\t\t\t<div class="session">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ \'SOFTPHONE.HANGUP.CALLER\'| translate:{destination: (callService.currentCall.ani | phoneFormat) } }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div class="transfer-controls">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ vm.callService.currentCall.onHold ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD_RESUME\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD\' | translate }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="control pause" ng-click="hold(callService.currentCall.onHold, 1)" ng-class="{active: callService.currentCall.onHold}">\n\t\t\t\t\t\t\t<i class="icon-hold"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="session" ng-repeat="(key, value) in sessions">\n\t\t\t\t\t<span ng-if="!value.isCorpExtension">\n\t\t\t\t\t\t{{ \'SOFTPHONE.HANGUP.XFER\'| translate:{destination: (value.destination | phoneFormat) } }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<span ng-if="value.isCorpExtension">\n\t\t\t\t\t\t{{ \'SOFTPHONE.HANGUP.XFER\'| translate:{destination: (value.extension) } }}\n\t\t\t\t\t</span>\n\n\t\t\t\t\t<div class="transfer-controls">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{ value.onHold ? \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD_RESUME\' : \'SOFTPHONE.CALL_CONTROL_HELP.TOGGLE_HOLD\' | translate }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="control pause" ng-click="hold(value.onHold, value.sessionId)" ng-class="{active: value.onHold}">\n\t\t\t\t\t\t\t<i class="icon-hold"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("templates-common",["directives/audioPlayer/audioPlayer.tpl.html","directives/callHistory/callHistoryCard.tpl.html","directives/cfAgentInputsMessages.tpl.html","directives/cfAgentLoader.tpl.html","directives/cfChatMessaging.tpl.html","directives/cfChatMessagingSend.tpl.html","directives/cfChatMessagingSendMonitoring.tpl.html","directives/cfHostnameLink.tpl.html","directives/dashboard/bigNumber.tpl.html","directives/dashboard/monitor/monitorChatDetailCard.tpl.html","directives/dashboard/monitor/monitorDetailCard.tpl.html","directives/disposition/dispositionForm.tpl.html","directives/leads/callbacksTable.tpl.html","directives/leads/forms/leadSearch.tpl.html","directives/leads/leadInfoTable.dial.tpl.html","directives/leads/leadInfoTable.settings.tpl.html","directives/leads/leadInfoTable.tpl.html","directives/leads/leadList.tpl.html","directives/leads/searchFields.tpl.html","directives/scriptFrameManager.tpl.html","factories/dialogs/confirm.tpl.html","factories/dialogs/disposition/disposition.dialog.tpl.html","factories/dialogs/knowledgeBaseEdit/knowledgeBaseEditModal.tpl.html","factories/dialogs/leads/leadDetail.tpl.html","factories/dialogs/leads/leadManualPass.tpl.html","factories/dialogs/leads/leadUpdate.tpl.html","factories/dialogs/shared/tableColumns.dialog.tpl.html"]),angular.module("directives/audioPlayer/audioPlayer.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/audioPlayer/audioPlayer.tpl.html",'<div class="audio-player">\n    <a class="btn btn-link" uib-popover-template="\'audioPopover.html\'" uib-popover-placement="top" ng-click="togglePopover()">\n\t    <i class="material-icons">play_arrow</i>\n\t    {{ \'AUDIO_PLAYER.PLAY_RECORDING\' | translate}}\n    </a>\n\n    <script type="text/ng-template" id="audioPopover.html" >\n        <div>\n            <md-slider-container>\n                <span class="audio-control">\n                    <a ng-hide="!isPlaying" ng-click="pause()" class="btn btn-link" ng-cloak>\n                        <i class="material-icons">pause</i>\n                    </a>\n                    <a ng-hide="isPlaying" ng-click="play()" ng-disabled="loading" class="btn btn-link" ng-cloak>\n                        <i class="material-icons">play_arrow</i>\n                    </a>\n                </span>\n\n\t            <md-slider ng-model="slider.progressPercent" min="0" max="100" ng-change="seek()" ng-disabled="loading || !recording" aria-label="slider" step="1" round="2"></md-slider>\n            </md-slider-container>\n\n            <div class="pull-right playback-time">\n                <small ng-if="loading">{{\'AUDIO_PLAYER.LOADING\' | translate}}</small>\n                <small ng-if="!loading">{{currentTime}}/{{recordingLength}} {{\'AUDIO_PLAYER.SECS\' | translate}}</small>\n            </div>\n        </div>\n    <\/script>\n</div>\n')}]),angular.module("directives/callHistory/callHistoryCard.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/callHistory/callHistoryCard.tpl.html",'<div>\n    <div class="detail-group">\n        <label class="detail-header">\n            {{ headerValue | phoneFormat}}\n        </label>\n        <span class="value time">\n            {{ call.queueTime | momentDate : dateFormat.TIME | uppercase }}\n        </span>\n    </div>\n\n    <div class="detail-group detail-flex-group">\n        <div class="phone-icon" ng-class="{outbound: outboundIcon, inbound: inboundIcon}">\n            <i class="material-icons call-icon">call</i>\n            <i class="material-icons call-arrow-icon">{{ outboundIcon ? \'call_made\' : \'call_received\' }}</i>\n        </div>\n        \n        <div class="queue">\n            {{ source.value }}\n        </div>\n    </div>\n\n    <div class="detail-group">\n        <span class="disposition-state">\n            {{ disposition }}\n        </span>\n    </div>\n</div>')}]),angular.module("directives/cfAgentInputsMessages.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfAgentInputsMessages.tpl.html",'<div ng-message="required"> {{ "GENERICS.LABELS.ERR_REQUIRED" | translate }}     </div>\n<div ng-message="unique">   {{ "GENERICS.LABELS.ERR_NOT_UNIQUE" | translate }}   </div>\n<div ng-message="invalid">  {{ "GENERICS.LABELS.ERR_INVALID" | translate }}      </div>\n<div ng-message="email">    {{ "GENERICS.LABELS.ERR_EMAIL" | translate }}        </div>\n<div ng-message="min">      {{ "GENERICS.LABELS.ERR_OUT_OF_RANGE" | translate }} </div>\n<div ng-message="max">      {{ "GENERICS.LABELS.ERR_OUT_OF_RANGE" | translate }} </div>\n<div ng-message="minlength">{{ "GENERICS.LABELS.ERR_LENGTH_SHORT" | translate }} </div>\n<div ng-message="maxlength">{{ "GENERICS.LABELS.ERR_LENGTH_LONG" | translate }}  </div>\n')}]),angular.module("directives/cfAgentLoader.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfAgentLoader.tpl.html",'<div style="width: 100%; background: white; height: 100%; z-index: 100; position: absolute; top: 1px; right: 0; display: flex;">\n    <img src="assets/images/css-loader.svg" style="position: absolute; left: 0;" />\n    <div style="position: relative; margin:auto;">\n        <i class="fa fa-circle-o-notch fa-spin" style="font-size: 34px; color: #0091FF;"></i>\n        <div style="font-size: 16px; font-weight: 500; color: #A1A1A1; margin-left: -10px;">{{::\'GENERICS.MESSAGES.LOADING\' | translate}}</div>\n    </div>\n</div>')}]),angular.module("directives/cfChatMessaging.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfChatMessaging.tpl.html",'<md-card-content>\n\t<div class="chat-messaging chat-messaging-panel" ng-class="{\'chat-monitoring-height\': chat.isMonitoring}">\n\t\t<h3 class="nav-title" ng-if="!chat.isMonitoring">\n\t\t\t<span>\n\t\t\t\t{{ chat.chatQueueName }}\n\t\t\t</span>\n\n\t\t\t<button ng-click="agentEndChat()"\n\t\t\t\t\ttype="button"\n\t\t\t\t\tng-disabled="chat.inactive"\n\t\t\t\t\tclass="btn btn-danger btn-link"\n\t\t\t\t\ttranslate="CHAT.END_CHAT">\n\t\t\t</button>\n\t\t</h3>\n\n\t\t<div class="chat-display" id="chatDisplay{{chat.uii}}">\n\t\t\t<div class="scrollable-wrapper underline chat-messages">\n\t\t\t\t<div class="scroll-height">\n\t\t\t\t\t<div class="chat-area">\n\t\t\t\t\t\t<div class="message-wrapper" ng-repeat="message in chat.transcript"\n\t\t\t\t\t\t\t ng-init="$last && transcriptComplete()">\n\t\t\t\t\t\t\t<div class="msg-content" ng-class="msgDecorator(message)">\n\t\t\t\t\t\t\t\t<span class="message" ng-class="{ \'inactive\':chat.inactive }" ng-bind-html="message.message"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="msg-meta" ng-class="msgDecorator(message)" ng-if="message.type !== \'SYSTEM\'">\n\t\t\t\t\t\t\t\t<span class="dts">\n\t\t\t\t\t\t\t\t\t<span ng-if="message.whisper">{{ ::\'MONITORING.MONITORING\' | translate }} </span>\n\t\t\t\t\t\t\t\t\t{{ ::message.dts | date:\'shortTime\'}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- typing message --\x3e\n\t\t\t\t\t\t<div class="message-wrapper" ng-show="chat.pendingMessage.length > 0">\n\t\t\t\t\t\t\t<div class="msg-meta typing">\n\t\t\t\t\t\t\t\t<span class="dts">{{ ::"CHAT.TYPING" | translate}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="msg-content typing">\n\t\t\t\t\t\t\t\t<span class="message">{{ chat.pendingMessage }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- agent typing message --\x3e\n\t\t\t\t\t\t<div class="message-wrapper" ng-show="chat.pendingAgentMessage.length > 0">\n\t\t\t\t\t\t\t<div class="msg-meta agent-typing">\n\t\t\t\t\t\t\t\t<span class="dts">{{ ::"CHAT.AGENT_TYPING" | translate}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="msg-content agent-typing">\n\t\t\t\t\t\t\t\t<span class="message">{{ chat.pendingAgentMessage }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- include disposition and requeue block for non-monitoring session --\x3e\n\t\t\t<cf-chat-messaging-send\n\t\t\t\t\tng-if="!chat.isMonitoring"\n\t\t\t\t\tclass="send-block">\n\t\t\t</cf-chat-messaging-send>\n\t\t</div>\n\t</div>\n</md-card-content>\n\n\x3c!-- different styling for monitoring send block --\x3e\n<cf-chat-messaging-send-monitoring\n\t\tng-if="chat.isMonitoring && !chat.inactive"\n\t\tclass="send-block">\n</cf-chat-messaging-send-monitoring>\n')}]),angular.module("directives/cfChatMessagingSend.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfChatMessagingSend.tpl.html",'<div ng-if="chatService.showNotes && chatService.activePendingDisp()" class="section-padding">\n\t<label translate="DISPOSITIONS.NOTES"></label>\n\t<textarea class="form-control"\n\t\tplaceholder="{{::\'DISPOSITIONS.NOTES_PLACEHOLDER\'| translate}}"\n\t\tng-model="chat.disposition.notes" rows="5"></textarea>\n</div>\n\n<div class="call-controls chat-controls"\n\t ng-class="{\'no-disp\': !chatService.allowDisposition()}">\n\t<div class="control"\n\t\t ng-class="{\'active\': requeueOpen, \'disabled\': !chatService.allowRequeue()}">\n\t\t<button class="control-action"\n\t\t\t\tng-disabled="!chatService.allowRequeue()"\n\t\t\t\tng-click="openRequeue()">\n\t\t\t\t<i class="icon-requeue"></i>\n\t\t</button>\n\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.REQUEUE"></label>\n\t</div>\n\n\t<div class="control"\n\t\t ng-if="chatService.activePendingDisp()"\n\t\t ng-class="{\'active\': chatService.showNotes}">\n\t\t<button class="control-action"\n\t\t\t\tng-click="chatService.showNotes = !chatService.showNotes">\n\t\t\t<i class="icon-disposition"></i>\n\t\t</button>\n\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.NOTES"></label>\n\t</div>\n\n\t<div class="control"\n\t\t ng-if="!chatService.activePendingDisp() && chatService.allowDisposition()"\n\t\t ng-class="{\'active\': dispositionOpen, \'disabled\': !chatService.allowDisposition(), \'waiting-on-disp\': chatService.notActivePendingDisp()}">\n\t\t<button class="control-action"\n\t\t\t\tng-disabled="!chatService.allowDisposition()"\n\t\t\t\tng-click="openDisposition()">\n\t\t\t<i class="icon-disposition"></i>\n\t\t</button>\n\t\t<label translate="SOFTPHONE.CALL_CONTROL_HELP.DISPOSITION"></label>\n\t</div>\n</div>\n\n<div class="action-btn">\n\t<form name="agentChatMsgForm" id="agentChatMsgForm{{chat.uii}}" novalidate autocomplete="off">\n\n\t\t<textarea type="text"\n\t\t\t\t  id="agentChatMsg{{chat.uii}}"\n\t\t\t\t  class="form-control send-area"\n\t\t\t\t  ng-model="chat.agentMessage"\n\t\t\t\t  aria-label="Agent Message"\n\t\t\t\t  ng-disabled="chat.inactive"\n\t\t\t\t  placeholder="{{\'CHAT.SEND_MSG\'| translate}}"\n\t\t\t\t  spellcheck="true"\n\t\t\t\t  ng-change="sendTypingMsg()"\n\t\t\t\t  required\n\t\t\t\t  cf-growing-height-input\n\t\t\t\t  ignore-enter="true"\n\t\t\t\t  autofocus></textarea>\n\n\t\t<button type="submit" translate="CHAT.SEND" ng-click="sendChat();" hidden>\n\t\t</button>\n\t</form>\n</div>\n')}]),angular.module("directives/cfChatMessagingSendMonitoring.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfChatMessagingSendMonitoring.tpl.html",'<div class="monitoring-btn" ng-class="{\'monitoring-btn-open\': monitorMessageOpen }" ng-click="toggleMonitorMessage()">\n\t<i class="material-icons">{{ monitorMessageOpen ? \'keyboard_arrow_up\' : \'keyboard_arrow_down\' }}</i>\n</div>\n<div class="monitoring-msg" ng-show="monitorMessageOpen">\n\t<form name="agentChatMsgForm" id="agentChatMsgForm{{chat.uii}}" novalidate autocomplete="off">\n\n\t\t\t\t<textarea type="text"\n\t\t\t\t\t\t  id="agentChatMsg{{chat.uii}}"\n\t\t\t\t\t\t  class="form-control send-area"\n\t\t\t\t\t\t  ng-model="chat.agentMessage"\n\t\t\t\t\t\t  aria-label="Agent Message"\n\t\t\t\t\t\t  ng-disabled="chat.inactive"\n\t\t\t\t\t\t  placeholder="{{\'CHAT.MONITOR_SEND_MSG\'| translate}}"\n\t\t\t\t\t\t  spellcheck="true"\n\t\t\t\t\t\t  required\n\t\t\t\t\t\t  cf-growing-height-input\n\t\t\t\t\t\t  ignore-enter="true"\n\t\t\t\t\t\t  autofocus></textarea>\n\n\t\t<button type="submit" translate="CHAT.SEND" ng-click="sendChat();" hidden>\n\t\t</button>\n\t</form>\n</div>')}]),angular.module("directives/cfHostnameLink.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/cfHostnameLink.tpl.html",'<a class="cf-hostname-link btn btn-link" target="_blank" href="{{parser.href}}">\n    <span class="url-text">{{ parser.hostname }}</span>\n    <i class="material-icons">language</i>\n</a>')}]),angular.module("directives/dashboard/bigNumber.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/dashboard/bigNumber.tpl.html",'<md-card md-theme="default" class="big-number"\n\t\tng-mouseleave="showDropdown = false;" ng-mouseover="showDropdown = true;">\n\t<md-card-title class="stat-title">\n\t\t<md-card-title-text class="title-text dropdown">\n\t\t\t<span ng-click="showOptions" data-toggle="dropdown">\n\t\t\t\t{{ (\'DASHBOARD.TYPES.STATS.\' + source + \'.\' | uppercase) + key.key | translate }}\n\t\t\t\t<i class="material-icons" ng-class="{\'show-icon\': showDropdown}">expand_more</i>\n\t\t\t</span>\n\t\t\t<ul class="dropdown-menu scrollable-menu">\n\t\t\t\t<li ng-repeat="option in options track by $index">\n\t\t\t\t\t<a ng-click="updateKey(option)">\n\t\t\t\t\t\t{{ (\'DASHBOARD.TYPES.STATS.\' + source + \'.\' | uppercase) + option.key | translate }}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</md-card-title-text>\n\t</md-card-title>\n\t<md-card-content class="content" ng-class="{time: key.type === statsDataTypes.TIME}">\n\t\t{{ getData() }}\n\t</md-card-content>\n</md-card>')}]),angular.module("directives/dashboard/monitor/monitorChatDetailCard.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/dashboard/monitor/monitorChatDetailCard.tpl.html",'<md-card class="monitor-card chat-monitor-card" ng-class="type">\n\t<div ng-if="!isChatDetailView">\n\t\t<md-card-title>\n\t\t\t<md-card-title-text class="stats">\n\t\t\t\t<div class="stat" >\n\t\t\t\t\t<label translate="AGENT_MONITOR.SOURCE"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.chatQueueName | FormatEmptyValue }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="stat">\n\t\t\t\t\t<label translate="AGENT_MONITOR.DURATION"></label>\n\t\t\t\t\t<span class="value" ng-if="!chat.inactive">\n\t\t\t\t\t\t{{ chatService.getChatDuration(chat.queueDts) }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="value" ng-if="chat.inactive">\n\t\t\t\t\t\t{{ chat.chatEndedDts }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="stat stat-chat-type">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{ chat.channelType | FormatChatChannelType }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</md-card-title-text>\n\n\t\t\t<div class="stat-chat-info-btn">\n\t\t\t\t<md-button ng-click="toggleDetailView()"\n\t\t\t\t\t\t   class="md-icon-button">\n\t\t\t\t\t<i class="material-icons">info_outlined</i>\n\t\t\t\t</md-button>\n\t\t\t</div>\n\n\t\t</md-card-title>\n\n\t\t\x3c!-- CHAT --\x3e\n\t\t<cf-chat-messaging chat="chat"></cf-chat-messaging>\n\t</div>\n\n\t<div ng-if="isChatDetailView">\n\t\t<md-card-title class="no-border">\n\t\t\t<md-card-title-text class="stats">\n\t\t\t\t<div>\n\t\t\t\t\t<div class="stat" ng-if="chat.channelType === \'SMS\'">\n\t\t\t\t\t\t<label translate="CHAT.DETAIL.ANI"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.ani | phoneFormat }}\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="stat" ng-if="chat.channelType === \'SMS\'">\n\t\t\t\t\t\t<label translate="CHAT.DETAIL.DNIS"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.dnis | phoneFormat }}\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="stat">\n\t\t\t\t\t\t<label translate="CHAT.DETAIL.QUEUE_DTS"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.queueDts | date:\'short\' }}\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="stat">\n\t\t\t\t\t\t<label translate="CHAT.DETAIL.QUEUE_TIME"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.queueTime | hhMmSs }}\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="stat">\n\t\t\t\t\t\t<label translate="GENERICS.LABELS.UII"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ chat.uii }}\n\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="stat" ng-repeat="(key, value) in chat.preChatData track by $index">\n\t\t\t\t\t\t<label>{{ key }}</label>\n\t\t\t\t\t\t<span class="value">{{ value }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</md-card-title-text>\n\t\t\t<div class="stat-chat-info-btn">\n\t\t\t\t<md-button ng-click="toggleDetailView()"\n\t\t\t\t\t\t   class="md-icon-button">\n\t\t\t\t\t<i class="material-icons">close</i>\n\t\t\t\t</md-button>\n\t\t\t</div>\n\t\t</md-card-title>\n\n\t</div>\n\n</md-card>\n')}]),angular.module("directives/dashboard/monitor/monitorDetailCard.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/dashboard/monitor/monitorDetailCard.tpl.html",'<md-card class="monitor-card" ng-class="type">\n\t<md-card-content>\n\t\t<div class="monitor-card-container">\n\t\t\t<div class="stats">\n\t\t\t\t<div class="stat" >\n\t\t\t\t\t<label translate="AGENT_MONITOR.SOURCE"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ agent.queueName | FormatEmptyValue }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="stat">\n\t\t\t\t\t<label translate="AGENT_MONITOR.CALL_ID"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ agent.uii | FormatEmptyValue }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="stat">\n\t\t\t\t\t<label translate="AGENT_MONITOR.DURATION"></label>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t{{ agent.agentState === \'ENGAGED\' ? ( agent.callDuration | hhMmSs ): \'--\'}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="monitor-controls">\n\t\t\t\t<div class="timer">\n\t\t\t\t\t<div ng-show="monitoringActive()" >\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t{{ (\'AGENT_MONITOR.ACTIONS.\' + monitorService.call.type.toUpperCase() + \'.ACTIVE\') | translate}}\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t<span class="counter">\n\t\t\t\t\t\t\t{{ monitorService.call.duration | hhMmSs}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="btn-group">\n\t\t\t\t\t<button type="button"\n\t\t\t\t\t\t\tclass="btn-monitor btn"\n\t\t\t\t\t\t\tng-disabled="monitorButtonDisabled()"\n\t\t\t\t\t\t\tng-click="toggleMonitor(monitorService.call.type || monitorTypes.MONITOR)"\n\t\t\t\t\t\t\tng-class="getMainButtonClass()">\n\t\t\t\t\t\t{{getMonitorButtonLabel() | translate}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type="button"  class="btn dropdown-toggle dropdown-toggle-split"\n\t\t\t\t\t\t\tng-disabled="monitorButtonDisabled()"\n\t\t\t\t\t\t\tng-class="getMainButtonClass()"\n\t\t\t\t\t\t\tdata-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n\t\t\t\t\t\t<md-icon>\n\t\t\t\t\t\t\t<i class="material-icons">expand_more</i>\n\t\t\t\t\t\t</md-icon>\n\t\t\t\t\t</button>\n\t\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t\t<div class="dropdown-item"\n\t\t\t\t\t\t\t ng-click="toggleMonitor(monitorTypes.COACH)"\n\t\t\t\t\t\t\t ng-class="getMonitorButtonClass(monitorTypes.COACH)">\n\t\t\t\t\t\t\t{{ \'AGENT_MONITOR.ACTIONS.COACH.\' + getMonitorVerb(monitorTypes.COACH) | translate }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="dropdown-divider"></div>\n\t\t\t\t\t\t<div class="dropdown-item"\n\t\t\t\t\t\t\t ng-click="toggleMonitor(monitorTypes.BARGE_IN)"\n\t\t\t\t\t\t\t ng-class="getMonitorButtonClass(monitorTypes.BARGE_IN)">\n\t\t\t\t\t\t\t{{ \'AGENT_MONITOR.ACTIONS.BARGEIN.\' + getMonitorVerb(monitorTypes.BARGE_IN)| translate }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</md-card-content>\n</md-card>\n')}]),angular.module("directives/disposition/dispositionForm.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/disposition/dispositionForm.tpl.html",'<form id="dispositionForm" name="dispositionForm" novalidate class="disposition">\n\t<div class="row">\n\t\t<div class="col-sm-12">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="DISPOSITIONS.NOTES"></label>\n\t\t\t\t<textarea ng-model="disposition.notes"\n\t\t\t\t          class="form-control notes" rows="5"\n\t\t\t\t          placeholder="{{ ::\'DISPOSITIONS.NOTES_PLACEHOLDER\'| translate }}"\n\t\t\t\t          ng-required="disposition.disposition.requireNote"></textarea>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="row">\n\t\t<div class="col-sm-12">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="DISPOSITIONS.PICK_DISP"></label>\n\t\t\t\t<ui-select ng-model="disposition.disposition"\n\t\t\t\t\t\ttheme="bootstrap"\n\t\t\t\t\t\tappend-to-body="true"\n\t\t\t\t        required>\n\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SELECT\' | translate }}">{{$select.selected.disposition}}</ui-select-match>\n\t\t\t\t\t<ui-select-choices repeat="disp in dispositions">\n\t\t\t\t\t\t<div ng-bind-html="disp.disposition"></div>\n\t\t\t\t\t</ui-select-choices>\n\t\t\t\t</ui-select>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="row" ng-if="disposition.disposition &&\n\t\t\t\t\t\t\tdisposition.disposition.contactForwarding">\n\t\t<div class="col-sm-12">\n\t\t\t<div agent-input class="form-group">\n\t\t\t\t<label translate="DISPOSITIONS.CONTACT_FORWARDING.CONTACT_FORWARDING"></label>\n\t\t\t\t<input ng-model="disposition.contactForwardNum"\n\t\t\t\t       class="form-control" name="contactForwarding" id="contactForwarding"\n\t\t\t\t       placeholder="{{\'DISPOSITIONS.CONTACT_FORWARDING.DISP_PLACEHOLDER\' | translate}}"\n\t\t\t\t       maxlength="10"\n\t\t\t\t       required />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div ng-if="showCallback()">\n\t\t<md-checkbox class="md-primary" ng-model="disposition.isCallback" aria-label="Callback disposition">\n\t\t\t{{ ::"DISPOSITIONS.CALL_BACK" | translate }}\n\t\t</md-checkbox>\n\n\t\t<div ng-if="disposition.isCallback" class="row">\n\t\t\t<div class="col-sm-4">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="DISPOSITIONS.CALL_BACK_LEAD_TZ"></label>\n\t\t\t\t\t<ui-select ng-model="disposition.leadTimezone"\n\t\t\t\t\t        theme="bootstrap"\n\t\t\t\t\t\t\tappend-to-body="true">\n\t\t\t\t\t\t<ui-select-match placeholder="{{::\'GENERICS.ACTIONS.SELECT\' | translate }}">{{$select.selected.label | translate}}</ui-select-match>\n\t\t\t\t\t\t<ui-select-choices repeat="tz.value as tz in timezones">\n\t\t\t\t\t\t\t<div ng-bind-html="tz.label | translate"></div>\n\t\t\t\t\t\t</ui-select-choices>\n\t\t\t\t\t</ui-select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-4">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="DISPOSITIONS.CALL_BACK.DATE" aria-label="Call Back Date"></label>\n\t\t\t\t\t<cf-date-time-picker name="date"\n\t\t\t\t\t                     append-to-body="true"\n\t\t\t\t\t                     ng-model="disposition.leadDate"\n\t\t\t\t\t                     data-format="{{ dateFormat }}"\n\t\t\t\t\t                     data-required="true">\n\t\t\t\t\t</cf-date-time-picker>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-4">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="DISPOSITIONS.CALL_BACK.TIME" aria-label="Call Back Time"></label>\n\t\t\t\t\t<cf-date-time-picker name="date"\n\t\t\t\t\t                     append-to-body="true"\n\t\t\t\t\t                     ng-model="disposition.leadTime"\n\t\t\t\t\t                     data-format="{{ timeFormat }}"\n\t\t\t\t\t                     data-required="true">\n\t\t\t\t\t</cf-date-time-picker>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="col-md-12 no-left-padding" ng-if="localDts">\n\t\t\t\t<div class="bs-callout bs-callout-primary">\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t{{ ::"DISPOSITIONS.CALL_BACK_LOCAL_TZ" | translate:localTimezone }}\n\t\t\t\t\t</h4>\n\t\t\t\t\t{{ localDts }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</form>\n')}]),angular.module("directives/leads/callbacksTable.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/callbacksTable.tpl.html","<div id=\"leadInfoTable\">\n\t<div class=\"table-scroll\">\n\t\t<table class=\"table\" ng-show=\"!loading && callbacks.length > 0\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th ng-if=\"type !== 'FUTURE-CALLBACK'\">{{ ::'PHONE.CALLBACKS.CAMPAIGN' | translate }}</th>\n\t\t\t\t\t<th ng-if=\"type === 'FUTURE-CALLBACK'\">{{ ::'PHONE.CALLBACKS.DIAL_GROUP' | translate }}</th>\n\t\t\t\t\t<th>{{ ::'PHONE.CALLBACKS.DESTINATION' | translate }}</th>\n\t\t\t\t\t<th ng-if=\"type !== 'FUTURE-CALLBACK'\">{{ ::'PHONE.CALLBACKS.LEAD_STATE' | translate }}</th>\n\t\t\t\t\t<th>{{ ::'PHONE.CALLBACKS.EXTERN_ID' | translate }}</th>\n\t\t\t\t\t<th>{{ ::'PHONE.CALLBACKS.NAME' | translate }}</th>\n\t\t\t\t\t<th>{{ ::'PHONE.CALLBACKS.AUX' | translate }}</th>\n\t\t\t\t\t<th>{{ ::'PHONE.CALLBACKS.CALLBACK_TIME' | translate }}</th>\n\t\t\t\t\t<th class=\"btn-col\">{{ ::'PHONE.CALLBACKS.DETAIL' | translate }}</th>\n\t\t\t\t\t<th ng-if=\"type !== 'FUTURE-CALLBACK'\" class=\"btn-col\">{{ ::'PHONE.CALLBACKS.DIAL' | translate }}</th>\n\t\t\t\t\t<th class=\"btn-col\">{{ ::'PHONE.CALLBACKS.CANCEL' | translate }}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t<tr class=\"animate-fade-fast\"\n\t\t\t    ng-repeat=\"callback in callbacks\"\n\t\t\t    ng-class=\"{'lead-answered':callback.leadState == 'ANSWER', 'lead-dialing':(callback.leadState == 'DIALING' || callback.leadState == 'RINGING'), 'lead-expired':callback.leadState == 'EXPIRED'}\">\n\t\t\t\t<td ng-if=\"type !== 'FUTURE-CALLBACK'\">{{ callback.campaignId | campaignNameFromId }}</td>\n\t\t\t\t<td ng-if=\"type === 'FUTURE-CALLBACK'\">{{ callback.dialGroupName }}</td>\n\t\t\t\t<td>{{ callback.destination | FormatEmptyValue }}</td>\n\t\t\t\t<td ng-if=\"type !== 'FUTURE-CALLBACK'\">{{ callback.leadState | FormatEmptyValue}}</td>\n\t\t\t\t<td>{{ callback.externId | FormatEmptyValue}}</td>\n\t\t\t\t<td>{{ callback.firstName }} {{ callback.lastName }} </td>\n\t\t\t\t<td>{{ concatAuxData(callback) | FormatEmptyValue}}</td>\n\t\t\t\t<td>{{ callback.dialTime | date:'short' | FormatEmptyValue}}</td>\n\n\t\t\t\t<td>\n"+'\t\t\t\t\t<button class="btn btn-link btn-col" ng-click="openDetail(callback)">\n\t\t\t\t\t\t<i class="material-icons">create</i>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t\t<td ng-if="type !== \'FUTURE-CALLBACK\'">\n\t\t\t\t\t<button ng-disabled="dialDisabled(callback, pendingDial)" class="btn btn-link btn-col" ng-click="dial(callback)">\n\t\t\t\t\t\t<i class="material-icons">local_phone</i>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t\t<button id="cancelBtn" class="btn btn-link btn-col btn-cancel"\n\t\t\t\t\t        ng-disabled="cancelDisabled(callback, type === \'FUTURE-CALLBACK\')"\n\t\t\t\t\t        ng-click="cancel(callback)">\n\t\t\t\t\t\t<i class="material-icons">clear</i>\n\t\t\t\t\t</button>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\n\t\t<div class="no-callbacks-msg" ng-show="callbacks.length === 0">\n\t\t\t{{noCallbacksMsg | translate}}\n\t\t</div>\n\n\t\t<div class="col-sm-6 col-md-4 no-padding full-width-btn" ng-if="type !== \'FUTURE-CALLBACK\'">\n\t\t\t<button type="button" class="btn btn-secondary" ng-click="flushCompleted()">{{ ::\'PHONE.CALLBACKS.FLUSH_COMPLETED\' | translate}}</button>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 no-padding full-width-btn" ng-if="type === \'FUTURE-CALLBACK\'">\n\t\t\t<button type="button" class="btn btn-secondary" ng-disabled="pendingRefresh" ng-click="refreshFutureCallbacks()">{{ ::\'PHONE.CALLBACKS.REFRESH_CALLBACKS\' | translate}}</button>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("directives/leads/forms/leadSearch.tpl.html",[]).run(["$templateCache",function(a){
a.put("directives/leads/forms/leadSearch.tpl.html",'<div ng-show="type !== \'\'" class="lead-search">\n\t<form name="searchForm" role="form" class="lead-filter-form card-wrapper">\n\t\t<div class="title" ng-if="type !== \'CALL\'">\n\t\t\t{{title | translate}}\n\t\t</div>\n\t\t<div class="title" ng-if="type === \'CALL\'">\n\t\t\t{{title | translate}}\n\t\t\t<span ng-if="agentPermissions.allowPreviewLeadFilters && !agentPermissions.progressiveEnabled" class="row toggle-filters">\n\t\t\t\t<button class="btn btn-link" ng-click="toggleSearchFields()">{{showSearchFields() ? \'PHONE.PREVIEW.HIDE_FILTERS\' : \'PHONE.PREVIEW.SHOW_FILTERS\' | translate }}</button>\n\t\t\t</span>\n\t\t</div>\n\n\t\t<md-card>\n\t\t\t<md-card-content>\n\t\t\t\t<search-fields></search-fields>\n\n\t\t\t\t<div class="clear"></div>\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-sm-6 col-md-4 full-width-btn">\n\t\t\t\t\t\t<button ng-disabled="searchForm.$invalid || leadActionDisabled()"\n\t\t\t\t\t\t\t\tclass="btn btn-secondary"\n\t\t\t\t\t\t\t\ttype="submit" ng-click="leadAction()">\n\t\t\t\t\t\t\t {{ fetchBtnLabel | translate }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div ng-if="showSearchFields()" class="col-sm-6 col-md-4 full-width-btn">\n\t\t\t\t\t\t<button class="btn btn-default" type="button" ng-click="clearFilters()" >\n\t\t\t\t\t\t\t{{ ::\'PHONE.PREVIEW.SEARCH.RESET_FILTER\' | translate}}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="clear"></div>\n\t\t\t\t</div>\n\t\t\t</md-card-content>\n\t\t</md-card>\n\t</form>\n\n\t<lead-info-table></lead-info-table>\n\n\n</div>\n')}]),angular.module("directives/leads/leadInfoTable.dial.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/leadInfoTable.dial.tpl.html",'<md-dialog class="custom-dialog multi-number-dial" aria-label="Multi-Lead Dial" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-sm" role="document">\n\n\t\t<h4 class="md-title ng-binding" translate="PHONE.PREVIEW.SEARCH.MULTI_LEAD_DIAL_MODAL.TITLE"></h4>\n\n\t\t<form name="dial" role="form" novalidate>\n\t\t\t<p class="sub-title" translate="PHONE.PREVIEW.SEARCH.MULTI_LEAD_DIAL_MODAL.SUB_TITLE"></p>\n\t\t\t<hr/>\n\t\t\t<md-radio-group ng-model="selectedDest" class="md-primary">\n\t\t\t\t <md-radio-button ng-repeat="dest in destinations" value="{{dest}}">\n\t\t\t\t\t {{ dest | phoneFormat}}\n\t\t\t\t </md-radio-button>\n\t\t\t</md-radio-group>\n\t\t\t<hr/>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="dial.$invalid" ng-click="ok()">\n\t\t\t{{ ::"GENERICS.ACTIONS.DIAL" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("directives/leads/leadInfoTable.settings.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/leadInfoTable.settings.tpl.html",'<md-dialog class="custom-dialog" aria-label="Lead form preferences" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-md" role="document">\n\n\t\t<h4 class="md-title ng-binding" translate="PHONE.PREVIEW.PREFERENCES.TITLE"></h4>\n\n\t\t<form name="settings" role="form" novalidate>\n\t\t\t<p translate="PHONE.PREVIEW.PREFERENCES.DESC"></p>\n\t\t\t<div class="col-md-4 col-sm-6 text-left" ng-repeat="(key, value) in columns">\n\t\t\t\t<md-checkbox ng-if="key !== \'agentId\'" id="{{ key }}" name="{{ key }}" class="md-primary" ng-model="columns[key]" >\n\t\t\t\t\t{{::\'PHONE.PREVIEW.GRID.\' + key | translate}}\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-disabled="settings.$invalid" ng-click="ok()">\n\t\t\t{{ ::"GENERICS.ACTIONS.OK" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("directives/leads/leadInfoTable.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/leadInfoTable.tpl.html",'<div id="leadInfoTable" class="card-wrapper">\n\t<div class="title">\n\t\t{{ ::"PHONE.PREVIEW.GRID" | translate }}\n\t\t<button type="button"\n\t\t\t\tid="leadInfoTableSettingsBtn"\n\t\t\t\tclass="btn btn-link btn-sm pull-right"\n\t\t\t\tng-click="openPreferences()"\n\t\t\t\tng-if="leads.length > 0">\n\t\t\t<i class="material-icons">settings</i>\n\t\t</button>\n\t</div>\n\n\t<md-card>\n\t\t<md-card-content>\n\t\t\t<div class="table-scroll">\n\t\t\t\t<table class="table" ng-show="!loading && leads.length > 0">\n\t\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th ng-repeat="column in availableCols" ng-show="agentService.isColVisible(column)">\n\t\t\t\t\t\t\t{{ ::"PHONE.PREVIEW.GRID." + column | uppercase | translate }}\n\t\t\t\t\t\t</th>\n\n\t\t\t\t\t\t<th class="btn-col" translate="PHONE.PREVIEW.GRID.DETAIL"></th>\n\t\t\t\t\t\t<th class="btn-col" translate="PHONE.PREVIEW.GRID.DIAL"></th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t<tr class="animate-fade-fast"\n\t\t\t\t\t    ng-repeat="lead in leads"\n\t\t\t\t\t    ng-class="{\'lead-answered\':lead.leadState == \'ANSWER\', \'lead-dialing\':(lead.leadState == \'DIALING\' || lead.leadState == \'RINGING\'), \'lead-expired\':lead.leadState == \'EXPIRED\'}">\n\t\t\t\t\t\t<td ng-repeat="column in availableCols" ng-show="agentService.isColVisible(column)">\n\t\t\t\t\t\t\t<span ng-if="column.toUpperCase() === \'CAMPAIGN_ID\'">\n\t\t\t\t\t\t\t\t{{ (lead[(column | lowercase | snakeToCamel)]) | campaignNameFromId }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="column.toUpperCase() === \'DESTINATION\'">\n\t\t\t\t\t\t\t\t{{ (lead[(column | lowercase | snakeToCamel)]) | phoneFormat }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span ng-if="column.toUpperCase() !== \'CAMPAIGN_ID\' && column.toUpperCase() !== \'DESTINATION\'">\n\t\t\t\t\t\t\t\t{{ lead[(column | lowercase | snakeToCamel)] }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button class="btn btn-link btn-col" ng-click="openDetail(lead)">\n\t\t\t\t\t\t\t\t<i class="material-icons">create</i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button ng-disabled="leadService.leadSearchDialDisabled(lead, outboundService.pendingPreviewDial)" id="dialBtn" class="btn btn-link btn-col" ng-click="dial(lead)">\n\t\t\t\t\t\t\t\t<i class="material-icons">phone_in_talk</i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<h4>\n\t\t\t\t{{ outboundService.leadSearchLoading ? \'PHONE.PREVIEW.GRID.LOADING_MSG\' : "" | translate}} {{!outboundService.leadSearchLoading && leads.length === 0 ? noLeadsMsg : "" | translate}}\n\t\t\t</h4>\n\t\t</md-card-content>\n\t</md-card>\n\n</div>\n')}]),angular.module("directives/leads/leadList.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/leadList.tpl.html",'<div class="card-container">\n\t<div class="card-block">\n\t\t<div class="card-wrapper"\n\t\t\t ng-repeat="lead in outboundService.previewLeads | leadState track by lead.leadId"\n\t\t\t ng-disabled="leadService.multiNumberLeadDialDisabled(lead)"\n\t\t\t ng-click="setSelected(lead)"\n\t\t\t ng-class="{\'lead-selected\': leadService.selectedPreviewLead.leadId === lead.leadId }">\n\t\t\t<div class="detail-group">\n\t\t\t\t<span class="value">\n\t\t\t\t\t{{ lead.firstName | FormatEmptyValue }} {{ lead.lastName | FormatEmptyValue }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class="detail-group">\n\t\t\t\t<span class="value" ng-if="!lead.hciDialed">\n\t\t\t\t\t<button type="button" ng-disabled="leadService.leadDialDisabled(lead, outboundService.pendingPreviewDial, true) || leadService.isMultiNumberLead(lead)"\n\t\t\t\t\t\t\tclass="btn btn-link lead-number" ng-click="dial(lead)" ng-class="{\'multiple-number\': leadService.isMultiNumberLead(lead) == true }"\n\t\t\t\t\t\t\tuib-popover="{{\'PHONE.PREVIEW.CLICK_ON_DIAL\' | translate}}" popover-trigger="\'mouseenter\'" popover-placement= "right" popover-class= \'menu-popover-style\' popover-enable= "true">\n\t\t\t\t\t\t{{ lead.destination | FormatEmptyValue | phoneFormat }}\n\t\t\t\t\t</button>\n\t\t\t\t</span>\n\n\t\t\t\t\x3c!-- for HCI Display only, once dialing number show lead state --\x3e\n\t\t\t\t<span class="value" ng-if="lead.hciDialed && outboundService.isHciFetch()">\n\t\t\t\t\t{{ lead.leadState }}\n\t\t\t\t</span>\n\t\t\t\t<span ng-if="lead.hciDialed && lead.stateChanged && outboundService.isHciPacing()">\n\t\t\t\t\t<i class="material-icons check-icon">check</i>\n\t\t\t\t\t<span class="value success">\n\t\t\t\t\t\t{{ ::\'PHONE.PREVIEW.LEAD_DIALED\' | translate }}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\n</div>\n')}]),angular.module("directives/leads/searchFields.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/leads/searchFields.tpl.html",'<div class="search-fields">\n\t<div ng-if="type===\'INSERT\'">\n\t\t<div class="form-group">\n\t\t\t<ui-select ng-model="searchFieldsTemp.campaign_id" theme="bootstrap" name="campaign" id="campaign" sortable="true" required ng-change="setAuxLabels(searchFieldsTemp.campaign_id)">\n\t\t\t\t<ui-select-match placeholder="{{\'GENERICS.ACTIONS.SEARCH\' | translate }}">{{$select.selected.campaignId}} - {{$select.selected.campaignName}}</ui-select-match>\n\t\t\t\t<ui-select-choices repeat="camp.campaignId as camp in campaigns | filter: $select.search">\n\t\t\t\t\t<div ng-bind-html="camp.campaignName | highlight: $select.search"></div>\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{{::"PHONE.LEAD_MANAGEMENT.INSERT.CAMPAIGN_ID" | translate}}: <span ng-bind-html="\'\'+camp.campaignId | highlight: $select.search"></span>\n\t\t\t\t\t</small>\n\t\t\t\t</ui-select-choices>\n\t\t\t</ui-select>\n\t\t</div>\n\t</div>\n\n\t<div class="filters row" ng-if="showSearchFields()">\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.LEAD_PHONE"></label>\n\t\t\t\t<input phone-number ng-model="searchFieldsTemp.lead_phone" name="leadPhone" id="leadPhone" type="text" class="form-control" maxlength="32" autofocus ng-required="type===\'INSERT\'" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter" ng-if="type === \'INSERT\'">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.SUFFIX"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.suffix" name="suffix" id="suffix" type="text" class="form-control" maxlength="20" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter" ng-if="type === \'INSERT\'">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.TITLE"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.title" name="title" id="title" type="text" class="form-control" maxlength="20" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.FIRST_NAME"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.first_name" name="firstName" id="firstName" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.LAST_NAME"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.last_name" name="lastName" id="lastName" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.ADDRESS1"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.address1" name="address1" id="address1" type="text" class="form-control" maxlength="100" />\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.CITY"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.city" name="city" id="city" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.STATE"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.state" name="state" id="state" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.ZIP"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.zip" name="zip" id="zip" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter" ng-if="type !== \'INSERT\'">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.PREVIEW.SEARCH.EXTERN_ID"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.extern_id" name="externId" id="externId" type="text" class="form-control" maxlength="50" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter" ng-if="type === \'INSERT\'">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.EMAIL"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.email" name="email" id="email" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter" ng-if="type === \'INSERT\'">\n\t\t\t<div class="form-group">\n\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.GATEKEEPER"></label>\n\t\t\t\t<input ng-model="searchFieldsTemp.gate_keeper" name="gateKeeper" id="gateKeeper" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label> {{auxLabels.aux1}}</label>\n\t\t\t\t<input ng-model="searchFieldsTemp.aux_data1" name="aux1" id="aux1" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label> {{auxLabels.aux2}} </label>\n\t\t\t\t<input ng-model="searchFieldsTemp.aux_data2" name="aux2" id="aux2" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label> {{auxLabels.aux3}} </label>\n\t\t\t\t<input ng-model="searchFieldsTemp.aux_data3" name="aux3" id="aux3" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label> {{auxLabels.aux4}} </label>\n\t\t\t\t<input ng-model="searchFieldsTemp.aux_data4" name="aux4" id="aux4" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<label> {{auxLabels.aux5}} </label>\n\t\t\t\t<input ng-model="searchFieldsTemp.aux_data5" name="aux5" id="aux5" type="text" class="form-control" maxlength="255" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div ng-if="showSearchFields() && type===\'INSERT\'" class="row">\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<md-checkbox class="md-primary" ng-model="searchFieldsTemp.dialable" aria-label="Ready to dial">\n\t\t\t\t\t<span cf-form-label-help location="top" label-text="PHONE.LEAD_MANAGEMENT.INSERT.READY_TO_DIAL"></span>\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t<div class="form-group">\n\t\t\t\t<md-checkbox class="md-primary" ng-model="searchFieldsTemp.agent_reserved" aria-label="Agent specific">\n\t\t\t\t\t<span cf-form-label-help location="top" label-text="PHONE.LEAD_MANAGEMENT.INSERT.AGENT_SPECIFIC"></span>\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if="searchFieldsTemp.dialable">\n\t\t\t<div class="clear col-sm-6 col-md-4 lead-filter">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="DISPOSITIONS.CALL_BACK_LEAD_TZ"></label>\n\t\t\t\t\t<select ng-model="datetime.timezone" class="form-control" >\n\t\t\t\t\t\t<option ng-repeat="tz in timezones" value="{{tz.value}}">{{tz.label | translate}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-6 col-md-4 lead-filter">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.DATE_TO_CALL"></label>\n\t\t\t\t\t<cf-date-time-picker name="date"\n\t\t\t\t\t\t\t\t\t\t class="form-control"\n\t\t\t\t\t\t\t\t\t\t ng-model="datetime.date"\n\t\t\t\t\t\t\t\t\t\t data-format="{{ dateFormat }}"\n\t\t\t\t\t\t\t\t\t\t data-required="true">\n\t\t\t\t\t</cf-date-time-picker>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-12 col-md-12" ng-if="localDts != \'\' ">\n\t\t\t\t<div class="bs-callout bs-callout-primary">\n\t\t\t\t\t<h4>{{"PHONE.LEAD_MANAGEMENT.INSERT.CALL_BACK_LOCAL_TZ" | translate:localTimezone }}</h4>\n\t\t\t\t\t{{localDts}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("directives/scriptFrameManager.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/scriptFrameManager.tpl.html",'<div class="frame-manager">\n\t<div class="contact" ng-repeat="contact in managedFrames track by contact.uii" ng-show="contact.uii === currentDetailUii">\n\t\t<cf-agent-script ng-if="::showScript(contact)" data-contact-source="contact"></cf-agent-script>\n\t\t<cf-agent-script-frame ng-if="::showParentFrame(contact)" data-app-url="contact.appUrl"></cf-agent-script-frame>\n\t</div>\n</div>\n')}]),angular.module("factories/dialogs/confirm.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/confirm.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content width-sm text-left">\n\t\t<h4 class="md-title">\n\t\t\t{{ ::vm.title | translate }}\n\t\t</h4>\n\n\t\t<div class="text-left">\n\t\t\t<p class="no-margin">\n\t\t\t\t{{ ::vm.content | translate }}\n\t\t\t</p>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button ng-if="vm.cancel" ng-click="vm.closeError()" class="btn btn-link">\n\t\t\t{{ ::vm.cancel | translate }}\n\t\t</button>\n\t\t<button ng-click="vm.closeSuccess()" class="btn btn-secondary">\n\t\t\t{{ ::vm.ok | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("factories/dialogs/disposition/disposition.dialog.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/disposition/disposition.dialog.tpl.html",'<md-dialog class="custom-dialog">\n\t<md-dialog-content class="md-dialog-content width-md">\n\n\t\t<h4 class="md-title" translate="DISPOSITIONS.TITLE_ALT"></h4>\n\n\t\t<div ng-form name="dispositionModalForm">\n\t\t\t<disposition-form\n\t\t\t\t\tdisposition="disposition"\n\t\t\t\t\tdisposition-list="dispositionList">\n\t\t\t</disposition-form>\n\t\t</div>\n\t\t<div ng-if="!scriptValid" class="error-msg" translate="DISPOSITIONS.SCRIPT_INCOMPLETE"></div>\n\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button type="button" class="btn btn-link" ng-click="close()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\n\t\t<button type="submit" class="btn"\n\t\t        ng-click="submitDisposition()"\n\t\t        ng-class="getSubmitDisplay().button"\n\t\t        ng-disabled="submitDisabled()">\n\t\t\t{{ getSubmitDisplay().label | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("factories/dialogs/knowledgeBaseEdit/knowledgeBaseEditModal.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/knowledgeBaseEdit/knowledgeBaseEditModal.tpl.html",'<md-dialog class="custom-dialog" aria-label="knowledgeBaseEdit" role="dialog" id="knowledgeBaseEdit">\n    <md-dialog-content class="md-dialog-content width-lg" role="document">\n        <h4 class="md-title" translate="CHAT.MODALS.KNOWLEDGE_BASE_EDIT.TITLE"></h4>\n\n        <text-editor ng-if="!data.isSms"\n                     ng-model="data.content"\n                     show-link-tool="true"></text-editor>\n\n\t    <textarea ng-if="data.isSms"\n\t              class="form-control sms-text"\n\t              ng-model="data.content"></textarea>\n\n    </md-dialog-content>\n\n    <md-dialog-actions>\n        <button class="btn btn-link" ng-click="cancel()">\n            {{::"GENERICS.ACTIONS.CANCEL" | translate}}\n        </button>\n\n        <button class="btn btn-primary" ng-click="send()">\n            {{::"CHAT.MODALS.KNOWLEDGE_BASE_EDIT.SEND_NOW" | translate}}\n        </button>\n    </md-dialog-actions>\n</md-dialog>\n\n')}]),angular.module("factories/dialogs/leads/leadDetail.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/leads/leadDetail.tpl.html",'<md-dialog class="custom-dialog lead-detail">\n\t<md-dialog-content class="md-dialog-content width-md">\n\t\t<h4 class="md-title">\n\t\t\t{{ ::\'LEAD_DETAIL.TITLE\' | translate }}\n\t\t</h4>\n\t\t<div class="row lead-data" id="leadData">\n\t\t\t<div class="col-md-6">\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.LEAD_ID"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.leadId | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.LEAD_PHONE"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.destination | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.EXTERN_ID"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.externId | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.STATE"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.leadState | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.VALID"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.validUntil | date:\'short\' | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.LIST_DESC"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.listDesc | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.LEAD_TITLE"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.title | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.FIRST_NAME"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.firstName | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.MID_NAME"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.midName | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.LAST_NAME"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.lastName | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.SUFFIX"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.suffix | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.EMAIL"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.email | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="col-md-6">\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.ADDRESS1"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.address1 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.ADDRESS2"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.address2 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.CITY"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.city | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.STATE"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.state | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.ZIP"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.zip | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.GATEKEEPER"></span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.gateKeeper | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label">\n\t\t\t\t\t\t{{ vm.auxLabels.aux1 }}\n\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.auxData1 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label">\n\t\t\t\t\t\t{{ vm.auxLabels.aux2 }}\n\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.auxData2 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label">\n\t\t\t\t\t\t{{ vm.auxLabels.aux3 }}\n\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.auxData3 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label">\n\t\t\t\t\t\t{{ vm.auxLabels.aux4 }}\n\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.auxData4 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="detail-group">\n\t\t\t\t\t<span class="detail-label">\n\t\t\t\t\t\t{{ vm.auxLabels.aux5 }}\n\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t<span class="value">{{ vm.lead.auxData5 | FormatEmptyValue }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="lead-history" ng-if="vm.historyLoaded">\n\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t<h5 class="sub-title text-left">\n\t\t\t\t\t\t{{ ::\'LEAD_DETAIL.MODAL.HISTORY.SUB\' | translate }}\n\n\t\t\t\t\t\t<span class="close-history pull-right" ng-click="vm.leadHistory = undefined; vm.historyLoaded = false;">\n\t\t\t\t\t\t\t{{ ::\'GENERICS.ACTIONS.CLOSE\' | translate }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div class="clear"></div>\n\t\t\t\t\t</h5>\n\n\t\t\t\t\t<h4 ng-if="vm.leadHistory.length === 0;">\n\t\t\t\t\t\t{{ ::\'LEAD_DETAIL.MODAL.HISTORY.NONE\' | translate }}\n\t\t\t\t\t</h4>\n\t\t\t\t</div>\n\n\t\t\t\t<div ng-repeat="contact in vm.leadHistory" class="clear">\n\t\t\t\t\t<div class="col-md-6 group-wrapper">\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="GENERICS.LABELS.LEAD_ID"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.leadId | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.DTS"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.passDts | date:\'short\' | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.DISP"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.passDisposition | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.PASS_COUNT"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.passNumber | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6 group-wrapper">\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.AGENT"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.agentName | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.AGENT_DISP"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.agentDisposition | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="detail-group">\n\t\t\t\t\t\t\t<span class="detail-label" translate="LEAD_DETAIL.MODAL.HISTORY.AGENT_NOTES"></span>&nbsp;\n\t\t\t\t\t\t\t<span class="value">{{ contact.agentNotes | FormatEmptyValue }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr class="clear">\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="lead-actions">\n\t\t\t<div class="action full-width-btn">\n\t\t\t\t<button class="btn btn-secondary" ng-click="vm.dialLead(vm.lead)" ng-disabled="vm.dialDisabled()">\n\t\t\t\t\t{{ ::"LEAD_DETAIL.MODAL.DIAL" | translate }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="action full-width-btn">\n\t\t\t\t<button class="btn btn-secondary" ng-click="vm.getHistory()" ng-disabled="vm.leadHistoryDisabled()">\n\t\t\t\t\t{{ ::"LEAD_DETAIL.MODAL.HISTORY" | translate }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="action full-width-btn">\n\t\t\t\t<button class="btn btn-secondary" ng-click="vm.manualPass()" ng-disabled="vm.manualPassDisabled()">\n\t\t\t\t\t{{ ::"LEAD_DETAIL.MODAL.MANUAL_PASS" | translate }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="action full-width-btn">\n\t\t\t\t<button class="btn btn-secondary" ng-click="vm.updateLead()" ng-disabled="vm.updateDisabled()">\n\t\t\t\t\t{{ ::"LEAD_DETAIL.MODAL.UPDATE" | translate }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="vm.close()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CLOSE" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("factories/dialogs/leads/leadManualPass.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/leads/leadManualPass.tpl.html",'<md-dialog class="custom-dialog" aria-label="Manual Pass" role="dialog">\n\t<md-dialog-content class="md-dialog-content width-md">\n\t\t<h4 class="md-title">{{::"PHONE.MANUAL_PASS.TITLE" | translate}}</h4>\n\n\t\t<div ng-form name="manualPassForm">\n\t\t\t<disposition-form\n\t\t\t\t\tdisposition="vm.selectedDisposition"\n\t\t\t\t\tdisposition-list="vm.dispositions">\n\t\t\t</disposition-form>\n\t\t</div>\n\t</md-dialog-content>\n\t<md-dialog-actions>\n\t\t<button class="btn btn-link" ng-click="vm.cancel()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button class="btn btn-secondary" ng-click="vm.submit()" ng-disabled="manualPassForm.$invalid">\n\t\t\t{{ ::"GENERICS.ACTIONS.SUBMIT" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("factories/dialogs/leads/leadUpdate.tpl.html",[]).run(["$templateCache",function(a){
a.put("factories/dialogs/leads/leadUpdate.tpl.html",'<md-dialog class="custom-dialog lead-detail update">\n\t<md-dialog-content class="md-dialog-content width-md">\n\t\t<h4 class="md-title">\n\t\t\t{{ ::\'LEAD_DETAIL.MODAL.UPDATE\' | translate }}\n\t\t</h4>\n\t\t<form name="updateForm" class="row lead-data" novalidate>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.PHONE"></label>\n\t\t\t\t\t<input ng-disabled="vm.allowLeadUpdates === 2" ng-model="vm.lead.destination" name="leadPhone" id="leadPhone" type="text" class="form-control" maxlength="32" autofocus />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.SUFFIX"></label>\n\t\t\t\t\t<input ng-model="vm.lead.suffix" name="suffix" id="suffix" type="text" class="form-control" maxlength="20" autofocus />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.TITLE"></label>\n\t\t\t\t\t<input ng-model="vm.lead.title" name="title" id="title" type="text" class="form-control" maxlength="20" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.FIRST_NAME"></label>\n\t\t\t\t\t<input ng-model="vm.lead.firstName" name="firstName" id="firstName" type="text" class="form-control" maxlength="50" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.MID_NAME"></label>\n\t\t\t\t\t<input ng-model="vm.lead.midName" name="midName" id="midName" type="text" class="form-control" maxlength="50" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.LAST_NAME"></label>\n\t\t\t\t\t<input ng-model="vm.lead.lastName" name="lastName" id="lastName" type="text" class="form-control" maxlength="50" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.ADDRESS1"></label>\n\t\t\t\t\t<input ng-model="vm.lead.address1" name="address1" id="address1" type="text" class="form-control" maxlength="100" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.ADDRESS2"></label>\n\t\t\t\t\t<input ng-model="vm.lead.address2" name="address2" id="address2" type="text" class="form-control" maxlength="100" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.CITY"></label>\n\t\t\t\t\t<input ng-model="vm.lead.city" name="city" id="city" type="text" class="form-control" maxlength="50" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.STATE"></label>\n\t\t\t\t\t<input ng-model="vm.lead.state" name="state" id="state" type="text" class="form-control"  maxlength="50" />\n\t\t\t\t\t<span>{{vm.lead.state}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.ZIP"></label>\n\t\t\t\t\t<input ng-model="vm.lead.zip" name="zip" id="zip" type="text" class="form-control" maxlength="50" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.EMAIL"></label>\n\t\t\t\t\t<input ng-model="vm.lead.email" name="email" id="email" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="PHONE.LEAD_MANAGEMENT.INSERT.GATEKEEPER"></label>\n\t\t\t\t\t<input ng-model="vm.lead.gateKeeper" name="gateKeeper" id="gateKeeper" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="{{vm.auxLabels.aux1}}"></label>\n\t\t\t\t\t<input ng-model="vm.lead.auxData1" name="auxData1" id="auxData1" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="{{vm.auxLabels.aux2}}"></label>\n\t\t\t\t\t<input ng-model="vm.lead.auxData2" name="auxData2" id="auxData2" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="{{vm.auxLabels.aux3}}"></label>\n\t\t\t\t\t<input ng-model="vm.lead.auxData3" name="auxData3" id="auxData3" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="{{vm.auxLabels.aux4}}"></label>\n\t\t\t\t\t<input ng-model="vm.lead.auxData4" name="auxData4" id="auxData4" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-md-4">\n\t\t\t\t<div agent-input class="form-group">\n\t\t\t\t\t<label translate="{{vm.auxLabels.aux5}}"></label>\n\t\t\t\t\t<input ng-model="vm.lead.auxData5" name="auxData5" id="auxData5" type="text" class="form-control" maxlength="255" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button type="button" class="btn btn-link" ng-click="vm.close()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\n\t\t<button type="submit" class="btn btn-secondary" ng-click="vm.save()" ng-disabled="updateForm.$invalid">\n\t\t\t{{ ::"GENERICS.ACTIONS.SAVE" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),angular.module("factories/dialogs/shared/tableColumns.dialog.tpl.html",[]).run(["$templateCache",function(a){a.put("factories/dialogs/shared/tableColumns.dialog.tpl.html",'<md-dialog class="custom-dialog lead-detail update">\n\t<md-dialog-content class="md-dialog-content">\n\t\t<h4 class="md-title">\n\t\t\t{{ ::\'GENERICS.MODAL.SHARED.UPDATE_COLUMNS\' | translate }}\n\t\t</h4>\n\t\t<form name="updateForm" class="row lead-data" novalidate>\n\t\t\t<div class="col-sm-6 col-md-4 text-left" ng-repeat="option in vm.columnOptions">\n\t\t\t\t<md-checkbox class="md-primary" ng-model="option.visible" aria-label="{{ option.displayName }}">\n\t\t\t\t\t{{ option.displayName }}\n\t\t\t\t</md-checkbox>\n\t\t\t</div>\n\t\t</form>\n\t</md-dialog-content>\n\n\t<md-dialog-actions>\n\t\t<button type="button" class="btn btn-link" ng-click="vm.close()">\n\t\t\t{{ ::"GENERICS.ACTIONS.CANCEL" | translate }}\n\t\t</button>\n\t\t<button type="submit" class="btn btn-secondary" ng-click="vm.save()" ng-disabled="updateForm.$invalid">\n\t\t\t{{ ::"GENERICS.ACTIONS.SAVE" | translate }}\n\t\t</button>\n\t</md-dialog-actions>\n</md-dialog>\n')}]),b.true=a}({},function(){return this}());
//# sourceMappingURL=agent-js.js.map